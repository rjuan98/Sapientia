function fI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function pI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var f_={exports:{}},ac={},p_={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ea=Symbol.for("react.element"),mI=Symbol.for("react.portal"),gI=Symbol.for("react.fragment"),yI=Symbol.for("react.strict_mode"),vI=Symbol.for("react.profiler"),_I=Symbol.for("react.provider"),wI=Symbol.for("react.context"),EI=Symbol.for("react.forward_ref"),TI=Symbol.for("react.suspense"),SI=Symbol.for("react.memo"),II=Symbol.for("react.lazy"),ey=Symbol.iterator;function xI(t){return t===null||typeof t!="object"?null:(t=ey&&t[ey]||t["@@iterator"],typeof t=="function"?t:null)}var m_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g_=Object.assign,y_={};function Ls(t,e,n){this.props=t,this.context=e,this.refs=y_,this.updater=n||m_}Ls.prototype.isReactComponent={};Ls.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ls.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function v_(){}v_.prototype=Ls.prototype;function Jf(t,e,n){this.props=t,this.context=e,this.refs=y_,this.updater=n||m_}var Xf=Jf.prototype=new v_;Xf.constructor=Jf;g_(Xf,Ls.prototype);Xf.isPureReactComponent=!0;var ty=Array.isArray,__=Object.prototype.hasOwnProperty,Yf={current:null},w_={key:!0,ref:!0,__self:!0,__source:!0};function E_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)__.call(e,r)&&!w_.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ea,type:t,key:s,ref:o,props:i,_owner:Yf.current}}function AI(t,e){return{$$typeof:Ea,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Zf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ea}function CI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ny=/\/+/g;function Sh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?CI(""+t.key):e.toString(36)}function Ol(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ea:case mI:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Sh(o,0):r,ty(i)?(n="",t!=null&&(n=t.replace(ny,"$&/")+"/"),Ol(i,e,n,"",function(c){return c})):i!=null&&(Zf(i)&&(i=AI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ny,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",ty(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Sh(s,l);o+=Ol(s,e,n,u,i)}else if(u=xI(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Sh(s,l++),o+=Ol(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function al(t,e,n){if(t==null)return t;var r=[],i=0;return Ol(t,r,"","",function(s){return e.call(n,s,i++)}),r}function RI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var At={current:null},Ll={transition:null},kI={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:Ll,ReactCurrentOwner:Yf};function T_(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:al,forEach:function(t,e,n){al(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return al(t,function(){e++}),e},toArray:function(t){return al(t,function(e){return e})||[]},only:function(t){if(!Zf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=Ls;oe.Fragment=gI;oe.Profiler=vI;oe.PureComponent=Jf;oe.StrictMode=yI;oe.Suspense=TI;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kI;oe.act=T_;oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=g_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Yf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)__.call(e,u)&&!w_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Ea,type:t.type,key:i,ref:s,props:r,_owner:o}};oe.createContext=function(t){return t={$$typeof:wI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_I,_context:t},t.Consumer=t};oe.createElement=E_;oe.createFactory=function(t){var e=E_.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:EI,render:t}};oe.isValidElement=Zf;oe.lazy=function(t){return{$$typeof:II,_payload:{_status:-1,_result:t},_init:RI}};oe.memo=function(t,e){return{$$typeof:SI,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=Ll.transition;Ll.transition={};try{t()}finally{Ll.transition=e}};oe.unstable_act=T_;oe.useCallback=function(t,e){return At.current.useCallback(t,e)};oe.useContext=function(t){return At.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return At.current.useDeferredValue(t)};oe.useEffect=function(t,e){return At.current.useEffect(t,e)};oe.useId=function(){return At.current.useId()};oe.useImperativeHandle=function(t,e,n){return At.current.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return At.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return At.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return At.current.useMemo(t,e)};oe.useReducer=function(t,e,n){return At.current.useReducer(t,e,n)};oe.useRef=function(t){return At.current.useRef(t)};oe.useState=function(t){return At.current.useState(t)};oe.useSyncExternalStore=function(t,e,n){return At.current.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return At.current.useTransition()};oe.version="18.3.1";p_.exports=oe;var U=p_.exports;const S_=pI(U),NI=fI({__proto__:null,default:S_},[U]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PI=U,bI=Symbol.for("react.element"),DI=Symbol.for("react.fragment"),OI=Object.prototype.hasOwnProperty,LI=PI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VI={key:!0,ref:!0,__self:!0,__source:!0};function I_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)OI.call(e,r)&&!VI.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:bI,type:t,key:s,ref:o,props:i,_owner:LI.current}}ac.Fragment=DI;ac.jsx=I_;ac.jsxs=I_;f_.exports=ac;var x_=f_.exports;const g=x_.jsx,P=x_.jsxs;var gd={},A_={exports:{}},Wt={},C_={exports:{}},R_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,X){var ee=H.length;H.push(X);e:for(;0<ee;){var pe=ee-1>>>1,ce=H[pe];if(0<i(ce,X))H[pe]=X,H[ee]=ce,ee=pe;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var X=H[0],ee=H.pop();if(ee!==X){H[0]=ee;e:for(var pe=0,ce=H.length,we=ce>>>1;pe<we;){var kt=2*(pe+1)-1,se=H[kt],Ae=kt+1,st=H[Ae];if(0>i(se,ee))Ae<ce&&0>i(st,se)?(H[pe]=st,H[Ae]=ee,pe=Ae):(H[pe]=se,H[kt]=ee,pe=kt);else if(Ae<ce&&0>i(st,ee))H[pe]=st,H[Ae]=ee,pe=Ae;else break e}}return X}function i(H,X){var ee=H.sortIndex-X.sortIndex;return ee!==0?ee:H.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],d=1,p=null,m=3,x=!1,A=!1,R=!1,I=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(H){for(var X=n(c);X!==null;){if(X.callback===null)r(c);else if(X.startTime<=H)r(c),X.sortIndex=X.expirationTime,e(u,X);else break;X=n(c)}}function L(H){if(R=!1,C(H),!A)if(n(u)!==null)A=!0,Kt(O);else{var X=n(c);X!==null&&Rt(L,X.startTime-H)}}function O(H,X){A=!1,R&&(R=!1,E(y),y=-1),x=!0;var ee=m;try{for(C(X),p=n(u);p!==null&&(!(p.expirationTime>X)||H&&!S());){var pe=p.callback;if(typeof pe=="function"){p.callback=null,m=p.priorityLevel;var ce=pe(p.expirationTime<=X);X=t.unstable_now(),typeof ce=="function"?p.callback=ce:p===n(u)&&r(u),C(X)}else r(u);p=n(u)}if(p!==null)var we=!0;else{var kt=n(c);kt!==null&&Rt(L,kt.startTime-X),we=!1}return we}finally{p=null,m=ee,x=!1}}var z=!1,w=null,y=-1,T=5,k=-1;function S(){return!(t.unstable_now()-k<T)}function b(){if(w!==null){var H=t.unstable_now();k=H;var X=!0;try{X=w(!0,H)}finally{X?N():(z=!1,w=null)}}else z=!1}var N;if(typeof _=="function")N=function(){_(b)};else if(typeof MessageChannel<"u"){var Ve=new MessageChannel,vt=Ve.port2;Ve.port1.onmessage=b,N=function(){vt.postMessage(null)}}else N=function(){I(b,0)};function Kt(H){w=H,z||(z=!0,N())}function Rt(H,X){y=I(function(){H(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){A||x||(A=!0,Kt(O))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(H){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var ee=m;m=X;try{return H()}finally{m=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,X){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ee=m;m=H;try{return X()}finally{m=ee}},t.unstable_scheduleCallback=function(H,X,ee){var pe=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?pe+ee:pe):ee=pe,H){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=ee+ce,H={id:d++,callback:X,priorityLevel:H,startTime:ee,expirationTime:ce,sortIndex:-1},ee>pe?(H.sortIndex=ee,e(c,H),n(u)===null&&H===n(c)&&(R?(E(y),y=-1):R=!0,Rt(L,ee-pe))):(H.sortIndex=ce,e(u,H),A||x||(A=!0,Kt(O))),H},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(H){var X=m;return function(){var ee=m;m=X;try{return H.apply(this,arguments)}finally{m=ee}}}})(R_);C_.exports=R_;var MI=C_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FI=U,Ht=MI;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var k_=new Set,Wo={};function Ni(t,e){Es(t,e),Es(t+"Capture",e)}function Es(t,e){for(Wo[t]=e,t=0;t<e.length;t++)k_.add(e[t])}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yd=Object.prototype.hasOwnProperty,UI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ry={},iy={};function zI(t){return yd.call(iy,t)?!0:yd.call(ry,t)?!1:UI.test(t)?iy[t]=!0:(ry[t]=!0,!1)}function BI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function jI(t,e,n,r){if(e===null||typeof e>"u"||BI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ct(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rt[t]=new Ct(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rt[e]=new Ct(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rt[t]=new Ct(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rt[t]=new Ct(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rt[t]=new Ct(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rt[t]=new Ct(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rt[t]=new Ct(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rt[t]=new Ct(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rt[t]=new Ct(t,5,!1,t.toLowerCase(),null,!1,!1)});var ep=/[\-:]([a-z])/g;function tp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ep,tp);rt[e]=new Ct(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ep,tp);rt[e]=new Ct(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ep,tp);rt[e]=new Ct(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rt[t]=new Ct(t,1,!1,t.toLowerCase(),null,!1,!1)});rt.xlinkHref=new Ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rt[t]=new Ct(t,1,!1,t.toLowerCase(),null,!0,!0)});function np(t,e,n,r){var i=rt.hasOwnProperty(e)?rt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(jI(e,n,i,r)&&(n=null),r||i===null?zI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var sr=FI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ll=Symbol.for("react.element"),Yi=Symbol.for("react.portal"),Zi=Symbol.for("react.fragment"),rp=Symbol.for("react.strict_mode"),vd=Symbol.for("react.profiler"),N_=Symbol.for("react.provider"),P_=Symbol.for("react.context"),ip=Symbol.for("react.forward_ref"),_d=Symbol.for("react.suspense"),wd=Symbol.for("react.suspense_list"),sp=Symbol.for("react.memo"),dr=Symbol.for("react.lazy"),b_=Symbol.for("react.offscreen"),sy=Symbol.iterator;function ao(t){return t===null||typeof t!="object"?null:(t=sy&&t[sy]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Object.assign,Ih;function Eo(t){if(Ih===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ih=e&&e[1]||""}return`
`+Ih+t}var xh=!1;function Ah(t,e){if(!t||xh)return"";xh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{xh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Eo(t):""}function $I(t){switch(t.tag){case 5:return Eo(t.type);case 16:return Eo("Lazy");case 13:return Eo("Suspense");case 19:return Eo("SuspenseList");case 0:case 2:case 15:return t=Ah(t.type,!1),t;case 11:return t=Ah(t.type.render,!1),t;case 1:return t=Ah(t.type,!0),t;default:return""}}function Ed(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zi:return"Fragment";case Yi:return"Portal";case vd:return"Profiler";case rp:return"StrictMode";case _d:return"Suspense";case wd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case P_:return(t.displayName||"Context")+".Consumer";case N_:return(t._context.displayName||"Context")+".Provider";case ip:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case sp:return e=t.displayName||null,e!==null?e:Ed(t.type)||"Memo";case dr:e=t._payload,t=t._init;try{return Ed(t(e))}catch{}}return null}function qI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ed(e);case 8:return e===rp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function D_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function HI(t){var e=D_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ul(t){t._valueTracker||(t._valueTracker=HI(t))}function O_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=D_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function lu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Td(t,e){var n=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function oy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Fr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function L_(t,e){e=e.checked,e!=null&&np(t,"checked",e,!1)}function Sd(t,e){L_(t,e);var n=Fr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Id(t,e.type,n):e.hasOwnProperty("defaultValue")&&Id(t,e.type,Fr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ay(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Id(t,e,n){(e!=="number"||lu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var To=Array.isArray;function hs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Fr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function xd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ly(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(To(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fr(n)}}function V_(t,e){var n=Fr(e.value),r=Fr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function uy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function M_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ad(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?M_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var cl,F_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(cl=cl||document.createElement("div"),cl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Po={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},WI=["Webkit","ms","Moz","O"];Object.keys(Po).forEach(function(t){WI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Po[e]=Po[t]})});function U_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Po.hasOwnProperty(t)&&Po[t]?(""+e).trim():e+"px"}function z_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=U_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var QI=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cd(t,e){if(e){if(QI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Rd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kd=null;function op(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Nd=null,ds=null,fs=null;function cy(t){if(t=Ia(t)){if(typeof Nd!="function")throw Error($(280));var e=t.stateNode;e&&(e=dc(e),Nd(t.stateNode,t.type,e))}}function B_(t){ds?fs?fs.push(t):fs=[t]:ds=t}function j_(){if(ds){var t=ds,e=fs;if(fs=ds=null,cy(t),e)for(t=0;t<e.length;t++)cy(e[t])}}function $_(t,e){return t(e)}function q_(){}var Ch=!1;function H_(t,e,n){if(Ch)return t(e,n);Ch=!0;try{return $_(t,e,n)}finally{Ch=!1,(ds!==null||fs!==null)&&(q_(),j_())}}function Ko(t,e){var n=t.stateNode;if(n===null)return null;var r=dc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var Pd=!1;if(Xn)try{var lo={};Object.defineProperty(lo,"passive",{get:function(){Pd=!0}}),window.addEventListener("test",lo,lo),window.removeEventListener("test",lo,lo)}catch{Pd=!1}function KI(t,e,n,r,i,s,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var bo=!1,uu=null,cu=!1,bd=null,GI={onError:function(t){bo=!0,uu=t}};function JI(t,e,n,r,i,s,o,l,u){bo=!1,uu=null,KI.apply(GI,arguments)}function XI(t,e,n,r,i,s,o,l,u){if(JI.apply(this,arguments),bo){if(bo){var c=uu;bo=!1,uu=null}else throw Error($(198));cu||(cu=!0,bd=c)}}function Pi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function W_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hy(t){if(Pi(t)!==t)throw Error($(188))}function YI(t){var e=t.alternate;if(!e){if(e=Pi(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return hy(i),t;if(s===r)return hy(i),e;s=s.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function Q_(t){return t=YI(t),t!==null?K_(t):null}function K_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=K_(t);if(e!==null)return e;t=t.sibling}return null}var G_=Ht.unstable_scheduleCallback,dy=Ht.unstable_cancelCallback,ZI=Ht.unstable_shouldYield,ex=Ht.unstable_requestPaint,Fe=Ht.unstable_now,tx=Ht.unstable_getCurrentPriorityLevel,ap=Ht.unstable_ImmediatePriority,J_=Ht.unstable_UserBlockingPriority,hu=Ht.unstable_NormalPriority,nx=Ht.unstable_LowPriority,X_=Ht.unstable_IdlePriority,lc=null,In=null;function rx(t){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(lc,t,void 0,(t.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:ox,ix=Math.log,sx=Math.LN2;function ox(t){return t>>>=0,t===0?32:31-(ix(t)/sx|0)|0}var hl=64,dl=4194304;function So(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function du(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=So(l):(s&=o,s!==0&&(r=So(s)))}else o=n&~i,o!==0?r=So(o):s!==0&&(r=So(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-hn(e),i=1<<n,r|=t[n],e&=~i;return r}function ax(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-hn(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=ax(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Dd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Y_(){var t=hl;return hl<<=1,!(hl&4194240)&&(hl=64),t}function Rh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ta(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-hn(e),t[e]=n}function ux(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-hn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function lp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-hn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ye=0;function Z_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ew,up,tw,nw,rw,Od=!1,fl=[],Ir=null,xr=null,Ar=null,Go=new Map,Jo=new Map,pr=[],cx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fy(t,e){switch(t){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":Ar=null;break;case"pointerover":case"pointerout":Go.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jo.delete(e.pointerId)}}function uo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ia(e),e!==null&&up(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function hx(t,e,n,r,i){switch(e){case"focusin":return Ir=uo(Ir,t,e,n,r,i),!0;case"dragenter":return xr=uo(xr,t,e,n,r,i),!0;case"mouseover":return Ar=uo(Ar,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Go.set(s,uo(Go.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Jo.set(s,uo(Jo.get(s)||null,t,e,n,r,i)),!0}return!1}function iw(t){var e=ui(t.target);if(e!==null){var n=Pi(e);if(n!==null){if(e=n.tag,e===13){if(e=W_(n),e!==null){t.blockedOn=e,rw(t.priority,function(){tw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ld(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);kd=r,n.target.dispatchEvent(r),kd=null}else return e=Ia(n),e!==null&&up(e),t.blockedOn=n,!1;e.shift()}return!0}function py(t,e,n){Vl(t)&&n.delete(e)}function dx(){Od=!1,Ir!==null&&Vl(Ir)&&(Ir=null),xr!==null&&Vl(xr)&&(xr=null),Ar!==null&&Vl(Ar)&&(Ar=null),Go.forEach(py),Jo.forEach(py)}function co(t,e){t.blockedOn===e&&(t.blockedOn=null,Od||(Od=!0,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,dx)))}function Xo(t){function e(i){return co(i,t)}if(0<fl.length){co(fl[0],t);for(var n=1;n<fl.length;n++){var r=fl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ir!==null&&co(Ir,t),xr!==null&&co(xr,t),Ar!==null&&co(Ar,t),Go.forEach(e),Jo.forEach(e),n=0;n<pr.length;n++)r=pr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<pr.length&&(n=pr[0],n.blockedOn===null);)iw(n),n.blockedOn===null&&pr.shift()}var ps=sr.ReactCurrentBatchConfig,fu=!0;function fx(t,e,n,r){var i=ye,s=ps.transition;ps.transition=null;try{ye=1,cp(t,e,n,r)}finally{ye=i,ps.transition=s}}function px(t,e,n,r){var i=ye,s=ps.transition;ps.transition=null;try{ye=4,cp(t,e,n,r)}finally{ye=i,ps.transition=s}}function cp(t,e,n,r){if(fu){var i=Ld(t,e,n,r);if(i===null)Fh(t,e,r,pu,n),fy(t,r);else if(hx(i,t,e,n,r))r.stopPropagation();else if(fy(t,r),e&4&&-1<cx.indexOf(t)){for(;i!==null;){var s=Ia(i);if(s!==null&&ew(s),s=Ld(t,e,n,r),s===null&&Fh(t,e,r,pu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Fh(t,e,r,null,n)}}var pu=null;function Ld(t,e,n,r){if(pu=null,t=op(r),t=ui(t),t!==null)if(e=Pi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=W_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return pu=t,null}function sw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tx()){case ap:return 1;case J_:return 4;case hu:case nx:return 16;case X_:return 536870912;default:return 16}default:return 16}}var wr=null,hp=null,Ml=null;function ow(){if(Ml)return Ml;var t,e=hp,n=e.length,r,i="value"in wr?wr.value:wr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ml=i.slice(t,1<r?1-r:void 0)}function Fl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pl(){return!0}function my(){return!1}function Qt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?pl:my,this.isPropagationStopped=my,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pl)},persist:function(){},isPersistent:pl}),e}var Vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dp=Qt(Vs),Sa=Ne({},Vs,{view:0,detail:0}),mx=Qt(Sa),kh,Nh,ho,uc=Ne({},Sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ho&&(ho&&t.type==="mousemove"?(kh=t.screenX-ho.screenX,Nh=t.screenY-ho.screenY):Nh=kh=0,ho=t),kh)},movementY:function(t){return"movementY"in t?t.movementY:Nh}}),gy=Qt(uc),gx=Ne({},uc,{dataTransfer:0}),yx=Qt(gx),vx=Ne({},Sa,{relatedTarget:0}),Ph=Qt(vx),_x=Ne({},Vs,{animationName:0,elapsedTime:0,pseudoElement:0}),wx=Qt(_x),Ex=Ne({},Vs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Tx=Qt(Ex),Sx=Ne({},Vs,{data:0}),yy=Qt(Sx),Ix={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ax={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ax[t])?!!e[t]:!1}function fp(){return Cx}var Rx=Ne({},Sa,{key:function(t){if(t.key){var e=Ix[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Fl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fp,charCode:function(t){return t.type==="keypress"?Fl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),kx=Qt(Rx),Nx=Ne({},uc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vy=Qt(Nx),Px=Ne({},Sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fp}),bx=Qt(Px),Dx=Ne({},Vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ox=Qt(Dx),Lx=Ne({},uc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Vx=Qt(Lx),Mx=[9,13,27,32],pp=Xn&&"CompositionEvent"in window,Do=null;Xn&&"documentMode"in document&&(Do=document.documentMode);var Fx=Xn&&"TextEvent"in window&&!Do,aw=Xn&&(!pp||Do&&8<Do&&11>=Do),_y=String.fromCharCode(32),wy=!1;function lw(t,e){switch(t){case"keyup":return Mx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var es=!1;function Ux(t,e){switch(t){case"compositionend":return uw(e);case"keypress":return e.which!==32?null:(wy=!0,_y);case"textInput":return t=e.data,t===_y&&wy?null:t;default:return null}}function zx(t,e){if(es)return t==="compositionend"||!pp&&lw(t,e)?(t=ow(),Ml=hp=wr=null,es=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return aw&&e.locale!=="ko"?null:e.data;default:return null}}var Bx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ey(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Bx[t.type]:e==="textarea"}function cw(t,e,n,r){B_(r),e=mu(e,"onChange"),0<e.length&&(n=new dp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Oo=null,Yo=null;function jx(t){Ew(t,0)}function cc(t){var e=rs(t);if(O_(e))return t}function $x(t,e){if(t==="change")return e}var hw=!1;if(Xn){var bh;if(Xn){var Dh="oninput"in document;if(!Dh){var Ty=document.createElement("div");Ty.setAttribute("oninput","return;"),Dh=typeof Ty.oninput=="function"}bh=Dh}else bh=!1;hw=bh&&(!document.documentMode||9<document.documentMode)}function Sy(){Oo&&(Oo.detachEvent("onpropertychange",dw),Yo=Oo=null)}function dw(t){if(t.propertyName==="value"&&cc(Yo)){var e=[];cw(e,Yo,t,op(t)),H_(jx,e)}}function qx(t,e,n){t==="focusin"?(Sy(),Oo=e,Yo=n,Oo.attachEvent("onpropertychange",dw)):t==="focusout"&&Sy()}function Hx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cc(Yo)}function Wx(t,e){if(t==="click")return cc(e)}function Qx(t,e){if(t==="input"||t==="change")return cc(e)}function Kx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pn=typeof Object.is=="function"?Object.is:Kx;function Zo(t,e){if(pn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!yd.call(e,i)||!pn(t[i],e[i]))return!1}return!0}function Iy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xy(t,e){var n=Iy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Iy(n)}}function fw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?fw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function pw(){for(var t=window,e=lu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=lu(t.document)}return e}function mp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Gx(t){var e=pw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&fw(n.ownerDocument.documentElement,n)){if(r!==null&&mp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=xy(n,s);var o=xy(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Jx=Xn&&"documentMode"in document&&11>=document.documentMode,ts=null,Vd=null,Lo=null,Md=!1;function Ay(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Md||ts==null||ts!==lu(r)||(r=ts,"selectionStart"in r&&mp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Lo&&Zo(Lo,r)||(Lo=r,r=mu(Vd,"onSelect"),0<r.length&&(e=new dp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ts)))}function ml(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ns={animationend:ml("Animation","AnimationEnd"),animationiteration:ml("Animation","AnimationIteration"),animationstart:ml("Animation","AnimationStart"),transitionend:ml("Transition","TransitionEnd")},Oh={},mw={};Xn&&(mw=document.createElement("div").style,"AnimationEvent"in window||(delete ns.animationend.animation,delete ns.animationiteration.animation,delete ns.animationstart.animation),"TransitionEvent"in window||delete ns.transitionend.transition);function hc(t){if(Oh[t])return Oh[t];if(!ns[t])return t;var e=ns[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in mw)return Oh[t]=e[n];return t}var gw=hc("animationend"),yw=hc("animationiteration"),vw=hc("animationstart"),_w=hc("transitionend"),ww=new Map,Cy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qr(t,e){ww.set(t,e),Ni(e,[t])}for(var Lh=0;Lh<Cy.length;Lh++){var Vh=Cy[Lh],Xx=Vh.toLowerCase(),Yx=Vh[0].toUpperCase()+Vh.slice(1);Qr(Xx,"on"+Yx)}Qr(gw,"onAnimationEnd");Qr(yw,"onAnimationIteration");Qr(vw,"onAnimationStart");Qr("dblclick","onDoubleClick");Qr("focusin","onFocus");Qr("focusout","onBlur");Qr(_w,"onTransitionEnd");Es("onMouseEnter",["mouseout","mouseover"]);Es("onMouseLeave",["mouseout","mouseover"]);Es("onPointerEnter",["pointerout","pointerover"]);Es("onPointerLeave",["pointerout","pointerover"]);Ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ni("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Io));function Ry(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,XI(r,e,void 0,t),t.currentTarget=null}function Ew(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;Ry(i,l,c),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;Ry(i,l,c),s=u}}}if(cu)throw t=bd,cu=!1,bd=null,t}function Ie(t,e){var n=e[jd];n===void 0&&(n=e[jd]=new Set);var r=t+"__bubble";n.has(r)||(Tw(e,t,2,!1),n.add(r))}function Mh(t,e,n){var r=0;e&&(r|=4),Tw(n,t,r,e)}var gl="_reactListening"+Math.random().toString(36).slice(2);function ea(t){if(!t[gl]){t[gl]=!0,k_.forEach(function(n){n!=="selectionchange"&&(Zx.has(n)||Mh(n,!1,t),Mh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gl]||(e[gl]=!0,Mh("selectionchange",!1,e))}}function Tw(t,e,n,r){switch(sw(e)){case 1:var i=fx;break;case 4:i=px;break;default:i=cp}n=i.bind(null,e,n,t),i=void 0,!Pd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Fh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=ui(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}H_(function(){var c=s,d=op(n),p=[];e:{var m=ww.get(t);if(m!==void 0){var x=dp,A=t;switch(t){case"keypress":if(Fl(n)===0)break e;case"keydown":case"keyup":x=kx;break;case"focusin":A="focus",x=Ph;break;case"focusout":A="blur",x=Ph;break;case"beforeblur":case"afterblur":x=Ph;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=gy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=yx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=bx;break;case gw:case yw:case vw:x=wx;break;case _w:x=Ox;break;case"scroll":x=mx;break;case"wheel":x=Vx;break;case"copy":case"cut":case"paste":x=Tx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=vy}var R=(e&4)!==0,I=!R&&t==="scroll",E=R?m!==null?m+"Capture":null:m;R=[];for(var _=c,C;_!==null;){C=_;var L=C.stateNode;if(C.tag===5&&L!==null&&(C=L,E!==null&&(L=Ko(_,E),L!=null&&R.push(ta(_,L,C)))),I)break;_=_.return}0<R.length&&(m=new x(m,A,null,n,d),p.push({event:m,listeners:R}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",m&&n!==kd&&(A=n.relatedTarget||n.fromElement)&&(ui(A)||A[Yn]))break e;if((x||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,x?(A=n.relatedTarget||n.toElement,x=c,A=A?ui(A):null,A!==null&&(I=Pi(A),A!==I||A.tag!==5&&A.tag!==6)&&(A=null)):(x=null,A=c),x!==A)){if(R=gy,L="onMouseLeave",E="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(R=vy,L="onPointerLeave",E="onPointerEnter",_="pointer"),I=x==null?m:rs(x),C=A==null?m:rs(A),m=new R(L,_+"leave",x,n,d),m.target=I,m.relatedTarget=C,L=null,ui(d)===c&&(R=new R(E,_+"enter",A,n,d),R.target=C,R.relatedTarget=I,L=R),I=L,x&&A)t:{for(R=x,E=A,_=0,C=R;C;C=qi(C))_++;for(C=0,L=E;L;L=qi(L))C++;for(;0<_-C;)R=qi(R),_--;for(;0<C-_;)E=qi(E),C--;for(;_--;){if(R===E||E!==null&&R===E.alternate)break t;R=qi(R),E=qi(E)}R=null}else R=null;x!==null&&ky(p,m,x,R,!1),A!==null&&I!==null&&ky(p,I,A,R,!0)}}e:{if(m=c?rs(c):window,x=m.nodeName&&m.nodeName.toLowerCase(),x==="select"||x==="input"&&m.type==="file")var O=$x;else if(Ey(m))if(hw)O=Qx;else{O=Hx;var z=qx}else(x=m.nodeName)&&x.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(O=Wx);if(O&&(O=O(t,c))){cw(p,O,n,d);break e}z&&z(t,m,c),t==="focusout"&&(z=m._wrapperState)&&z.controlled&&m.type==="number"&&Id(m,"number",m.value)}switch(z=c?rs(c):window,t){case"focusin":(Ey(z)||z.contentEditable==="true")&&(ts=z,Vd=c,Lo=null);break;case"focusout":Lo=Vd=ts=null;break;case"mousedown":Md=!0;break;case"contextmenu":case"mouseup":case"dragend":Md=!1,Ay(p,n,d);break;case"selectionchange":if(Jx)break;case"keydown":case"keyup":Ay(p,n,d)}var w;if(pp)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else es?lw(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(aw&&n.locale!=="ko"&&(es||y!=="onCompositionStart"?y==="onCompositionEnd"&&es&&(w=ow()):(wr=d,hp="value"in wr?wr.value:wr.textContent,es=!0)),z=mu(c,y),0<z.length&&(y=new yy(y,t,null,n,d),p.push({event:y,listeners:z}),w?y.data=w:(w=uw(n),w!==null&&(y.data=w)))),(w=Fx?Ux(t,n):zx(t,n))&&(c=mu(c,"onBeforeInput"),0<c.length&&(d=new yy("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:c}),d.data=w))}Ew(p,e)})}function ta(t,e,n){return{instance:t,listener:e,currentTarget:n}}function mu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ko(t,n),s!=null&&r.unshift(ta(t,s,i)),s=Ko(t,e),s!=null&&r.push(ta(t,s,i))),t=t.return}return r}function qi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ky(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=Ko(n,s),u!=null&&o.unshift(ta(n,u,l))):i||(u=Ko(n,s),u!=null&&o.push(ta(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var eA=/\r\n?/g,tA=/\u0000|\uFFFD/g;function Ny(t){return(typeof t=="string"?t:""+t).replace(eA,`
`).replace(tA,"")}function yl(t,e,n){if(e=Ny(e),Ny(t)!==e&&n)throw Error($(425))}function gu(){}var Fd=null,Ud=null;function zd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bd=typeof setTimeout=="function"?setTimeout:void 0,nA=typeof clearTimeout=="function"?clearTimeout:void 0,Py=typeof Promise=="function"?Promise:void 0,rA=typeof queueMicrotask=="function"?queueMicrotask:typeof Py<"u"?function(t){return Py.resolve(null).then(t).catch(iA)}:Bd;function iA(t){setTimeout(function(){throw t})}function Uh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Xo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Xo(e)}function Cr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function by(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ms=Math.random().toString(36).slice(2),Sn="__reactFiber$"+Ms,na="__reactProps$"+Ms,Yn="__reactContainer$"+Ms,jd="__reactEvents$"+Ms,sA="__reactListeners$"+Ms,oA="__reactHandles$"+Ms;function ui(t){var e=t[Sn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Yn]||n[Sn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=by(t);t!==null;){if(n=t[Sn])return n;t=by(t)}return e}t=n,n=t.parentNode}return null}function Ia(t){return t=t[Sn]||t[Yn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function rs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function dc(t){return t[na]||null}var $d=[],is=-1;function Kr(t){return{current:t}}function xe(t){0>is||(t.current=$d[is],$d[is]=null,is--)}function Te(t,e){is++,$d[is]=t.current,t.current=e}var Ur={},gt=Kr(Ur),Ot=Kr(!1),vi=Ur;function Ts(t,e){var n=t.type.contextTypes;if(!n)return Ur;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Lt(t){return t=t.childContextTypes,t!=null}function yu(){xe(Ot),xe(gt)}function Dy(t,e,n){if(gt.current!==Ur)throw Error($(168));Te(gt,e),Te(Ot,n)}function Sw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,qI(t)||"Unknown",i));return Ne({},n,r)}function vu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ur,vi=gt.current,Te(gt,t),Te(Ot,Ot.current),!0}function Oy(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=Sw(t,e,vi),r.__reactInternalMemoizedMergedChildContext=t,xe(Ot),xe(gt),Te(gt,t)):xe(Ot),Te(Ot,n)}var Bn=null,fc=!1,zh=!1;function Iw(t){Bn===null?Bn=[t]:Bn.push(t)}function aA(t){fc=!0,Iw(t)}function Gr(){if(!zh&&Bn!==null){zh=!0;var t=0,e=ye;try{var n=Bn;for(ye=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Bn=null,fc=!1}catch(i){throw Bn!==null&&(Bn=Bn.slice(t+1)),G_(ap,Gr),i}finally{ye=e,zh=!1}}return null}var ss=[],os=0,_u=null,wu=0,Gt=[],Jt=0,_i=null,$n=1,qn="";function oi(t,e){ss[os++]=wu,ss[os++]=_u,_u=t,wu=e}function xw(t,e,n){Gt[Jt++]=$n,Gt[Jt++]=qn,Gt[Jt++]=_i,_i=t;var r=$n;t=qn;var i=32-hn(r)-1;r&=~(1<<i),n+=1;var s=32-hn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$n=1<<32-hn(e)+i|n<<i|r,qn=s+t}else $n=1<<s|n<<i|r,qn=t}function gp(t){t.return!==null&&(oi(t,1),xw(t,1,0))}function yp(t){for(;t===_u;)_u=ss[--os],ss[os]=null,wu=ss[--os],ss[os]=null;for(;t===_i;)_i=Gt[--Jt],Gt[Jt]=null,qn=Gt[--Jt],Gt[Jt]=null,$n=Gt[--Jt],Gt[Jt]=null}var qt=null,jt=null,Ce=!1,an=null;function Aw(t,e){var n=Yt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ly(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qt=t,jt=Cr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qt=t,jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=_i!==null?{id:$n,overflow:qn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qt=t,jt=null,!0):!1;default:return!1}}function qd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hd(t){if(Ce){var e=jt;if(e){var n=e;if(!Ly(t,e)){if(qd(t))throw Error($(418));e=Cr(n.nextSibling);var r=qt;e&&Ly(t,e)?Aw(r,n):(t.flags=t.flags&-4097|2,Ce=!1,qt=t)}}else{if(qd(t))throw Error($(418));t.flags=t.flags&-4097|2,Ce=!1,qt=t}}}function Vy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qt=t}function vl(t){if(t!==qt)return!1;if(!Ce)return Vy(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zd(t.type,t.memoizedProps)),e&&(e=jt)){if(qd(t))throw Cw(),Error($(418));for(;e;)Aw(t,e),e=Cr(e.nextSibling)}if(Vy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){jt=Cr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}jt=null}}else jt=qt?Cr(t.stateNode.nextSibling):null;return!0}function Cw(){for(var t=jt;t;)t=Cr(t.nextSibling)}function Ss(){jt=qt=null,Ce=!1}function vp(t){an===null?an=[t]:an.push(t)}var lA=sr.ReactCurrentBatchConfig;function fo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function _l(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function My(t){var e=t._init;return e(t._payload)}function Rw(t){function e(E,_){if(t){var C=E.deletions;C===null?(E.deletions=[_],E.flags|=16):C.push(_)}}function n(E,_){if(!t)return null;for(;_!==null;)e(E,_),_=_.sibling;return null}function r(E,_){for(E=new Map;_!==null;)_.key!==null?E.set(_.key,_):E.set(_.index,_),_=_.sibling;return E}function i(E,_){return E=Pr(E,_),E.index=0,E.sibling=null,E}function s(E,_,C){return E.index=C,t?(C=E.alternate,C!==null?(C=C.index,C<_?(E.flags|=2,_):C):(E.flags|=2,_)):(E.flags|=1048576,_)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,_,C,L){return _===null||_.tag!==6?(_=Qh(C,E.mode,L),_.return=E,_):(_=i(_,C),_.return=E,_)}function u(E,_,C,L){var O=C.type;return O===Zi?d(E,_,C.props.children,L,C.key):_!==null&&(_.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===dr&&My(O)===_.type)?(L=i(_,C.props),L.ref=fo(E,_,C),L.return=E,L):(L=Hl(C.type,C.key,C.props,null,E.mode,L),L.ref=fo(E,_,C),L.return=E,L)}function c(E,_,C,L){return _===null||_.tag!==4||_.stateNode.containerInfo!==C.containerInfo||_.stateNode.implementation!==C.implementation?(_=Kh(C,E.mode,L),_.return=E,_):(_=i(_,C.children||[]),_.return=E,_)}function d(E,_,C,L,O){return _===null||_.tag!==7?(_=mi(C,E.mode,L,O),_.return=E,_):(_=i(_,C),_.return=E,_)}function p(E,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Qh(""+_,E.mode,C),_.return=E,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ll:return C=Hl(_.type,_.key,_.props,null,E.mode,C),C.ref=fo(E,null,_),C.return=E,C;case Yi:return _=Kh(_,E.mode,C),_.return=E,_;case dr:var L=_._init;return p(E,L(_._payload),C)}if(To(_)||ao(_))return _=mi(_,E.mode,C,null),_.return=E,_;_l(E,_)}return null}function m(E,_,C,L){var O=_!==null?_.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return O!==null?null:l(E,_,""+C,L);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ll:return C.key===O?u(E,_,C,L):null;case Yi:return C.key===O?c(E,_,C,L):null;case dr:return O=C._init,m(E,_,O(C._payload),L)}if(To(C)||ao(C))return O!==null?null:d(E,_,C,L,null);_l(E,C)}return null}function x(E,_,C,L,O){if(typeof L=="string"&&L!==""||typeof L=="number")return E=E.get(C)||null,l(_,E,""+L,O);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case ll:return E=E.get(L.key===null?C:L.key)||null,u(_,E,L,O);case Yi:return E=E.get(L.key===null?C:L.key)||null,c(_,E,L,O);case dr:var z=L._init;return x(E,_,C,z(L._payload),O)}if(To(L)||ao(L))return E=E.get(C)||null,d(_,E,L,O,null);_l(_,L)}return null}function A(E,_,C,L){for(var O=null,z=null,w=_,y=_=0,T=null;w!==null&&y<C.length;y++){w.index>y?(T=w,w=null):T=w.sibling;var k=m(E,w,C[y],L);if(k===null){w===null&&(w=T);break}t&&w&&k.alternate===null&&e(E,w),_=s(k,_,y),z===null?O=k:z.sibling=k,z=k,w=T}if(y===C.length)return n(E,w),Ce&&oi(E,y),O;if(w===null){for(;y<C.length;y++)w=p(E,C[y],L),w!==null&&(_=s(w,_,y),z===null?O=w:z.sibling=w,z=w);return Ce&&oi(E,y),O}for(w=r(E,w);y<C.length;y++)T=x(w,E,y,C[y],L),T!==null&&(t&&T.alternate!==null&&w.delete(T.key===null?y:T.key),_=s(T,_,y),z===null?O=T:z.sibling=T,z=T);return t&&w.forEach(function(S){return e(E,S)}),Ce&&oi(E,y),O}function R(E,_,C,L){var O=ao(C);if(typeof O!="function")throw Error($(150));if(C=O.call(C),C==null)throw Error($(151));for(var z=O=null,w=_,y=_=0,T=null,k=C.next();w!==null&&!k.done;y++,k=C.next()){w.index>y?(T=w,w=null):T=w.sibling;var S=m(E,w,k.value,L);if(S===null){w===null&&(w=T);break}t&&w&&S.alternate===null&&e(E,w),_=s(S,_,y),z===null?O=S:z.sibling=S,z=S,w=T}if(k.done)return n(E,w),Ce&&oi(E,y),O;if(w===null){for(;!k.done;y++,k=C.next())k=p(E,k.value,L),k!==null&&(_=s(k,_,y),z===null?O=k:z.sibling=k,z=k);return Ce&&oi(E,y),O}for(w=r(E,w);!k.done;y++,k=C.next())k=x(w,E,y,k.value,L),k!==null&&(t&&k.alternate!==null&&w.delete(k.key===null?y:k.key),_=s(k,_,y),z===null?O=k:z.sibling=k,z=k);return t&&w.forEach(function(b){return e(E,b)}),Ce&&oi(E,y),O}function I(E,_,C,L){if(typeof C=="object"&&C!==null&&C.type===Zi&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case ll:e:{for(var O=C.key,z=_;z!==null;){if(z.key===O){if(O=C.type,O===Zi){if(z.tag===7){n(E,z.sibling),_=i(z,C.props.children),_.return=E,E=_;break e}}else if(z.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===dr&&My(O)===z.type){n(E,z.sibling),_=i(z,C.props),_.ref=fo(E,z,C),_.return=E,E=_;break e}n(E,z);break}else e(E,z);z=z.sibling}C.type===Zi?(_=mi(C.props.children,E.mode,L,C.key),_.return=E,E=_):(L=Hl(C.type,C.key,C.props,null,E.mode,L),L.ref=fo(E,_,C),L.return=E,E=L)}return o(E);case Yi:e:{for(z=C.key;_!==null;){if(_.key===z)if(_.tag===4&&_.stateNode.containerInfo===C.containerInfo&&_.stateNode.implementation===C.implementation){n(E,_.sibling),_=i(_,C.children||[]),_.return=E,E=_;break e}else{n(E,_);break}else e(E,_);_=_.sibling}_=Kh(C,E.mode,L),_.return=E,E=_}return o(E);case dr:return z=C._init,I(E,_,z(C._payload),L)}if(To(C))return A(E,_,C,L);if(ao(C))return R(E,_,C,L);_l(E,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,_!==null&&_.tag===6?(n(E,_.sibling),_=i(_,C),_.return=E,E=_):(n(E,_),_=Qh(C,E.mode,L),_.return=E,E=_),o(E)):n(E,_)}return I}var Is=Rw(!0),kw=Rw(!1),Eu=Kr(null),Tu=null,as=null,_p=null;function wp(){_p=as=Tu=null}function Ep(t){var e=Eu.current;xe(Eu),t._currentValue=e}function Wd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ms(t,e){Tu=t,_p=as=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Dt=!0),t.firstContext=null)}function en(t){var e=t._currentValue;if(_p!==t)if(t={context:t,memoizedValue:e,next:null},as===null){if(Tu===null)throw Error($(308));as=t,Tu.dependencies={lanes:0,firstContext:t}}else as=as.next=t;return e}var ci=null;function Tp(t){ci===null?ci=[t]:ci.push(t)}function Nw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Tp(e)):(n.next=i.next,i.next=n),e.interleaved=n,Zn(t,r)}function Zn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fr=!1;function Sp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Rr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Zn(t,n)}return i=r.interleaved,i===null?(e.next=e,Tp(r)):(e.next=i.next,i.next=e),r.interleaved=e,Zn(t,n)}function Ul(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lp(t,n)}}function Fy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Su(t,e,n,r){var i=t.updateQueue;fr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(s!==null){var p=i.baseState;o=0,d=c=u=null,l=s;do{var m=l.lane,x=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var A=t,R=l;switch(m=e,x=n,R.tag){case 1:if(A=R.payload,typeof A=="function"){p=A.call(x,p,m);break e}p=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=R.payload,m=typeof A=="function"?A.call(x,p,m):A,m==null)break e;p=Ne({},p,m);break e;case 2:fr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else x={eventTime:x,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=x,u=p):d=d.next=x,o|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(d===null&&(u=p),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ei|=o,t.lanes=o,t.memoizedState=p}}function Uy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var xa={},xn=Kr(xa),ra=Kr(xa),ia=Kr(xa);function hi(t){if(t===xa)throw Error($(174));return t}function Ip(t,e){switch(Te(ia,e),Te(ra,t),Te(xn,xa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ad(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ad(e,t)}xe(xn),Te(xn,e)}function xs(){xe(xn),xe(ra),xe(ia)}function bw(t){hi(ia.current);var e=hi(xn.current),n=Ad(e,t.type);e!==n&&(Te(ra,t),Te(xn,n))}function xp(t){ra.current===t&&(xe(xn),xe(ra))}var Re=Kr(0);function Iu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Bh=[];function Ap(){for(var t=0;t<Bh.length;t++)Bh[t]._workInProgressVersionPrimary=null;Bh.length=0}var zl=sr.ReactCurrentDispatcher,jh=sr.ReactCurrentBatchConfig,wi=0,ke=null,We=null,Je=null,xu=!1,Vo=!1,sa=0,uA=0;function ut(){throw Error($(321))}function Cp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!pn(t[n],e[n]))return!1;return!0}function Rp(t,e,n,r,i,s){if(wi=s,ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zl.current=t===null||t.memoizedState===null?fA:pA,t=n(r,i),Vo){s=0;do{if(Vo=!1,sa=0,25<=s)throw Error($(301));s+=1,Je=We=null,e.updateQueue=null,zl.current=mA,t=n(r,i)}while(Vo)}if(zl.current=Au,e=We!==null&&We.next!==null,wi=0,Je=We=ke=null,xu=!1,e)throw Error($(300));return t}function kp(){var t=sa!==0;return sa=0,t}function En(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?ke.memoizedState=Je=t:Je=Je.next=t,Je}function tn(){if(We===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=Je===null?ke.memoizedState:Je.next;if(e!==null)Je=e,We=t;else{if(t===null)throw Error($(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Je===null?ke.memoizedState=Je=t:Je=Je.next=t}return Je}function oa(t,e){return typeof e=="function"?e(t):e}function $h(t){var e=tn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=We,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,c=s;do{var d=c.lane;if((wi&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,ke.lanes|=d,Ei|=d}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=l,pn(r,e.memoizedState)||(Dt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ke.lanes|=s,Ei|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qh(t){var e=tn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);pn(s,e.memoizedState)||(Dt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Dw(){}function Ow(t,e){var n=ke,r=tn(),i=e(),s=!pn(r.memoizedState,i);if(s&&(r.memoizedState=i,Dt=!0),r=r.queue,Np(Mw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,aa(9,Vw.bind(null,n,r,i,e),void 0,null),Xe===null)throw Error($(349));wi&30||Lw(n,e,i)}return i}function Lw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Vw(t,e,n,r){e.value=n,e.getSnapshot=r,Fw(e)&&Uw(t)}function Mw(t,e,n){return n(function(){Fw(e)&&Uw(t)})}function Fw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!pn(t,n)}catch{return!0}}function Uw(t){var e=Zn(t,1);e!==null&&dn(e,t,1,-1)}function zy(t){var e=En();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:t},e.queue=t,t=t.dispatch=dA.bind(null,ke,t),[e.memoizedState,t]}function aa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function zw(){return tn().memoizedState}function Bl(t,e,n,r){var i=En();ke.flags|=t,i.memoizedState=aa(1|e,n,void 0,r===void 0?null:r)}function pc(t,e,n,r){var i=tn();r=r===void 0?null:r;var s=void 0;if(We!==null){var o=We.memoizedState;if(s=o.destroy,r!==null&&Cp(r,o.deps)){i.memoizedState=aa(e,n,s,r);return}}ke.flags|=t,i.memoizedState=aa(1|e,n,s,r)}function By(t,e){return Bl(8390656,8,t,e)}function Np(t,e){return pc(2048,8,t,e)}function Bw(t,e){return pc(4,2,t,e)}function jw(t,e){return pc(4,4,t,e)}function $w(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function qw(t,e,n){return n=n!=null?n.concat([t]):null,pc(4,4,$w.bind(null,e,t),n)}function Pp(){}function Hw(t,e){var n=tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ww(t,e){var n=tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Qw(t,e,n){return wi&21?(pn(n,e)||(n=Y_(),ke.lanes|=n,Ei|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Dt=!0),t.memoizedState=n)}function cA(t,e){var n=ye;ye=n!==0&&4>n?n:4,t(!0);var r=jh.transition;jh.transition={};try{t(!1),e()}finally{ye=n,jh.transition=r}}function Kw(){return tn().memoizedState}function hA(t,e,n){var r=Nr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Gw(t))Jw(e,n);else if(n=Nw(t,e,n,r),n!==null){var i=St();dn(n,t,r,i),Xw(n,e,r)}}function dA(t,e,n){var r=Nr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gw(t))Jw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,pn(l,o)){var u=e.interleaved;u===null?(i.next=i,Tp(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Nw(t,e,i,r),n!==null&&(i=St(),dn(n,t,r,i),Xw(n,e,r))}}function Gw(t){var e=t.alternate;return t===ke||e!==null&&e===ke}function Jw(t,e){Vo=xu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Xw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lp(t,n)}}var Au={readContext:en,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useInsertionEffect:ut,useLayoutEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useMutableSource:ut,useSyncExternalStore:ut,useId:ut,unstable_isNewReconciler:!1},fA={readContext:en,useCallback:function(t,e){return En().memoizedState=[t,e===void 0?null:e],t},useContext:en,useEffect:By,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Bl(4194308,4,$w.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Bl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bl(4,2,t,e)},useMemo:function(t,e){var n=En();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=En();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=hA.bind(null,ke,t),[r.memoizedState,t]},useRef:function(t){var e=En();return t={current:t},e.memoizedState=t},useState:zy,useDebugValue:Pp,useDeferredValue:function(t){return En().memoizedState=t},useTransition:function(){var t=zy(!1),e=t[0];return t=cA.bind(null,t[1]),En().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ke,i=En();if(Ce){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),Xe===null)throw Error($(349));wi&30||Lw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,By(Mw.bind(null,r,s,t),[t]),r.flags|=2048,aa(9,Vw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=En(),e=Xe.identifierPrefix;if(Ce){var n=qn,r=$n;n=(r&~(1<<32-hn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=sa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=uA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},pA={readContext:en,useCallback:Hw,useContext:en,useEffect:Np,useImperativeHandle:qw,useInsertionEffect:Bw,useLayoutEffect:jw,useMemo:Ww,useReducer:$h,useRef:zw,useState:function(){return $h(oa)},useDebugValue:Pp,useDeferredValue:function(t){var e=tn();return Qw(e,We.memoizedState,t)},useTransition:function(){var t=$h(oa)[0],e=tn().memoizedState;return[t,e]},useMutableSource:Dw,useSyncExternalStore:Ow,useId:Kw,unstable_isNewReconciler:!1},mA={readContext:en,useCallback:Hw,useContext:en,useEffect:Np,useImperativeHandle:qw,useInsertionEffect:Bw,useLayoutEffect:jw,useMemo:Ww,useReducer:qh,useRef:zw,useState:function(){return qh(oa)},useDebugValue:Pp,useDeferredValue:function(t){var e=tn();return We===null?e.memoizedState=t:Qw(e,We.memoizedState,t)},useTransition:function(){var t=qh(oa)[0],e=tn().memoizedState;return[t,e]},useMutableSource:Dw,useSyncExternalStore:Ow,useId:Kw,unstable_isNewReconciler:!1};function sn(t,e){if(t&&t.defaultProps){e=Ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Qd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var mc={isMounted:function(t){return(t=t._reactInternals)?Pi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=St(),i=Nr(t),s=Qn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Rr(t,s,i),e!==null&&(dn(e,t,i,r),Ul(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=St(),i=Nr(t),s=Qn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Rr(t,s,i),e!==null&&(dn(e,t,i,r),Ul(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=St(),r=Nr(t),i=Qn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Rr(t,i,r),e!==null&&(dn(e,t,r,n),Ul(e,t,r))}};function jy(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Zo(n,r)||!Zo(i,s):!0}function Yw(t,e,n){var r=!1,i=Ur,s=e.contextType;return typeof s=="object"&&s!==null?s=en(s):(i=Lt(e)?vi:gt.current,r=e.contextTypes,s=(r=r!=null)?Ts(t,i):Ur),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=mc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function $y(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&mc.enqueueReplaceState(e,e.state,null)}function Kd(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Sp(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=en(s):(s=Lt(e)?vi:gt.current,i.context=Ts(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Qd(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&mc.enqueueReplaceState(i,i.state,null),Su(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function As(t,e){try{var n="",r=e;do n+=$I(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Hh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Gd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var gA=typeof WeakMap=="function"?WeakMap:Map;function Zw(t,e,n){n=Qn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ru||(Ru=!0,of=r),Gd(t,e)},n}function e1(t,e,n){n=Qn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Gd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Gd(t,e),typeof r!="function"&&(kr===null?kr=new Set([this]):kr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function qy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new gA;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=NA.bind(null,t,e,n),e.then(t,t))}function Hy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Wy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qn(-1,1),e.tag=2,Rr(n,e,1))),n.lanes|=1),t)}var yA=sr.ReactCurrentOwner,Dt=!1;function Et(t,e,n,r){e.child=t===null?kw(e,null,n,r):Is(e,t.child,n,r)}function Qy(t,e,n,r,i){n=n.render;var s=e.ref;return ms(e,i),r=Rp(t,e,n,r,s,i),n=kp(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,er(t,e,i)):(Ce&&n&&gp(e),e.flags|=1,Et(t,e,r,i),e.child)}function Ky(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Up(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,t1(t,e,s,r,i)):(t=Hl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Zo,n(o,r)&&t.ref===e.ref)return er(t,e,i)}return e.flags|=1,t=Pr(s,r),t.ref=e.ref,t.return=e,e.child=t}function t1(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Zo(s,r)&&t.ref===e.ref)if(Dt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Dt=!0);else return e.lanes=t.lanes,er(t,e,i)}return Jd(t,e,n,r,i)}function n1(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(us,Ut),Ut|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(us,Ut),Ut|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Te(us,Ut),Ut|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Te(us,Ut),Ut|=r;return Et(t,e,i,n),e.child}function r1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Jd(t,e,n,r,i){var s=Lt(n)?vi:gt.current;return s=Ts(e,s),ms(e,i),n=Rp(t,e,n,r,s,i),r=kp(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,er(t,e,i)):(Ce&&r&&gp(e),e.flags|=1,Et(t,e,n,i),e.child)}function Gy(t,e,n,r,i){if(Lt(n)){var s=!0;vu(e)}else s=!1;if(ms(e,i),e.stateNode===null)jl(t,e),Yw(e,n,r),Kd(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=en(c):(c=Lt(n)?vi:gt.current,c=Ts(e,c));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&$y(e,o,r,c),fr=!1;var m=e.memoizedState;o.state=m,Su(e,r,o,i),u=e.memoizedState,l!==r||m!==u||Ot.current||fr?(typeof d=="function"&&(Qd(e,n,d,r),u=e.memoizedState),(l=fr||jy(e,n,l,r,m,u,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Pw(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:sn(e.type,l),o.props=c,p=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=en(u):(u=Lt(n)?vi:gt.current,u=Ts(e,u));var x=n.getDerivedStateFromProps;(d=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||m!==u)&&$y(e,o,r,u),fr=!1,m=e.memoizedState,o.state=m,Su(e,r,o,i);var A=e.memoizedState;l!==p||m!==A||Ot.current||fr?(typeof x=="function"&&(Qd(e,n,x,r),A=e.memoizedState),(c=fr||jy(e,n,c,r,m,A,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,A,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,A,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=A),o.props=r,o.state=A,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Xd(t,e,n,r,s,i)}function Xd(t,e,n,r,i,s){r1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Oy(e,n,!1),er(t,e,s);r=e.stateNode,yA.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Is(e,t.child,null,s),e.child=Is(e,null,l,s)):Et(t,e,l,s),e.memoizedState=r.state,i&&Oy(e,n,!0),e.child}function i1(t){var e=t.stateNode;e.pendingContext?Dy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Dy(t,e.context,!1),Ip(t,e.containerInfo)}function Jy(t,e,n,r,i){return Ss(),vp(i),e.flags|=256,Et(t,e,n,r),e.child}var Yd={dehydrated:null,treeContext:null,retryLane:0};function Zd(t){return{baseLanes:t,cachePool:null,transitions:null}}function s1(t,e,n){var r=e.pendingProps,i=Re.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Te(Re,i&1),t===null)return Hd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=vc(o,r,0,null),t=mi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Zd(n),e.memoizedState=Yd,t):bp(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return vA(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Pr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Pr(l,s):(s=mi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Zd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Yd,r}return s=t.child,t=s.sibling,r=Pr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function bp(t,e){return e=vc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function wl(t,e,n,r){return r!==null&&vp(r),Is(e,t.child,null,n),t=bp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vA(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Hh(Error($(422))),wl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=vc({mode:"visible",children:r.children},i,0,null),s=mi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Is(e,t.child,null,o),e.child.memoizedState=Zd(o),e.memoizedState=Yd,s);if(!(e.mode&1))return wl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error($(419)),r=Hh(s,r,void 0),wl(t,e,o,r)}if(l=(o&t.childLanes)!==0,Dt||l){if(r=Xe,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Zn(t,i),dn(r,t,i,-1))}return Fp(),r=Hh(Error($(421))),wl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=PA.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,jt=Cr(i.nextSibling),qt=e,Ce=!0,an=null,t!==null&&(Gt[Jt++]=$n,Gt[Jt++]=qn,Gt[Jt++]=_i,$n=t.id,qn=t.overflow,_i=e),e=bp(e,r.children),e.flags|=4096,e)}function Xy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Wd(t.return,e,n)}function Wh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function o1(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Et(t,e,r.children,n),r=Re.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xy(t,n,e);else if(t.tag===19)Xy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(Re,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Iu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Wh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Iu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Wh(e,!0,n,null,s);break;case"together":Wh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function er(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ei|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Pr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Pr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _A(t,e,n){switch(e.tag){case 3:i1(e),Ss();break;case 5:bw(e);break;case 1:Lt(e.type)&&vu(e);break;case 4:Ip(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Te(Eu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(Re,Re.current&1),e.flags|=128,null):n&e.child.childLanes?s1(t,e,n):(Te(Re,Re.current&1),t=er(t,e,n),t!==null?t.sibling:null);Te(Re,Re.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return o1(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Te(Re,Re.current),r)break;return null;case 22:case 23:return e.lanes=0,n1(t,e,n)}return er(t,e,n)}var a1,ef,l1,u1;a1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ef=function(){};l1=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,hi(xn.current);var s=null;switch(n){case"input":i=Td(t,i),r=Td(t,r),s=[];break;case"select":i=Ne({},i,{value:void 0}),r=Ne({},r,{value:void 0}),s=[];break;case"textarea":i=xd(t,i),r=xd(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=gu)}Cd(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Wo.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Wo.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ie("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};u1=function(t,e,n,r){n!==r&&(e.flags|=4)};function po(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function wA(t,e,n){var r=e.pendingProps;switch(yp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(e),null;case 1:return Lt(e.type)&&yu(),ct(e),null;case 3:return r=e.stateNode,xs(),xe(Ot),xe(gt),Ap(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(vl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,an!==null&&(uf(an),an=null))),ef(t,e),ct(e),null;case 5:xp(e);var i=hi(ia.current);if(n=e.type,t!==null&&e.stateNode!=null)l1(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return ct(e),null}if(t=hi(xn.current),vl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Sn]=e,r[na]=s,t=(e.mode&1)!==0,n){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(i=0;i<Io.length;i++)Ie(Io[i],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":oy(r,s),Ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ie("invalid",r);break;case"textarea":ly(r,s),Ie("invalid",r)}Cd(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&yl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&yl(r.textContent,l,t),i=["children",""+l]):Wo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ie("scroll",r)}switch(n){case"input":ul(r),ay(r,s,!0);break;case"textarea":ul(r),uy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=gu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=M_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Sn]=e,t[na]=r,a1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Rd(n,r),n){case"dialog":Ie("cancel",t),Ie("close",t),i=r;break;case"iframe":case"object":case"embed":Ie("load",t),i=r;break;case"video":case"audio":for(i=0;i<Io.length;i++)Ie(Io[i],t);i=r;break;case"source":Ie("error",t),i=r;break;case"img":case"image":case"link":Ie("error",t),Ie("load",t),i=r;break;case"details":Ie("toggle",t),i=r;break;case"input":oy(t,r),i=Td(t,r),Ie("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ne({},r,{value:void 0}),Ie("invalid",t);break;case"textarea":ly(t,r),i=xd(t,r),Ie("invalid",t);break;default:i=r}Cd(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?z_(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&F_(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Qo(t,u):typeof u=="number"&&Qo(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Wo.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ie("scroll",t):u!=null&&np(t,s,u,o))}switch(n){case"input":ul(t),ay(t,r,!1);break;case"textarea":ul(t),uy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Fr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?hs(t,!!r.multiple,s,!1):r.defaultValue!=null&&hs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=gu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ct(e),null;case 6:if(t&&e.stateNode!=null)u1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=hi(ia.current),hi(xn.current),vl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Sn]=e,(s=r.nodeValue!==n)&&(t=qt,t!==null))switch(t.tag){case 3:yl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sn]=e,e.stateNode=r}return ct(e),null;case 13:if(xe(Re),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&jt!==null&&e.mode&1&&!(e.flags&128))Cw(),Ss(),e.flags|=98560,s=!1;else if(s=vl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[Sn]=e}else Ss(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ct(e),s=!1}else an!==null&&(uf(an),an=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Re.current&1?Qe===0&&(Qe=3):Fp())),e.updateQueue!==null&&(e.flags|=4),ct(e),null);case 4:return xs(),ef(t,e),t===null&&ea(e.stateNode.containerInfo),ct(e),null;case 10:return Ep(e.type._context),ct(e),null;case 17:return Lt(e.type)&&yu(),ct(e),null;case 19:if(xe(Re),s=e.memoizedState,s===null)return ct(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)po(s,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Iu(t),o!==null){for(e.flags|=128,po(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Re,Re.current&1|2),e.child}t=t.sibling}s.tail!==null&&Fe()>Cs&&(e.flags|=128,r=!0,po(s,!1),e.lanes=4194304)}else{if(!r)if(t=Iu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),po(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ce)return ct(e),null}else 2*Fe()-s.renderingStartTime>Cs&&n!==1073741824&&(e.flags|=128,r=!0,po(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Fe(),e.sibling=null,n=Re.current,Te(Re,r?n&1|2:n&1),e):(ct(e),null);case 22:case 23:return Mp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ut&1073741824&&(ct(e),e.subtreeFlags&6&&(e.flags|=8192)):ct(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function EA(t,e){switch(yp(e),e.tag){case 1:return Lt(e.type)&&yu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xs(),xe(Ot),xe(gt),Ap(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xp(e),null;case 13:if(xe(Re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Ss()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xe(Re),null;case 4:return xs(),null;case 10:return Ep(e.type._context),null;case 22:case 23:return Mp(),null;case 24:return null;default:return null}}var El=!1,ft=!1,TA=typeof WeakSet=="function"?WeakSet:Set,K=null;function ls(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Oe(t,e,r)}else n.current=null}function tf(t,e,n){try{n()}catch(r){Oe(t,e,r)}}var Yy=!1;function SA(t,e){if(Fd=fu,t=pw(),mp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,d=0,p=t,m=null;t:for(;;){for(var x;p!==n||i!==0&&p.nodeType!==3||(l=o+i),p!==s||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(x=p.firstChild)!==null;)m=p,p=x;for(;;){if(p===t)break t;if(m===n&&++c===i&&(l=o),m===s&&++d===r&&(u=o),(x=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=x}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ud={focusedElem:t,selectionRange:n},fu=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var R=A.memoizedProps,I=A.memoizedState,E=e.stateNode,_=E.getSnapshotBeforeUpdate(e.elementType===e.type?R:sn(e.type,R),I);E.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(L){Oe(e,e.return,L)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return A=Yy,Yy=!1,A}function Mo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&tf(e,n,s)}i=i.next}while(i!==r)}}function gc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function nf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function c1(t){var e=t.alternate;e!==null&&(t.alternate=null,c1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Sn],delete e[na],delete e[jd],delete e[sA],delete e[oA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function h1(t){return t.tag===5||t.tag===3||t.tag===4}function Zy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||h1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gu));else if(r!==4&&(t=t.child,t!==null))for(rf(t,e,n),t=t.sibling;t!==null;)rf(t,e,n),t=t.sibling}function sf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(sf(t,e,n),t=t.sibling;t!==null;)sf(t,e,n),t=t.sibling}var Ze=null,on=!1;function cr(t,e,n){for(n=n.child;n!==null;)d1(t,e,n),n=n.sibling}function d1(t,e,n){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(lc,n)}catch{}switch(n.tag){case 5:ft||ls(n,e);case 6:var r=Ze,i=on;Ze=null,cr(t,e,n),Ze=r,on=i,Ze!==null&&(on?(t=Ze,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ze.removeChild(n.stateNode));break;case 18:Ze!==null&&(on?(t=Ze,n=n.stateNode,t.nodeType===8?Uh(t.parentNode,n):t.nodeType===1&&Uh(t,n),Xo(t)):Uh(Ze,n.stateNode));break;case 4:r=Ze,i=on,Ze=n.stateNode.containerInfo,on=!0,cr(t,e,n),Ze=r,on=i;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&tf(n,e,o),i=i.next}while(i!==r)}cr(t,e,n);break;case 1:if(!ft&&(ls(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Oe(n,e,l)}cr(t,e,n);break;case 21:cr(t,e,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,cr(t,e,n),ft=r):cr(t,e,n);break;default:cr(t,e,n)}}function e0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new TA),e.forEach(function(r){var i=bA.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function rn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ze=l.stateNode,on=!1;break e;case 3:Ze=l.stateNode.containerInfo,on=!0;break e;case 4:Ze=l.stateNode.containerInfo,on=!0;break e}l=l.return}if(Ze===null)throw Error($(160));d1(s,o,i),Ze=null,on=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){Oe(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)f1(e,t),e=e.sibling}function f1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rn(e,t),vn(t),r&4){try{Mo(3,t,t.return),gc(3,t)}catch(R){Oe(t,t.return,R)}try{Mo(5,t,t.return)}catch(R){Oe(t,t.return,R)}}break;case 1:rn(e,t),vn(t),r&512&&n!==null&&ls(n,n.return);break;case 5:if(rn(e,t),vn(t),r&512&&n!==null&&ls(n,n.return),t.flags&32){var i=t.stateNode;try{Qo(i,"")}catch(R){Oe(t,t.return,R)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&L_(i,s),Rd(l,o);var c=Rd(l,s);for(o=0;o<u.length;o+=2){var d=u[o],p=u[o+1];d==="style"?z_(i,p):d==="dangerouslySetInnerHTML"?F_(i,p):d==="children"?Qo(i,p):np(i,d,p,c)}switch(l){case"input":Sd(i,s);break;case"textarea":V_(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var x=s.value;x!=null?hs(i,!!s.multiple,x,!1):m!==!!s.multiple&&(s.defaultValue!=null?hs(i,!!s.multiple,s.defaultValue,!0):hs(i,!!s.multiple,s.multiple?[]:"",!1))}i[na]=s}catch(R){Oe(t,t.return,R)}}break;case 6:if(rn(e,t),vn(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(R){Oe(t,t.return,R)}}break;case 3:if(rn(e,t),vn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xo(e.containerInfo)}catch(R){Oe(t,t.return,R)}break;case 4:rn(e,t),vn(t);break;case 13:rn(e,t),vn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Lp=Fe())),r&4&&e0(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(ft=(c=ft)||d,rn(e,t),ft=c):rn(e,t),vn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(K=t,d=t.child;d!==null;){for(p=K=d;K!==null;){switch(m=K,x=m.child,m.tag){case 0:case 11:case 14:case 15:Mo(4,m,m.return);break;case 1:ls(m,m.return);var A=m.stateNode;if(typeof A.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(R){Oe(r,n,R)}}break;case 5:ls(m,m.return);break;case 22:if(m.memoizedState!==null){n0(p);continue}}x!==null?(x.return=m,K=x):n0(p)}d=d.sibling}e:for(d=null,p=t;;){if(p.tag===5){if(d===null){d=p;try{i=p.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=U_("display",o))}catch(R){Oe(t,t.return,R)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(R){Oe(t,t.return,R)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:rn(e,t),vn(t),r&4&&e0(t);break;case 21:break;default:rn(e,t),vn(t)}}function vn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(h1(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Qo(i,""),r.flags&=-33);var s=Zy(t);sf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Zy(t);rf(t,l,o);break;default:throw Error($(161))}}catch(u){Oe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function IA(t,e,n){K=t,p1(t)}function p1(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var i=K,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||El;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||ft;l=El;var c=ft;if(El=o,(ft=u)&&!c)for(K=i;K!==null;)o=K,u=o.child,o.tag===22&&o.memoizedState!==null?r0(i):u!==null?(u.return=o,K=u):r0(i);for(;s!==null;)K=s,p1(s),s=s.sibling;K=i,El=l,ft=c}t0(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,K=s):t0(t)}}function t0(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ft||gc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ft)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:sn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Uy(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Uy(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Xo(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}ft||e.flags&512&&nf(e)}catch(m){Oe(e,e.return,m)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function n0(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function r0(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{gc(4,e)}catch(u){Oe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Oe(e,i,u)}}var s=e.return;try{nf(e)}catch(u){Oe(e,s,u)}break;case 5:var o=e.return;try{nf(e)}catch(u){Oe(e,o,u)}}}catch(u){Oe(e,e.return,u)}if(e===t){K=null;break}var l=e.sibling;if(l!==null){l.return=e.return,K=l;break}K=e.return}}var xA=Math.ceil,Cu=sr.ReactCurrentDispatcher,Dp=sr.ReactCurrentOwner,Zt=sr.ReactCurrentBatchConfig,de=0,Xe=null,je=null,nt=0,Ut=0,us=Kr(0),Qe=0,la=null,Ei=0,yc=0,Op=0,Fo=null,Pt=null,Lp=0,Cs=1/0,zn=null,Ru=!1,of=null,kr=null,Tl=!1,Er=null,ku=0,Uo=0,af=null,$l=-1,ql=0;function St(){return de&6?Fe():$l!==-1?$l:$l=Fe()}function Nr(t){return t.mode&1?de&2&&nt!==0?nt&-nt:lA.transition!==null?(ql===0&&(ql=Y_()),ql):(t=ye,t!==0||(t=window.event,t=t===void 0?16:sw(t.type)),t):1}function dn(t,e,n,r){if(50<Uo)throw Uo=0,af=null,Error($(185));Ta(t,n,r),(!(de&2)||t!==Xe)&&(t===Xe&&(!(de&2)&&(yc|=n),Qe===4&&mr(t,nt)),Vt(t,r),n===1&&de===0&&!(e.mode&1)&&(Cs=Fe()+500,fc&&Gr()))}function Vt(t,e){var n=t.callbackNode;lx(t,e);var r=du(t,t===Xe?nt:0);if(r===0)n!==null&&dy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&dy(n),e===1)t.tag===0?aA(i0.bind(null,t)):Iw(i0.bind(null,t)),rA(function(){!(de&6)&&Gr()}),n=null;else{switch(Z_(r)){case 1:n=ap;break;case 4:n=J_;break;case 16:n=hu;break;case 536870912:n=X_;break;default:n=hu}n=T1(n,m1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function m1(t,e){if($l=-1,ql=0,de&6)throw Error($(327));var n=t.callbackNode;if(gs()&&t.callbackNode!==n)return null;var r=du(t,t===Xe?nt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Nu(t,r);else{e=r;var i=de;de|=2;var s=y1();(Xe!==t||nt!==e)&&(zn=null,Cs=Fe()+500,pi(t,e));do try{RA();break}catch(l){g1(t,l)}while(1);wp(),Cu.current=s,de=i,je!==null?e=0:(Xe=null,nt=0,e=Qe)}if(e!==0){if(e===2&&(i=Dd(t),i!==0&&(r=i,e=lf(t,i))),e===1)throw n=la,pi(t,0),mr(t,r),Vt(t,Fe()),n;if(e===6)mr(t,r);else{if(i=t.current.alternate,!(r&30)&&!AA(i)&&(e=Nu(t,r),e===2&&(s=Dd(t),s!==0&&(r=s,e=lf(t,s))),e===1))throw n=la,pi(t,0),mr(t,r),Vt(t,Fe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:ai(t,Pt,zn);break;case 3:if(mr(t,r),(r&130023424)===r&&(e=Lp+500-Fe(),10<e)){if(du(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){St(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Bd(ai.bind(null,t,Pt,zn),e);break}ai(t,Pt,zn);break;case 4:if(mr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-hn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xA(r/1960))-r,10<r){t.timeoutHandle=Bd(ai.bind(null,t,Pt,zn),r);break}ai(t,Pt,zn);break;case 5:ai(t,Pt,zn);break;default:throw Error($(329))}}}return Vt(t,Fe()),t.callbackNode===n?m1.bind(null,t):null}function lf(t,e){var n=Fo;return t.current.memoizedState.isDehydrated&&(pi(t,e).flags|=256),t=Nu(t,e),t!==2&&(e=Pt,Pt=n,e!==null&&uf(e)),t}function uf(t){Pt===null?Pt=t:Pt.push.apply(Pt,t)}function AA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!pn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function mr(t,e){for(e&=~Op,e&=~yc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-hn(e),r=1<<n;t[n]=-1,e&=~r}}function i0(t){if(de&6)throw Error($(327));gs();var e=du(t,0);if(!(e&1))return Vt(t,Fe()),null;var n=Nu(t,e);if(t.tag!==0&&n===2){var r=Dd(t);r!==0&&(e=r,n=lf(t,r))}if(n===1)throw n=la,pi(t,0),mr(t,e),Vt(t,Fe()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ai(t,Pt,zn),Vt(t,Fe()),null}function Vp(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(Cs=Fe()+500,fc&&Gr())}}function Ti(t){Er!==null&&Er.tag===0&&!(de&6)&&gs();var e=de;de|=1;var n=Zt.transition,r=ye;try{if(Zt.transition=null,ye=1,t)return t()}finally{ye=r,Zt.transition=n,de=e,!(de&6)&&Gr()}}function Mp(){Ut=us.current,xe(us)}function pi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,nA(n)),je!==null)for(n=je.return;n!==null;){var r=n;switch(yp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yu();break;case 3:xs(),xe(Ot),xe(gt),Ap();break;case 5:xp(r);break;case 4:xs();break;case 13:xe(Re);break;case 19:xe(Re);break;case 10:Ep(r.type._context);break;case 22:case 23:Mp()}n=n.return}if(Xe=t,je=t=Pr(t.current,null),nt=Ut=e,Qe=0,la=null,Op=yc=Ei=0,Pt=Fo=null,ci!==null){for(e=0;e<ci.length;e++)if(n=ci[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ci=null}return t}function g1(t,e){do{var n=je;try{if(wp(),zl.current=Au,xu){for(var r=ke.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}xu=!1}if(wi=0,Je=We=ke=null,Vo=!1,sa=0,Dp.current=null,n===null||n.return===null){Qe=1,la=e,je=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=nt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=l,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var x=Hy(o);if(x!==null){x.flags&=-257,Wy(x,o,l,s,e),x.mode&1&&qy(s,c,e),e=x,u=c;var A=e.updateQueue;if(A===null){var R=new Set;R.add(u),e.updateQueue=R}else A.add(u);break e}else{if(!(e&1)){qy(s,c,e),Fp();break e}u=Error($(426))}}else if(Ce&&l.mode&1){var I=Hy(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),Wy(I,o,l,s,e),vp(As(u,l));break e}}s=u=As(u,l),Qe!==4&&(Qe=2),Fo===null?Fo=[s]:Fo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=Zw(s,u,e);Fy(s,E);break e;case 1:l=u;var _=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(kr===null||!kr.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var L=e1(s,l,e);Fy(s,L);break e}}s=s.return}while(s!==null)}_1(n)}catch(O){e=O,je===n&&n!==null&&(je=n=n.return);continue}break}while(1)}function y1(){var t=Cu.current;return Cu.current=Au,t===null?Au:t}function Fp(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),Xe===null||!(Ei&268435455)&&!(yc&268435455)||mr(Xe,nt)}function Nu(t,e){var n=de;de|=2;var r=y1();(Xe!==t||nt!==e)&&(zn=null,pi(t,e));do try{CA();break}catch(i){g1(t,i)}while(1);if(wp(),de=n,Cu.current=r,je!==null)throw Error($(261));return Xe=null,nt=0,Qe}function CA(){for(;je!==null;)v1(je)}function RA(){for(;je!==null&&!ZI();)v1(je)}function v1(t){var e=E1(t.alternate,t,Ut);t.memoizedProps=t.pendingProps,e===null?_1(t):je=e,Dp.current=null}function _1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=EA(n,e),n!==null){n.flags&=32767,je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,je=null;return}}else if(n=wA(n,e,Ut),n!==null){je=n;return}if(e=e.sibling,e!==null){je=e;return}je=e=t}while(e!==null);Qe===0&&(Qe=5)}function ai(t,e,n){var r=ye,i=Zt.transition;try{Zt.transition=null,ye=1,kA(t,e,n,r)}finally{Zt.transition=i,ye=r}return null}function kA(t,e,n,r){do gs();while(Er!==null);if(de&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(ux(t,s),t===Xe&&(je=Xe=null,nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Tl||(Tl=!0,T1(hu,function(){return gs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Zt.transition,Zt.transition=null;var o=ye;ye=1;var l=de;de|=4,Dp.current=null,SA(t,n),f1(n,t),Gx(Ud),fu=!!Fd,Ud=Fd=null,t.current=n,IA(n),ex(),de=l,ye=o,Zt.transition=s}else t.current=n;if(Tl&&(Tl=!1,Er=t,ku=i),s=t.pendingLanes,s===0&&(kr=null),rx(n.stateNode),Vt(t,Fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ru)throw Ru=!1,t=of,of=null,t;return ku&1&&t.tag!==0&&gs(),s=t.pendingLanes,s&1?t===af?Uo++:(Uo=0,af=t):Uo=0,Gr(),null}function gs(){if(Er!==null){var t=Z_(ku),e=Zt.transition,n=ye;try{if(Zt.transition=null,ye=16>t?16:t,Er===null)var r=!1;else{if(t=Er,Er=null,ku=0,de&6)throw Error($(331));var i=de;for(de|=4,K=t.current;K!==null;){var s=K,o=s.child;if(K.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(K=c;K!==null;){var d=K;switch(d.tag){case 0:case 11:case 15:Mo(8,d,s)}var p=d.child;if(p!==null)p.return=d,K=p;else for(;K!==null;){d=K;var m=d.sibling,x=d.return;if(c1(d),d===c){K=null;break}if(m!==null){m.return=x,K=m;break}K=x}}}var A=s.alternate;if(A!==null){var R=A.child;if(R!==null){A.child=null;do{var I=R.sibling;R.sibling=null,R=I}while(R!==null)}}K=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,K=o;else e:for(;K!==null;){if(s=K,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Mo(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,K=E;break e}K=s.return}}var _=t.current;for(K=_;K!==null;){o=K;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,K=C;else e:for(o=_;K!==null;){if(l=K,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:gc(9,l)}}catch(O){Oe(l,l.return,O)}if(l===o){K=null;break e}var L=l.sibling;if(L!==null){L.return=l.return,K=L;break e}K=l.return}}if(de=i,Gr(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(lc,t)}catch{}r=!0}return r}finally{ye=n,Zt.transition=e}}return!1}function s0(t,e,n){e=As(n,e),e=Zw(t,e,1),t=Rr(t,e,1),e=St(),t!==null&&(Ta(t,1,e),Vt(t,e))}function Oe(t,e,n){if(t.tag===3)s0(t,t,n);else for(;e!==null;){if(e.tag===3){s0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(kr===null||!kr.has(r))){t=As(n,t),t=e1(e,t,1),e=Rr(e,t,1),t=St(),e!==null&&(Ta(e,1,t),Vt(e,t));break}}e=e.return}}function NA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=St(),t.pingedLanes|=t.suspendedLanes&n,Xe===t&&(nt&n)===n&&(Qe===4||Qe===3&&(nt&130023424)===nt&&500>Fe()-Lp?pi(t,0):Op|=n),Vt(t,e)}function w1(t,e){e===0&&(t.mode&1?(e=dl,dl<<=1,!(dl&130023424)&&(dl=4194304)):e=1);var n=St();t=Zn(t,e),t!==null&&(Ta(t,e,n),Vt(t,n))}function PA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),w1(t,n)}function bA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),w1(t,n)}var E1;E1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ot.current)Dt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Dt=!1,_A(t,e,n);Dt=!!(t.flags&131072)}else Dt=!1,Ce&&e.flags&1048576&&xw(e,wu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;jl(t,e),t=e.pendingProps;var i=Ts(e,gt.current);ms(e,n),i=Rp(null,e,r,t,i,n);var s=kp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Lt(r)?(s=!0,vu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Sp(e),i.updater=mc,e.stateNode=i,i._reactInternals=e,Kd(e,r,t,n),e=Xd(null,e,r,!0,s,n)):(e.tag=0,Ce&&s&&gp(e),Et(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(jl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=OA(r),t=sn(r,t),i){case 0:e=Jd(null,e,r,t,n);break e;case 1:e=Gy(null,e,r,t,n);break e;case 11:e=Qy(null,e,r,t,n);break e;case 14:e=Ky(null,e,r,sn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:sn(r,i),Jd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:sn(r,i),Gy(t,e,r,i,n);case 3:e:{if(i1(e),t===null)throw Error($(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Pw(t,e),Su(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=As(Error($(423)),e),e=Jy(t,e,r,n,i);break e}else if(r!==i){i=As(Error($(424)),e),e=Jy(t,e,r,n,i);break e}else for(jt=Cr(e.stateNode.containerInfo.firstChild),qt=e,Ce=!0,an=null,n=kw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ss(),r===i){e=er(t,e,n);break e}Et(t,e,r,n)}e=e.child}return e;case 5:return bw(e),t===null&&Hd(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,zd(r,i)?o=null:s!==null&&zd(r,s)&&(e.flags|=32),r1(t,e),Et(t,e,o,n),e.child;case 6:return t===null&&Hd(e),null;case 13:return s1(t,e,n);case 4:return Ip(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Is(e,null,r,n):Et(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:sn(r,i),Qy(t,e,r,i,n);case 7:return Et(t,e,e.pendingProps,n),e.child;case 8:return Et(t,e,e.pendingProps.children,n),e.child;case 12:return Et(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Te(Eu,r._currentValue),r._currentValue=o,s!==null)if(pn(s.value,o)){if(s.children===i.children&&!Ot.current){e=er(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Qn(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Wd(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Wd(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Et(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ms(e,n),i=en(i),r=r(i),e.flags|=1,Et(t,e,r,n),e.child;case 14:return r=e.type,i=sn(r,e.pendingProps),i=sn(r.type,i),Ky(t,e,r,i,n);case 15:return t1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:sn(r,i),jl(t,e),e.tag=1,Lt(r)?(t=!0,vu(e)):t=!1,ms(e,n),Yw(e,r,i),Kd(e,r,i,n),Xd(null,e,r,!0,t,n);case 19:return o1(t,e,n);case 22:return n1(t,e,n)}throw Error($(156,e.tag))};function T1(t,e){return G_(t,e)}function DA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(t,e,n,r){return new DA(t,e,n,r)}function Up(t){return t=t.prototype,!(!t||!t.isReactComponent)}function OA(t){if(typeof t=="function")return Up(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ip)return 11;if(t===sp)return 14}return 2}function Pr(t,e){var n=t.alternate;return n===null?(n=Yt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Hl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Up(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Zi:return mi(n.children,i,s,e);case rp:o=8,i|=8;break;case vd:return t=Yt(12,n,e,i|2),t.elementType=vd,t.lanes=s,t;case _d:return t=Yt(13,n,e,i),t.elementType=_d,t.lanes=s,t;case wd:return t=Yt(19,n,e,i),t.elementType=wd,t.lanes=s,t;case b_:return vc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case N_:o=10;break e;case P_:o=9;break e;case ip:o=11;break e;case sp:o=14;break e;case dr:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Yt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function mi(t,e,n,r){return t=Yt(7,t,r,e),t.lanes=n,t}function vc(t,e,n,r){return t=Yt(22,t,r,e),t.elementType=b_,t.lanes=n,t.stateNode={isHidden:!1},t}function Qh(t,e,n){return t=Yt(6,t,null,e),t.lanes=n,t}function Kh(t,e,n){return e=Yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function LA(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rh(0),this.expirationTimes=Rh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zp(t,e,n,r,i,s,o,l,u){return t=new LA(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Yt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sp(s),t}function VA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function S1(t){if(!t)return Ur;t=t._reactInternals;e:{if(Pi(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Lt(n))return Sw(t,n,e)}return e}function I1(t,e,n,r,i,s,o,l,u){return t=zp(n,r,!0,t,i,s,o,l,u),t.context=S1(null),n=t.current,r=St(),i=Nr(n),s=Qn(r,i),s.callback=e??null,Rr(n,s,i),t.current.lanes=i,Ta(t,i,r),Vt(t,r),t}function _c(t,e,n,r){var i=e.current,s=St(),o=Nr(i);return n=S1(n),e.context===null?e.context=n:e.pendingContext=n,e=Qn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Rr(i,e,o),t!==null&&(dn(t,i,o,s),Ul(t,i,o)),o}function Pu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function o0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Bp(t,e){o0(t,e),(t=t.alternate)&&o0(t,e)}function MA(){return null}var x1=typeof reportError=="function"?reportError:function(t){console.error(t)};function jp(t){this._internalRoot=t}wc.prototype.render=jp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));_c(t,e,null,null)};wc.prototype.unmount=jp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ti(function(){_c(null,t,null,null)}),e[Yn]=null}};function wc(t){this._internalRoot=t}wc.prototype.unstable_scheduleHydration=function(t){if(t){var e=nw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<pr.length&&e!==0&&e<pr[n].priority;n++);pr.splice(n,0,t),n===0&&iw(t)}};function $p(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ec(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function a0(){}function FA(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Pu(o);s.call(c)}}var o=I1(e,r,t,0,null,!1,!1,"",a0);return t._reactRootContainer=o,t[Yn]=o.current,ea(t.nodeType===8?t.parentNode:t),Ti(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=Pu(u);l.call(c)}}var u=zp(t,0,!1,null,null,!1,!1,"",a0);return t._reactRootContainer=u,t[Yn]=u.current,ea(t.nodeType===8?t.parentNode:t),Ti(function(){_c(e,u,n,r)}),u}function Tc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=Pu(o);l.call(u)}}_c(e,o,t,i)}else o=FA(n,e,t,i,r);return Pu(o)}ew=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=So(e.pendingLanes);n!==0&&(lp(e,n|1),Vt(e,Fe()),!(de&6)&&(Cs=Fe()+500,Gr()))}break;case 13:Ti(function(){var r=Zn(t,1);if(r!==null){var i=St();dn(r,t,1,i)}}),Bp(t,1)}};up=function(t){if(t.tag===13){var e=Zn(t,134217728);if(e!==null){var n=St();dn(e,t,134217728,n)}Bp(t,134217728)}};tw=function(t){if(t.tag===13){var e=Nr(t),n=Zn(t,e);if(n!==null){var r=St();dn(n,t,e,r)}Bp(t,e)}};nw=function(){return ye};rw=function(t,e){var n=ye;try{return ye=t,e()}finally{ye=n}};Nd=function(t,e,n){switch(e){case"input":if(Sd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=dc(r);if(!i)throw Error($(90));O_(r),Sd(r,i)}}}break;case"textarea":V_(t,n);break;case"select":e=n.value,e!=null&&hs(t,!!n.multiple,e,!1)}};$_=Vp;q_=Ti;var UA={usingClientEntryPoint:!1,Events:[Ia,rs,dc,B_,j_,Vp]},mo={findFiberByHostInstance:ui,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zA={bundleType:mo.bundleType,version:mo.version,rendererPackageName:mo.rendererPackageName,rendererConfig:mo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Q_(t),t===null?null:t.stateNode},findFiberByHostInstance:mo.findFiberByHostInstance||MA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sl.isDisabled&&Sl.supportsFiber)try{lc=Sl.inject(zA),In=Sl}catch{}}Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UA;Wt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$p(e))throw Error($(200));return VA(t,e,null,n)};Wt.createRoot=function(t,e){if(!$p(t))throw Error($(299));var n=!1,r="",i=x1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=zp(t,1,!1,null,null,n,!1,r,i),t[Yn]=e.current,ea(t.nodeType===8?t.parentNode:t),new jp(e)};Wt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=Q_(e),t=t===null?null:t.stateNode,t};Wt.flushSync=function(t){return Ti(t)};Wt.hydrate=function(t,e,n){if(!Ec(e))throw Error($(200));return Tc(null,t,e,!0,n)};Wt.hydrateRoot=function(t,e,n){if(!$p(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=x1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=I1(e,null,t,1,n??null,i,!1,s,o),t[Yn]=e.current,ea(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new wc(e)};Wt.render=function(t,e,n){if(!Ec(e))throw Error($(200));return Tc(null,t,e,!1,n)};Wt.unmountComponentAtNode=function(t){if(!Ec(t))throw Error($(40));return t._reactRootContainer?(Ti(function(){Tc(null,null,t,!1,function(){t._reactRootContainer=null,t[Yn]=null})}),!0):!1};Wt.unstable_batchedUpdates=Vp;Wt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ec(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Tc(t,e,n,!1,r)};Wt.version="18.3.1-next-f1338f8080-20240426";function A1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(A1)}catch(t){console.error(t)}}A1(),A_.exports=Wt;var BA=A_.exports,l0=BA;gd.createRoot=l0.createRoot,gd.hydrateRoot=l0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ua(){return ua=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ua.apply(this,arguments)}var Tr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Tr||(Tr={}));const u0="popstate";function jA(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return cf("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:bu(i)}return qA(e,n,null,t)}function Ue(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function C1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $A(){return Math.random().toString(36).substr(2,8)}function c0(t,e){return{usr:t.state,key:t.key,idx:e}}function cf(t,e,n,r){return n===void 0&&(n=null),ua({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Fs(e):e,{state:n,key:e&&e.key||r||$A()})}function bu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Fs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function qA(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=Tr.Pop,u=null,c=d();c==null&&(c=0,o.replaceState(ua({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function p(){l=Tr.Pop;let I=d(),E=I==null?null:I-c;c=I,u&&u({action:l,location:R.location,delta:E})}function m(I,E){l=Tr.Push;let _=cf(R.location,I,E);n&&n(_,I),c=d()+1;let C=c0(_,c),L=R.createHref(_);try{o.pushState(C,"",L)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(L)}s&&u&&u({action:l,location:R.location,delta:1})}function x(I,E){l=Tr.Replace;let _=cf(R.location,I,E);n&&n(_,I),c=d();let C=c0(_,c),L=R.createHref(_);o.replaceState(C,"",L),s&&u&&u({action:l,location:R.location,delta:0})}function A(I){let E=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof I=="string"?I:bu(I);return _=_.replace(/ $/,"%20"),Ue(E,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,E)}let R={get action(){return l},get location(){return t(i,o)},listen(I){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(u0,p),u=I,()=>{i.removeEventListener(u0,p),u=null}},createHref(I){return e(i,I)},createURL:A,encodeLocation(I){let E=A(I);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:m,replace:x,go(I){return o.go(I)}};return R}var h0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(h0||(h0={}));function HA(t,e,n){return n===void 0&&(n="/"),WA(t,e,n,!1)}function WA(t,e,n,r){let i=typeof e=="string"?Fs(e):e,s=qp(i.pathname||"/",n);if(s==null)return null;let o=R1(t);QA(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let c=iC(s);l=nC(o[u],c,r)}return l}function R1(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Ue(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=br([r,u.relativePath]),d=n.concat(u);s.children&&s.children.length>0&&(Ue(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),R1(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:eC(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of k1(s.path))i(s,o,u)}),e}function k1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=k1(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function QA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:tC(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const KA=/^:[\w-]+$/,GA=3,JA=2,XA=1,YA=10,ZA=-2,d0=t=>t==="*";function eC(t,e){let n=t.split("/"),r=n.length;return n.some(d0)&&(r+=ZA),e&&(r+=JA),n.filter(i=>!d0(i)).reduce((i,s)=>i+(KA.test(s)?GA:s===""?XA:YA),r)}function tC(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function nC(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],c=l===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",p=f0({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),m=u.route;if(!p&&c&&n&&!r[r.length-1].route.index&&(p=f0({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},d)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:br([s,p.pathname]),pathnameBase:lC(br([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=br([s,p.pathnameBase]))}return o}function f0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=rC(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((c,d,p)=>{let{paramName:m,isOptional:x}=d;if(m==="*"){let R=l[p]||"";o=s.slice(0,s.length-R.length).replace(/(.)\/+$/,"$1")}const A=l[p];return x&&!A?c[m]=void 0:c[m]=(A||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function rC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),C1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function iC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return C1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function qp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function sC(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Fs(t):t;return{pathname:n?n.startsWith("/")?n:oC(n,e):e,search:uC(r),hash:cC(i)}}function oC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Gh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function aC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Hp(t,e){let n=aC(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Wp(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Fs(t):(i=ua({},t),Ue(!i.pathname||!i.pathname.includes("?"),Gh("?","pathname","search",i)),Ue(!i.pathname||!i.pathname.includes("#"),Gh("#","pathname","hash",i)),Ue(!i.search||!i.search.includes("#"),Gh("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}l=p>=0?e[p]:"/"}let u=sC(i,l),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}const br=t=>t.join("/").replace(/\/\/+/g,"/"),lC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,cC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function hC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const N1=["post","put","patch","delete"];new Set(N1);const dC=["get",...N1];new Set(dC);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ca(){return ca=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ca.apply(this,arguments)}const Qp=U.createContext(null),fC=U.createContext(null),Jr=U.createContext(null),Sc=U.createContext(null),Xr=U.createContext({outlet:null,matches:[],isDataRoute:!1}),P1=U.createContext(null);function pC(t,e){let{relative:n}=e===void 0?{}:e;Us()||Ue(!1);let{basename:r,navigator:i}=U.useContext(Jr),{hash:s,pathname:o,search:l}=O1(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:br([r,o])),i.createHref({pathname:u,search:l,hash:s})}function Us(){return U.useContext(Sc)!=null}function bi(){return Us()||Ue(!1),U.useContext(Sc).location}function b1(t){U.useContext(Jr).static||U.useLayoutEffect(t)}function D1(){let{isDataRoute:t}=U.useContext(Xr);return t?CC():mC()}function mC(){Us()||Ue(!1);let t=U.useContext(Qp),{basename:e,future:n,navigator:r}=U.useContext(Jr),{matches:i}=U.useContext(Xr),{pathname:s}=bi(),o=JSON.stringify(Hp(i,n.v7_relativeSplatPath)),l=U.useRef(!1);return b1(()=>{l.current=!0}),U.useCallback(function(c,d){if(d===void 0&&(d={}),!l.current)return;if(typeof c=="number"){r.go(c);return}let p=Wp(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:br([e,p.pathname])),(d.replace?r.replace:r.push)(p,d.state,d)},[e,r,o,s,t])}function O1(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=U.useContext(Jr),{matches:i}=U.useContext(Xr),{pathname:s}=bi(),o=JSON.stringify(Hp(i,r.v7_relativeSplatPath));return U.useMemo(()=>Wp(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function gC(t,e){return yC(t,e)}function yC(t,e,n,r){Us()||Ue(!1);let{navigator:i}=U.useContext(Jr),{matches:s}=U.useContext(Xr),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=bi(),d;if(e){var p;let I=typeof e=="string"?Fs(e):e;u==="/"||(p=I.pathname)!=null&&p.startsWith(u)||Ue(!1),d=I}else d=c;let m=d.pathname||"/",x=m;if(u!=="/"){let I=u.replace(/^\//,"").split("/");x="/"+m.replace(/^\//,"").split("/").slice(I.length).join("/")}let A=HA(t,{pathname:x}),R=TC(A&&A.map(I=>Object.assign({},I,{params:Object.assign({},l,I.params),pathname:br([u,i.encodeLocation?i.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?u:br([u,i.encodeLocation?i.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),s,n,r);return e&&R?U.createElement(Sc.Provider,{value:{location:ca({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Tr.Pop}},R):R}function vC(){let t=AC(),e=hC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),n?U.createElement("pre",{style:i},n):null,s)}const _C=U.createElement(vC,null);class wC extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?U.createElement(Xr.Provider,{value:this.props.routeContext},U.createElement(P1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function EC(t){let{routeContext:e,match:n,children:r}=t,i=U.useContext(Qp);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),U.createElement(Xr.Provider,{value:e},r)}function TC(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let d=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);d>=0||Ue(!1),o=o.slice(0,Math.min(o.length,d+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let p=o[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=d),p.route.id){let{loaderData:m,errors:x}=n,A=p.route.loader&&m[p.route.id]===void 0&&(!x||x[p.route.id]===void 0);if(p.route.lazy||A){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,p,m)=>{let x,A=!1,R=null,I=null;n&&(x=l&&p.route.id?l[p.route.id]:void 0,R=p.route.errorElement||_C,u&&(c<0&&m===0?(RC("route-fallback",!1),A=!0,I=null):c===m&&(A=!0,I=p.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,m+1)),_=()=>{let C;return x?C=R:A?C=I:p.route.Component?C=U.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=d,U.createElement(EC,{match:p,routeContext:{outlet:d,matches:E,isDataRoute:n!=null},children:C})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?U.createElement(wC,{location:n.location,revalidation:n.revalidation,component:R,error:x,children:_(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):_()},null)}var L1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(L1||{}),Du=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Du||{});function SC(t){let e=U.useContext(Qp);return e||Ue(!1),e}function IC(t){let e=U.useContext(fC);return e||Ue(!1),e}function xC(t){let e=U.useContext(Xr);return e||Ue(!1),e}function V1(t){let e=xC(),n=e.matches[e.matches.length-1];return n.route.id||Ue(!1),n.route.id}function AC(){var t;let e=U.useContext(P1),n=IC(Du.UseRouteError),r=V1(Du.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function CC(){let{router:t}=SC(L1.UseNavigateStable),e=V1(Du.UseNavigateStable),n=U.useRef(!1);return b1(()=>{n.current=!0}),U.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ca({fromRouteId:e},s)))},[t,e])}const p0={};function RC(t,e,n){!e&&!p0[t]&&(p0[t]=!0)}function kC(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function go(t){let{to:e,replace:n,state:r,relative:i}=t;Us()||Ue(!1);let{future:s,static:o}=U.useContext(Jr),{matches:l}=U.useContext(Xr),{pathname:u}=bi(),c=D1(),d=Wp(e,Hp(l,s.v7_relativeSplatPath),u,i==="path"),p=JSON.stringify(d);return U.useEffect(()=>c(JSON.parse(p),{replace:n,state:r,relative:i}),[c,p,i,n,r]),null}function Qi(t){Ue(!1)}function NC(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Tr.Pop,navigator:s,static:o=!1,future:l}=t;Us()&&Ue(!1);let u=e.replace(/^\/*/,"/"),c=U.useMemo(()=>({basename:u,navigator:s,static:o,future:ca({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=Fs(r));let{pathname:d="/",search:p="",hash:m="",state:x=null,key:A="default"}=r,R=U.useMemo(()=>{let I=qp(d,u);return I==null?null:{location:{pathname:I,search:p,hash:m,state:x,key:A},navigationType:i}},[u,d,p,m,x,A,i]);return R==null?null:U.createElement(Jr.Provider,{value:c},U.createElement(Sc.Provider,{children:n,value:R}))}function PC(t){let{children:e,location:n}=t;return gC(hf(e),n)}new Promise(()=>{});function hf(t,e){e===void 0&&(e=[]);let n=[];return U.Children.forEach(t,(r,i)=>{if(!U.isValidElement(r))return;let s=[...e,i];if(r.type===U.Fragment){n.push.apply(n,hf(r.props.children,s));return}r.type!==Qi&&Ue(!1),!r.props.index||!r.props.children||Ue(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=hf(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function df(){return df=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},df.apply(this,arguments)}function bC(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function DC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function OC(t,e){return t.button===0&&(!e||e==="_self")&&!DC(t)}const LC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],VC="6";try{window.__reactRouterVersion=VC}catch{}const MC="startTransition",m0=NI[MC];function FC(t){let{basename:e,children:n,future:r,window:i}=t,s=U.useRef();s.current==null&&(s.current=jA({window:i,v5Compat:!0}));let o=s.current,[l,u]=U.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=U.useCallback(p=>{c&&m0?m0(()=>u(p)):u(p)},[u,c]);return U.useLayoutEffect(()=>o.listen(d),[o,d]),U.useEffect(()=>kC(r),[r]),U.createElement(NC,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const UC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kn=U.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:u,to:c,preventScrollReset:d,viewTransition:p}=e,m=bC(e,LC),{basename:x}=U.useContext(Jr),A,R=!1;if(typeof c=="string"&&zC.test(c)&&(A=c,UC))try{let C=new URL(window.location.href),L=c.startsWith("//")?new URL(C.protocol+c):new URL(c),O=qp(L.pathname,x);L.origin===C.origin&&O!=null?c=O+L.search+L.hash:R=!0}catch{}let I=pC(c,{relative:i}),E=BC(c,{replace:o,state:l,target:u,preventScrollReset:d,relative:i,viewTransition:p});function _(C){r&&r(C),C.defaultPrevented||E(C)}return U.createElement("a",df({},m,{href:A||I,onClick:R||s?r:_,ref:n,target:u}))});var g0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(g0||(g0={}));var y0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(y0||(y0={}));function BC(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,u=D1(),c=bi(),d=O1(t,{relative:o});return U.useCallback(p=>{if(OC(p,n)){p.preventDefault();let m=r!==void 0?r:bu(c)===bu(d);u(t,{replace:m,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[c,u,d,r,i,n,t,s,o,l])}var jC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const $C=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qC=(t,e)=>{const n=U.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:l,...u},c)=>U.createElement("svg",{ref:c,...jC,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:`lucide lucide-${$C(t)}`,...u},[...e.map(([d,p])=>U.createElement(d,p)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${t}`,n};var ie=qC;const HC=ie("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Jh=ie("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ic=ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),WC=ie("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),QC=ie("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Kp=ie("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),KC=ie("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),GC=ie("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),JC=ie("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Ou=ie("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),XC=ie("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),Wl=ie("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),ff=ie("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),M1=ie("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),YC=ie("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),ZC=ie("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),eR=ie("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),tR=ie("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),F1=ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Dr=ie("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),nR=ie("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),rR=ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),iR=ie("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),sR=ie("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),oR=ie("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),Gp=ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),U1=ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),aR=ie("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),z1=ie("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),pf=ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),lR=ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ql=ie("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),uR=ie("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),cR=ie("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),hR=ie("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Lu=ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),dR=ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),v0=ie("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),fR=ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),pR=ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),B1=ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),mR=ie("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),gR=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},yR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},$1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,d=s>>2,p=(s&3)<<4|l>>4;let m=(l&15)<<2|c>>6,x=c&63;u||(x=64,o||(m=64)),r.push(n[d],n[p],n[m],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(j1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||c==null||p==null)throw new vR;const m=s<<2|l>>4;if(r.push(m),c!==64){const x=l<<4&240|c>>2;if(r.push(x),p!==64){const A=c<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _R=function(t){const e=j1(t);return $1.encodeByteArray(e,!0)},Vu=function(t){return _R(t).replace(/\./g,"")},q1=function(t){try{return $1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=()=>wR().__FIREBASE_DEFAULTS__,TR=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},SR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&q1(t[1]);return e&&JSON.parse(e)},xc=()=>{try{return gR()||ER()||TR()||SR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},H1=t=>{var e,n;return(n=(e=xc())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},W1=t=>{const e=H1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Q1=()=>{var t;return(t=xc())==null?void 0:t.config},K1=t=>{var e;return(e=xc())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Jp(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t},l="";return[Vu(JSON.stringify(n)),Vu(JSON.stringify(o)),l].join(".")}const zo={};function xR(){const t={prod:[],emulator:[]};for(const e of Object.keys(zo))zo[e]?t.emulator.push(e):t.prod.push(e);return t}function AR(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let _0=!1;function Xp(t,e){if(typeof window>"u"||typeof document>"u"||!Di(window.location.host)||zo[t]===e||zo[t]||_0)return;zo[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=xR().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,x){m.setAttribute("width","24"),m.setAttribute("id",x),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function c(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{_0=!0,o()},m}function d(m,x){m.setAttribute("id",x),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=AR(r),x=n("text"),A=document.getElementById(x)||document.createElement("span"),R=n("learnmore"),I=document.getElementById(R)||document.createElement("a"),E=n("preprendIcon"),_=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const C=m.element;l(C),d(I,R);const L=c();u(_,E),C.append(_,A,I,L),document.body.appendChild(C)}s?(A.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yt())}function RR(){var e;const t=(e=xc())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function PR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bR(){const t=yt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function DR(){return!RR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OR(){try{return typeof indexedDB=="object"}catch{return!1}}function LR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR="FirebaseError";class Vn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=VR,Object.setPrototypeOf(this,Vn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Aa.prototype.create)}}class Aa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?MR(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Vn(i,l,r)}}function MR(t,e){return t.replace(FR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const FR=/\{\$([^}]+)}/g;function UR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Si(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(w0(s)&&w0(o)){if(!Si(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function w0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function xo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ao(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function zR(t,e){const n=new BR(t,e);return n.subscribe.bind(n)}class BR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");jR(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Xh),i.error===void 0&&(i.error=Xh),i.complete===void 0&&(i.complete=Xh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Xh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t){return t&&t._delegate?t._delegate:t}class zr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new IR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HR(e))try{this.getOrInitializeService({instanceIdentifier:li})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=li){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=li){return this.instances.has(e)}getOptions(e=li){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=li){return this.component?this.component.multipleInstances?e:li:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qR(t){return t===li?void 0:t}function HR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $R(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const QR={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},KR=ae.INFO,GR={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},JR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=GR[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yp{constructor(e){this.name=e,this._logLevel=KR,this._logHandler=JR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const XR=(t,e)=>e.some(n=>t instanceof n);let E0,T0;function YR(){return E0||(E0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZR(){return T0||(T0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const J1=new WeakMap,mf=new WeakMap,X1=new WeakMap,Yh=new WeakMap,Zp=new WeakMap;function e2(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Or(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&J1.set(n,t)}).catch(()=>{}),Zp.set(e,t),e}function t2(t){if(mf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});mf.set(t,e)}let gf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return mf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||X1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Or(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function n2(t){gf=t(gf)}function r2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Zh(this),e,...n);return X1.set(r,e.sort?e.sort():[e]),Or(r)}:ZR().includes(t)?function(...e){return t.apply(Zh(this),e),Or(J1.get(this))}:function(...e){return Or(t.apply(Zh(this),e))}}function i2(t){return typeof t=="function"?r2(t):(t instanceof IDBTransaction&&t2(t),XR(t,YR())?new Proxy(t,gf):t)}function Or(t){if(t instanceof IDBRequest)return e2(t);if(Yh.has(t))return Yh.get(t);const e=i2(t);return e!==t&&(Yh.set(t,e),Zp.set(e,t)),e}const Zh=t=>Zp.get(t);function s2(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Or(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Or(o.result),u.oldVersion,u.newVersion,Or(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const o2=["get","getKey","getAll","getAllKeys","count"],a2=["put","add","delete","clear"],ed=new Map;function S0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ed.get(e))return ed.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=a2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||o2.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&u.done]))[0]};return ed.set(e,s),s}n2(t=>({...t,get:(e,n,r)=>S0(e,n)||t.get(e,n,r),has:(e,n)=>!!S0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(u2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function u2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yf="@firebase/app",I0="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr=new Yp("@firebase/app"),c2="@firebase/app-compat",h2="@firebase/analytics-compat",d2="@firebase/analytics",f2="@firebase/app-check-compat",p2="@firebase/app-check",m2="@firebase/auth",g2="@firebase/auth-compat",y2="@firebase/database",v2="@firebase/data-connect",_2="@firebase/database-compat",w2="@firebase/functions",E2="@firebase/functions-compat",T2="@firebase/installations",S2="@firebase/installations-compat",I2="@firebase/messaging",x2="@firebase/messaging-compat",A2="@firebase/performance",C2="@firebase/performance-compat",R2="@firebase/remote-config",k2="@firebase/remote-config-compat",N2="@firebase/storage",P2="@firebase/storage-compat",b2="@firebase/firestore",D2="@firebase/ai",O2="@firebase/firestore-compat",L2="firebase",V2="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf="[DEFAULT]",M2={[yf]:"fire-core",[c2]:"fire-core-compat",[d2]:"fire-analytics",[h2]:"fire-analytics-compat",[p2]:"fire-app-check",[f2]:"fire-app-check-compat",[m2]:"fire-auth",[g2]:"fire-auth-compat",[y2]:"fire-rtdb",[v2]:"fire-data-connect",[_2]:"fire-rtdb-compat",[w2]:"fire-fn",[E2]:"fire-fn-compat",[T2]:"fire-iid",[S2]:"fire-iid-compat",[I2]:"fire-fcm",[x2]:"fire-fcm-compat",[A2]:"fire-perf",[C2]:"fire-perf-compat",[R2]:"fire-rc",[k2]:"fire-rc-compat",[N2]:"fire-gcs",[P2]:"fire-gcs-compat",[b2]:"fire-fst",[O2]:"fire-fst-compat",[D2]:"fire-vertex","fire-js":"fire-js",[L2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mu=new Map,F2=new Map,_f=new Map;function x0(t,e){try{t.container.addComponent(e)}catch(n){tr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ii(t){const e=t.name;if(_f.has(e))return tr.debug(`There were multiple attempts to register component ${e}.`),!1;_f.set(e,t);for(const n of Mu.values())x0(n,t);for(const n of F2.values())x0(n,t);return!0}function Ac(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Bt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lr=new Aa("app","Firebase",U2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=V2;function Y1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:vf,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Lr.create("bad-app-name",{appName:String(i)});if(n||(n=Q1()),!n)throw Lr.create("no-options");const s=Mu.get(i);if(s){if(Si(n,s.options)&&Si(r,s.config))return s;throw Lr.create("duplicate-app",{appName:i})}const o=new WR(i);for(const u of _f.values())o.addComponent(u);const l=new z2(n,r,o);return Mu.set(i,l),l}function em(t=vf){const e=Mu.get(t);if(!e&&t===vf&&Q1())return Y1();if(!e)throw Lr.create("no-app",{appName:t});return e}function An(t,e,n){let r=M2[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),tr.warn(o.join(" "));return}Ii(new zr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="firebase-heartbeat-database",j2=1,ha="firebase-heartbeat-store";let td=null;function Z1(){return td||(td=s2(B2,j2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ha)}catch(n){console.warn(n)}}}}).catch(t=>{throw Lr.create("idb-open",{originalErrorMessage:t.message})})),td}async function $2(t){try{const n=(await Z1()).transaction(ha),r=await n.objectStore(ha).get(eE(t));return await n.done,r}catch(e){if(e instanceof Vn)tr.warn(e.message);else{const n=Lr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});tr.warn(n.message)}}}async function A0(t,e){try{const r=(await Z1()).transaction(ha,"readwrite");await r.objectStore(ha).put(e,eE(t)),await r.done}catch(n){if(n instanceof Vn)tr.warn(n.message);else{const r=Lr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});tr.warn(r.message)}}}function eE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=1024,H2=30;class W2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new K2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=C0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>H2){const o=G2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){tr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=C0(),{heartbeatsToSend:r,unsentEntries:i}=Q2(this._heartbeatsCache.heartbeats),s=Vu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return tr.warn(n),""}}}function C0(){return new Date().toISOString().substring(0,10)}function Q2(t,e=q2){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),R0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),R0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class K2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OR()?LR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return A0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return A0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function R0(t){return Vu(JSON.stringify({version:2,heartbeats:t})).length}function G2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(t){Ii(new zr("platform-logger",e=>new l2(e),"PRIVATE")),Ii(new zr("heartbeat",e=>new W2(e),"PRIVATE")),An(yf,I0,t),An(yf,I0,"esm2020"),An("fire-js","")}J2("");function tE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const X2=tE,nE=new Aa("auth","Firebase",tE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu=new Yp("@firebase/auth");function Y2(t,...e){Fu.logLevel<=ae.WARN&&Fu.warn(`Auth (${Oi}): ${t}`,...e)}function Kl(t,...e){Fu.logLevel<=ae.ERROR&&Fu.error(`Auth (${Oi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t,...e){throw tm(t,...e)}function Cn(t,...e){return tm(t,...e)}function rE(t,e,n){const r={...X2(),[e]:n};return new Aa("auth","Firebase",r).create(e,{appName:t.name})}function Gn(t){return rE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return nE.create(t,...e)}function Y(t,e,...n){if(!t)throw tm(e,...n)}function Hn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Kl(e),new Error(e)}function nr(t,e){t||Hn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Z2(){return k0()==="http:"||k0()==="https:"}function k0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Z2()||NR()||"connection"in navigator)?navigator.onLine:!0}function tk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n){this.shortDelay=e,this.longDelay=n,nr(n>e,"Short delay should be less than long delay!"),this.isMobile=CR()||PR()}get(){return ek()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(t,e){nr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ik=new Ra(3e4,6e4);function Yr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function or(t,e,n,r,i={}){return sE(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=Ca({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:u,...s};return kR()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Di(t.emulatorConfig.host)&&(c.credentials="include"),iE.fetch()(await oE(t,t.config.apiHost,n,l),c)})}async function sE(t,e,n){t._canInitEmulator=!1;const r={...nk,...e};try{const i=new ok(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Il(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Il(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Il(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Il(t,"user-disabled",o);const d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw rE(t,d,c);mn(t,d)}}catch(i){if(i instanceof Vn)throw i;mn(t,"network-request-failed",{message:String(i)})}}async function ka(t,e,n,r,i={}){const s=await or(t,e,n,r,i);return"mfaPendingCredential"in s&&mn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function oE(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?nm(t.config,i):`${t.config.apiScheme}://${i}`;return rk.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function sk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ok{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Cn(this.auth,"network-request-failed")),ik.get())})}}function Il(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Cn(t,e,r);return i.customData._tokenResponse=n,i}function N0(t){return t!==void 0&&t.enterprise!==void 0}class ak{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return sk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function lk(t,e){return or(t,"GET","/v2/recaptchaConfig",Yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uk(t,e){return or(t,"POST","/v1/accounts:delete",e)}async function Uu(t,e){return or(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ck(t,e=!1){const n=Pe(t),r=await n.getIdToken(e),i=rm(r);Y(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Bo(nd(i.auth_time)),issuedAtTime:Bo(nd(i.iat)),expirationTime:Bo(nd(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function nd(t){return Number(t)*1e3}function rm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Kl("JWT malformed, contained fewer than 3 sections"),null;try{const i=q1(n);return i?JSON.parse(i):(Kl("Failed to decode base64 JWT payload"),null)}catch(i){return Kl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function P0(t){const e=rm(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rs(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Vn&&hk(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function hk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bo(this.lastLoginAt),this.creationTime=Bo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zu(t){var p;const e=t.auth,n=await t.getIdToken(),r=await Rs(t,Uu(e,{idToken:n}));Y(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(p=i.providerUserInfo)!=null&&p.length?aE(i.providerUserInfo):[],o=pk(t.providerData,s),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),c=l?u:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ef(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function fk(t){const e=Pe(t);await zu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pk(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function aE(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mk(t,e){const n=await sE(t,{},async()=>{const r=Ca({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await oE(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:r};return t.emulatorConfig&&Di(t.emulatorConfig.host)&&(u.credentials="include"),iE.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gk(t,e){return or(t,"POST","/v2/accounts:revokeToken",Yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):P0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Y(e.length!==0,"internal-error");const n=P0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await mk(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new ys;return r&&(Y(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Y(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Y(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ys,this.toJSON())}_performRefresh(){return Hn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ln{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new dk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ef(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Rs(this,this.stsTokenManager.getToken(this.auth,e));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ck(this,e)}reload(){return fk(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ln({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await zu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Bt(this.auth.app))return Promise.reject(Gn(this.auth));const e=await this.getIdToken();return await Rs(this,uk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:x,providerData:A,stsTokenManager:R}=n;Y(p&&R,e,"internal-error");const I=ys.fromJSON(this.name,R);Y(typeof p=="string",e,"internal-error"),hr(r,e.name),hr(i,e.name),Y(typeof m=="boolean",e,"internal-error"),Y(typeof x=="boolean",e,"internal-error"),hr(s,e.name),hr(o,e.name),hr(l,e.name),hr(u,e.name),hr(c,e.name),hr(d,e.name);const E=new ln({uid:p,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:x,photoURL:o,phoneNumber:s,tenantId:l,stsTokenManager:I,createdAt:c,lastLoginAt:d});return A&&Array.isArray(A)&&(E.providerData=A.map(_=>({..._}))),u&&(E._redirectEventId=u),E}static async _fromIdTokenResponse(e,n,r=!1){const i=new ys;i.updateFromServerResponse(n);const s=new ln({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await zu(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Y(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?aE(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new ys;l.updateFromIdToken(r);const u=new ln({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ef(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=new Map;function Wn(t){nr(t instanceof Function,"Expected a class definition");let e=b0.get(t);return e?(nr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,b0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}lE.type="NONE";const D0=lE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(t,e,n){return`firebase:${t}:${e}:${n}`}class vs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Gl(this.userKey,i.apiKey,s),this.fullPersistenceKey=Gl("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Uu(this.auth,{idToken:e}).catch(()=>{});return n?ln._fromGetAccountInfoResponse(this.auth,n,e):null}return ln._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new vs(Wn(D0),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Wn(D0);const o=Gl(r,e.config.apiKey,e.name);let l=null;for(const c of n)try{const d=await c._get(o);if(d){let p;if(typeof d=="string"){const m=await Uu(e,{idToken:d}).catch(()=>{});if(!m)break;p=await ln._fromGetAccountInfoResponse(e,m,d)}else p=ln._fromJSON(e,d);c!==s&&(l=p),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new vs(s,e,r):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new vs(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pE(e))return"Blackberry";if(mE(e))return"Webos";if(cE(e))return"Safari";if((e.includes("chrome/")||hE(e))&&!e.includes("edge/"))return"Chrome";if(fE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function uE(t=yt()){return/firefox\//i.test(t)}function cE(t=yt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hE(t=yt()){return/crios\//i.test(t)}function dE(t=yt()){return/iemobile/i.test(t)}function fE(t=yt()){return/android/i.test(t)}function pE(t=yt()){return/blackberry/i.test(t)}function mE(t=yt()){return/webos/i.test(t)}function im(t=yt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function yk(t=yt()){var e;return im(t)&&!!((e=window.navigator)!=null&&e.standalone)}function vk(){return bR()&&document.documentMode===10}function gE(t=yt()){return im(t)||fE(t)||mE(t)||pE(t)||/windows phone/i.test(t)||dE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(t,e=[]){let n;switch(t){case"Browser":n=O0(yt());break;case"Worker":n=`${O0(yt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Oi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const u=e(s);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wk(t,e={}){return or(t,"GET","/v2/passwordPolicy",Yr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=6;class Tk{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Ek,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new L0(this),this.idTokenSubscription=new L0(this),this.beforeStateQueue=new _k(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wn(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await vs.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Uu(this,{idToken:e}),r=await ln._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Bt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Bt(this.app))return Promise.reject(Gn(this));const n=e?Pe(e):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Bt(this.app)?Promise.reject(Gn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Bt(this.app)?Promise.reject(Gn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wk(this),n=new Tk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Aa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await gk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Wn(e)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=await vs.create(this,[Wn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Bt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Y2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Li(t){return Pe(t)}class L0{constructor(e){this.auth=e,this.observer=null,this.addObserver=zR(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ik(t){Cc=t}function vE(t){return Cc.loadJS(t)}function xk(){return Cc.recaptchaEnterpriseScript}function Ak(){return Cc.gapiScript}function Ck(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Rk{constructor(){this.enterprise=new kk}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class kk{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Nk="recaptcha-enterprise",_E="NO_RECAPTCHA";class Pk{constructor(e){this.type=Nk,this.auth=Li(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{lk(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new ak(u);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(u=>{l(u)})})}function i(s,o,l){const u=window.grecaptcha;N0(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(_E)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Rk().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(l=>{if(!n&&N0(window.grecaptcha))i(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=xk();u.length!==0&&(u+=l),vE(u).then(()=>{i(l,s,o)}).catch(c=>{o(c)})}}).catch(l=>{o(l)})})}}async function yo(t,e,n,r=!1,i=!1){const s=new Pk(t);let o;if(i)o=_E;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,c=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Tf(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await yo(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await yo(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(l)});else if(i==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const l=await yo(t,e,n);return r(t,l).catch(async u=>{var c;if(((c=t._getRecaptchaConfig())==null?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const d=await yo(t,e,n,!1,!0);return r(t,d)}return Promise.reject(u)})}else{const l=await yo(t,e,n,!1,!0);return r(t,l)}else return Promise.reject(i+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(t,e){const n=Ac(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Si(s,e??{}))return i;mn(i,"already-initialized")}return n.initialize({options:e})}function Dk(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Wn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Ok(t,e,n){const r=Li(t);Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=wE(e),{host:o,port:l}=Lk(e),u=l===null?"":`:${l}`,c={url:`${s}//${o}${u}/`},d=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Y(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Y(Si(c,r.config.emulator)&&Si(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Di(o)?(Jp(`${s}//${o}${u}`),Xp("Auth",!0)):i||Vk()}function wE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Lk(t){const e=wE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:V0(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:V0(o)}}}function V0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Vk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Hn("not implemented")}_getIdTokenResponse(e){return Hn("not implemented")}_linkToIdToken(e,n){return Hn("not implemented")}_getReauthenticationResolver(e){return Hn("not implemented")}}async function Mk(t,e){return or(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fk(t,e){return ka(t,"POST","/v1/accounts:signInWithPassword",Yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uk(t,e){return ka(t,"POST","/v1/accounts:signInWithEmailLink",Yr(t,e))}async function zk(t,e){return ka(t,"POST","/v1/accounts:signInWithEmailLink",Yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da extends sm{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new da(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new da(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tf(e,n,"signInWithPassword",Fk,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Uk(e,{email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tf(e,r,"signUpPassword",Mk,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return zk(e,{idToken:n,email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _s(t,e){return ka(t,"POST","/v1/accounts:signInWithIdp",Yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk="http://localhost";class xi extends sm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new xi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new xi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return _s(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,_s(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_s(e,n)}buildRequest(){const e={requestUri:Bk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ca(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $k(t){const e=xo(Ao(t)).link,n=e?xo(Ao(e)).deep_link_id:null,r=xo(Ao(t)).deep_link_id;return(r?xo(Ao(r)).link:null)||r||n||e||t}class om{constructor(e){const n=xo(Ao(e)),r=n.apiKey??null,i=n.oobCode??null,s=jk(n.mode??null);Y(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=$k(e);try{return new om(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(){this.providerId=zs.PROVIDER_ID}static credential(e,n){return da._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=om.parseLink(n);return Y(r,"argument-error"),da._fromEmailAndCode(e,r.code,r.tenantId)}}zs.PROVIDER_ID="password";zs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na extends EE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends Na{constructor(){super("facebook.com")}static credential(e){return xi._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gr.credential(e.oauthAccessToken)}catch{return null}}}gr.FACEBOOK_SIGN_IN_METHOD="facebook.com";gr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends Na{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return xi._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return yr.credential(n,r)}catch{return null}}}yr.GOOGLE_SIGN_IN_METHOD="google.com";yr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Na{constructor(){super("github.com")}static credential(e){return xi._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vr.credential(e.oauthAccessToken)}catch{return null}}}vr.GITHUB_SIGN_IN_METHOD="github.com";vr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Na{constructor(){super("twitter.com")}static credential(e,n){return xi._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return _r.credential(n,r)}catch{return null}}}_r.TWITTER_SIGN_IN_METHOD="twitter.com";_r.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qk(t,e){return ka(t,"POST","/v1/accounts:signUp",Yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await ln._fromIdTokenResponse(e,r,i),o=M0(r);return new Ai({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=M0(r);return new Ai({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function M0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends Vn{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Bu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Bu(e,n,r,i)}}function TE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Bu._fromErrorAndOperation(t,s,e,r):s})}async function Hk(t,e,n=!1){const r=await Rs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ai._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wk(t,e,n=!1){const{auth:r}=t;if(Bt(r.app))return Promise.reject(Gn(r));const i="reauthenticate";try{const s=await Rs(t,TE(r,i,e,t),n);Y(s.idToken,r,"internal-error");const o=rm(s.idToken);Y(o,r,"internal-error");const{sub:l}=o;return Y(t.uid===l,r,"user-mismatch"),Ai._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&mn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SE(t,e,n=!1){if(Bt(t.app))return Promise.reject(Gn(t));const r="signIn",i=await TE(t,r,e),s=await Ai._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function Qk(t,e){return SE(Li(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IE(t){const e=Li(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Kk(t,e,n){if(Bt(t.app))return Promise.reject(Gn(t));const r=Li(t),o=await Tf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qk,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&IE(t),u}),l=await Ai._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function Gk(t,e,n){return Bt(t.app)?Promise.reject(Gn(t)):Qk(Pe(t),zs.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&IE(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jk(t,e){return or(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xk(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Pe(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Rs(r,Jk(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Yk(t,e,n,r){return Pe(t).onIdTokenChanged(e,n,r)}function Zk(t,e,n){return Pe(t).beforeAuthStateChanged(e,n)}function eN(t,e,n,r){return Pe(t).onAuthStateChanged(e,n,r)}function tN(t){return Pe(t).signOut()}const ju="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ju,"1"),this.storage.removeItem(ju),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=1e3,rN=10;class AE extends xE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);vk()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,rN):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},nN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}AE.type="LOCAL";const iN=AE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE extends xE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}CE.type="SESSION";const RE=CE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Rc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async c=>c(n.origin,s)),u=await sN(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const c=am("",20);i.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const m=p;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(m.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(){return window}function aN(t){Rn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(){return typeof Rn().WorkerGlobalScope<"u"&&typeof Rn().importScripts=="function"}async function lN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function cN(){return kE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="firebaseLocalStorageDb",hN=1,$u="firebaseLocalStorage",PE="fbase_key";class Pa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function kc(t,e){return t.transaction([$u],e?"readwrite":"readonly").objectStore($u)}function dN(){const t=indexedDB.deleteDatabase(NE);return new Pa(t).toPromise()}function Sf(){const t=indexedDB.open(NE,hN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore($u,{keyPath:PE})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains($u)?e(r):(r.close(),await dN(),e(await Sf()))})})}async function F0(t,e,n){const r=kc(t,!0).put({[PE]:e,value:n});return new Pa(r).toPromise()}async function fN(t,e){const n=kc(t,!1).get(e),r=await new Pa(n).toPromise();return r===void 0?null:r.value}function U0(t,e){const n=kc(t,!0).delete(e);return new Pa(n).toPromise()}const pN=800,mN=3;class bE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>mN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rc._getInstance(cN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await lN(),!this.activeServiceWorker)return;this.sender=new oN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sf();return await F0(e,ju,"1"),await U0(e,ju),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>F0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>fN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>U0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=kc(i,!1).getAll();return new Pa(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bE.type="LOCAL";const gN=bE;new Ra(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(t,e){return e?Wn(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm extends sm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _s(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _s(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _s(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function vN(t){return SE(t.auth,new lm(t),t.bypassAuthState)}function _N(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),Wk(n,new lm(t),t.bypassAuthState)}async function wN(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),Hk(n,new lm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vN;case"linkViaPopup":case"linkViaRedirect":return wN;case"reauthViaPopup":case"reauthViaRedirect":return _N;default:mn(this.auth,"internal-error")}}resolve(e){nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=new Ra(2e3,1e4);class cs extends DE{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,cs.currentPopupAction&&cs.currentPopupAction.cancel(),cs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Y(e,this.auth,"internal-error"),e}async onExecution(){nr(this.filter.length===1,"Popup operations only handle one event");const e=am();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Cn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,EN.get())};e()}}cs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN="pendingRedirect",Jl=new Map;class SN extends DE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Jl.get(this.auth._key());if(!e){try{const r=await IN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Jl.set(this.auth._key(),e)}return this.bypassAuthState||Jl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IN(t,e){const n=CN(e),r=AN(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function xN(t,e){Jl.set(t._key(),e)}function AN(t){return Wn(t._redirectPersistence)}function CN(t){return Gl(TN,t.config.apiKey,t.name)}async function RN(t,e,n=!1){if(Bt(t.app))return Promise.reject(Gn(t));const r=Li(t),i=yN(r,e),o=await new SN(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=10*60*1e3;class NN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!PN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!OE(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Cn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kN&&this.cachedEventUids.clear(),this.cachedEventUids.has(z0(e))}saveEventToCache(e){this.cachedEventUids.add(z0(e)),this.lastProcessedEventTime=Date.now()}}function z0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function OE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function PN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return OE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bN(t,e={}){return or(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ON=/^https?/;async function LN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await bN(t);for(const n of e)try{if(VN(n))return}catch{}mn(t,"unauthorized-domain")}function VN(t){const e=wf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ON.test(n))return!1;if(DN.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN=new Ra(3e4,6e4);function B0(){const t=Rn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function FN(t){return new Promise((e,n)=>{var i,s,o;function r(){B0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{B0(),n(Cn(t,"network-request-failed"))},timeout:MN.get()})}if((s=(i=Rn().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Rn().gapi)!=null&&o.load)r();else{const l=Ck("iframefcb");return Rn()[l]=()=>{gapi.load?r():n(Cn(t,"network-request-failed"))},vE(`${Ak()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Xl=null,e})}let Xl=null;function UN(t){return Xl=Xl||FN(t),Xl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=new Ra(5e3,15e3),BN="__/auth/iframe",jN="emulator/auth/iframe",$N={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HN(t){const e=t.config;Y(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?nm(e,jN):`https://${t.config.authDomain}/${BN}`,r={apiKey:e.apiKey,appName:t.name,v:Oi},i=qN.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ca(r).slice(1)}`}async function WN(t){const e=await UN(t),n=Rn().gapi;return Y(n,t,"internal-error"),e.open({where:document.body,url:HN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$N,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Cn(t,"network-request-failed"),l=Rn().setTimeout(()=>{s(o)},zN.get());function u(){Rn().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KN=500,GN=600,JN="_blank",XN="http://localhost";class j0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YN(t,e,n,r=KN,i=GN){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u={...QN,width:r.toString(),height:i.toString(),top:s,left:o},c=yt().toLowerCase();n&&(l=hE(c)?JN:n),uE(c)&&(e=e||XN,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[x,A])=>`${m}${x}=${A},`,"");if(yk(c)&&l!=="_self")return ZN(e||"",l),new j0(null);const p=window.open(e||"",l,d);Y(p,t,"popup-blocked");try{p.focus()}catch{}return new j0(p)}function ZN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP="__/auth/handler",tP="emulator/auth/handler",nP=encodeURIComponent("fac");async function $0(t,e,n,r,i,s){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Oi,eventId:i};if(e instanceof EE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",UR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries(s||{}))o[d]=p}if(e instanceof Na){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await t._getAppCheckToken(),c=u?`#${nP}=${encodeURIComponent(u)}`:"";return`${rP(t)}?${Ca(l).slice(1)}${c}`}function rP({config:t}){return t.emulator?nm(t,tP):`https://${t.authDomain}/${eP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rd="webStorageSupport";class iP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RE,this._completeRedirectFn=RN,this._overrideRedirectResult=xN}async _openPopup(e,n,r,i){var o;nr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await $0(e,n,r,wf(),i);return YN(e,s,am())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await $0(e,n,r,wf(),i);return aN(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(nr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await WN(e),r=new NN(e);return n.register("authEvent",i=>(Y(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(rd,{type:rd},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[rd];s!==void 0&&n(!!s),mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=LN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gE()||cE()||im()}}const sP=iP;var q0="@firebase/auth",H0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lP(t){Ii(new zr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Y(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yE(t)},c=new Sk(r,i,s,u);return Dk(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ii(new zr("auth-internal",e=>{const n=Li(e.getProvider("auth").getImmediate());return(r=>new oP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),An(q0,H0,aP(t)),An(q0,H0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP=5*60,cP=K1("authIdTokenMaxAge")||uP;let W0=null;const hP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>cP)return;const i=n==null?void 0:n.token;W0!==i&&(W0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function dP(t=em()){const e=Ac(t,"auth");if(e.isInitialized())return e.getImmediate();const n=bk(t,{popupRedirectResolver:sP,persistence:[gN,iN,RE]}),r=K1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=hP(s.toString());Zk(n,o,()=>o(n.currentUser)),Yk(n,l=>o(l))}}const i=H1("auth");return i&&Ok(n,`http://${i}`),n}function fP(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Ik({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Cn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",fP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lP("Browser");var Q0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vr,LE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,y){function T(){}T.prototype=y.prototype,w.D=y.prototype,w.prototype=new T,w.prototype.constructor=w,w.C=function(k,S,b){for(var N=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)N[Ve-2]=arguments[Ve];return y.prototype[S].apply(k,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,y,T){T||(T=0);var k=Array(16);if(typeof y=="string")for(var S=0;16>S;++S)k[S]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(S=0;16>S;++S)k[S]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=w.g[0],T=w.g[1],S=w.g[2];var b=w.g[3],N=y+(b^T&(S^b))+k[0]+3614090360&4294967295;y=T+(N<<7&4294967295|N>>>25),N=b+(S^y&(T^S))+k[1]+3905402710&4294967295,b=y+(N<<12&4294967295|N>>>20),N=S+(T^b&(y^T))+k[2]+606105819&4294967295,S=b+(N<<17&4294967295|N>>>15),N=T+(y^S&(b^y))+k[3]+3250441966&4294967295,T=S+(N<<22&4294967295|N>>>10),N=y+(b^T&(S^b))+k[4]+4118548399&4294967295,y=T+(N<<7&4294967295|N>>>25),N=b+(S^y&(T^S))+k[5]+1200080426&4294967295,b=y+(N<<12&4294967295|N>>>20),N=S+(T^b&(y^T))+k[6]+2821735955&4294967295,S=b+(N<<17&4294967295|N>>>15),N=T+(y^S&(b^y))+k[7]+4249261313&4294967295,T=S+(N<<22&4294967295|N>>>10),N=y+(b^T&(S^b))+k[8]+1770035416&4294967295,y=T+(N<<7&4294967295|N>>>25),N=b+(S^y&(T^S))+k[9]+2336552879&4294967295,b=y+(N<<12&4294967295|N>>>20),N=S+(T^b&(y^T))+k[10]+4294925233&4294967295,S=b+(N<<17&4294967295|N>>>15),N=T+(y^S&(b^y))+k[11]+2304563134&4294967295,T=S+(N<<22&4294967295|N>>>10),N=y+(b^T&(S^b))+k[12]+1804603682&4294967295,y=T+(N<<7&4294967295|N>>>25),N=b+(S^y&(T^S))+k[13]+4254626195&4294967295,b=y+(N<<12&4294967295|N>>>20),N=S+(T^b&(y^T))+k[14]+2792965006&4294967295,S=b+(N<<17&4294967295|N>>>15),N=T+(y^S&(b^y))+k[15]+1236535329&4294967295,T=S+(N<<22&4294967295|N>>>10),N=y+(S^b&(T^S))+k[1]+4129170786&4294967295,y=T+(N<<5&4294967295|N>>>27),N=b+(T^S&(y^T))+k[6]+3225465664&4294967295,b=y+(N<<9&4294967295|N>>>23),N=S+(y^T&(b^y))+k[11]+643717713&4294967295,S=b+(N<<14&4294967295|N>>>18),N=T+(b^y&(S^b))+k[0]+3921069994&4294967295,T=S+(N<<20&4294967295|N>>>12),N=y+(S^b&(T^S))+k[5]+3593408605&4294967295,y=T+(N<<5&4294967295|N>>>27),N=b+(T^S&(y^T))+k[10]+38016083&4294967295,b=y+(N<<9&4294967295|N>>>23),N=S+(y^T&(b^y))+k[15]+3634488961&4294967295,S=b+(N<<14&4294967295|N>>>18),N=T+(b^y&(S^b))+k[4]+3889429448&4294967295,T=S+(N<<20&4294967295|N>>>12),N=y+(S^b&(T^S))+k[9]+568446438&4294967295,y=T+(N<<5&4294967295|N>>>27),N=b+(T^S&(y^T))+k[14]+3275163606&4294967295,b=y+(N<<9&4294967295|N>>>23),N=S+(y^T&(b^y))+k[3]+4107603335&4294967295,S=b+(N<<14&4294967295|N>>>18),N=T+(b^y&(S^b))+k[8]+1163531501&4294967295,T=S+(N<<20&4294967295|N>>>12),N=y+(S^b&(T^S))+k[13]+2850285829&4294967295,y=T+(N<<5&4294967295|N>>>27),N=b+(T^S&(y^T))+k[2]+4243563512&4294967295,b=y+(N<<9&4294967295|N>>>23),N=S+(y^T&(b^y))+k[7]+1735328473&4294967295,S=b+(N<<14&4294967295|N>>>18),N=T+(b^y&(S^b))+k[12]+2368359562&4294967295,T=S+(N<<20&4294967295|N>>>12),N=y+(T^S^b)+k[5]+4294588738&4294967295,y=T+(N<<4&4294967295|N>>>28),N=b+(y^T^S)+k[8]+2272392833&4294967295,b=y+(N<<11&4294967295|N>>>21),N=S+(b^y^T)+k[11]+1839030562&4294967295,S=b+(N<<16&4294967295|N>>>16),N=T+(S^b^y)+k[14]+4259657740&4294967295,T=S+(N<<23&4294967295|N>>>9),N=y+(T^S^b)+k[1]+2763975236&4294967295,y=T+(N<<4&4294967295|N>>>28),N=b+(y^T^S)+k[4]+1272893353&4294967295,b=y+(N<<11&4294967295|N>>>21),N=S+(b^y^T)+k[7]+4139469664&4294967295,S=b+(N<<16&4294967295|N>>>16),N=T+(S^b^y)+k[10]+3200236656&4294967295,T=S+(N<<23&4294967295|N>>>9),N=y+(T^S^b)+k[13]+681279174&4294967295,y=T+(N<<4&4294967295|N>>>28),N=b+(y^T^S)+k[0]+3936430074&4294967295,b=y+(N<<11&4294967295|N>>>21),N=S+(b^y^T)+k[3]+3572445317&4294967295,S=b+(N<<16&4294967295|N>>>16),N=T+(S^b^y)+k[6]+76029189&4294967295,T=S+(N<<23&4294967295|N>>>9),N=y+(T^S^b)+k[9]+3654602809&4294967295,y=T+(N<<4&4294967295|N>>>28),N=b+(y^T^S)+k[12]+3873151461&4294967295,b=y+(N<<11&4294967295|N>>>21),N=S+(b^y^T)+k[15]+530742520&4294967295,S=b+(N<<16&4294967295|N>>>16),N=T+(S^b^y)+k[2]+3299628645&4294967295,T=S+(N<<23&4294967295|N>>>9),N=y+(S^(T|~b))+k[0]+4096336452&4294967295,y=T+(N<<6&4294967295|N>>>26),N=b+(T^(y|~S))+k[7]+1126891415&4294967295,b=y+(N<<10&4294967295|N>>>22),N=S+(y^(b|~T))+k[14]+2878612391&4294967295,S=b+(N<<15&4294967295|N>>>17),N=T+(b^(S|~y))+k[5]+4237533241&4294967295,T=S+(N<<21&4294967295|N>>>11),N=y+(S^(T|~b))+k[12]+1700485571&4294967295,y=T+(N<<6&4294967295|N>>>26),N=b+(T^(y|~S))+k[3]+2399980690&4294967295,b=y+(N<<10&4294967295|N>>>22),N=S+(y^(b|~T))+k[10]+4293915773&4294967295,S=b+(N<<15&4294967295|N>>>17),N=T+(b^(S|~y))+k[1]+2240044497&4294967295,T=S+(N<<21&4294967295|N>>>11),N=y+(S^(T|~b))+k[8]+1873313359&4294967295,y=T+(N<<6&4294967295|N>>>26),N=b+(T^(y|~S))+k[15]+4264355552&4294967295,b=y+(N<<10&4294967295|N>>>22),N=S+(y^(b|~T))+k[6]+2734768916&4294967295,S=b+(N<<15&4294967295|N>>>17),N=T+(b^(S|~y))+k[13]+1309151649&4294967295,T=S+(N<<21&4294967295|N>>>11),N=y+(S^(T|~b))+k[4]+4149444226&4294967295,y=T+(N<<6&4294967295|N>>>26),N=b+(T^(y|~S))+k[11]+3174756917&4294967295,b=y+(N<<10&4294967295|N>>>22),N=S+(y^(b|~T))+k[2]+718787259&4294967295,S=b+(N<<15&4294967295|N>>>17),N=T+(b^(S|~y))+k[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(S+(N<<21&4294967295|N>>>11))&4294967295,w.g[2]=w.g[2]+S&4294967295,w.g[3]=w.g[3]+b&4294967295}r.prototype.u=function(w,y){y===void 0&&(y=w.length);for(var T=y-this.blockSize,k=this.B,S=this.h,b=0;b<y;){if(S==0)for(;b<=T;)i(this,w,b),b+=this.blockSize;if(typeof w=="string"){for(;b<y;)if(k[S++]=w.charCodeAt(b++),S==this.blockSize){i(this,k),S=0;break}}else for(;b<y;)if(k[S++]=w[b++],S==this.blockSize){i(this,k),S=0;break}}this.h=S,this.o+=y},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;var T=8*this.o;for(y=w.length-8;y<w.length;++y)w[y]=T&255,T/=256;for(this.u(w),w=Array(16),y=T=0;4>y;++y)for(var k=0;32>k;k+=8)w[T++]=this.g[y]>>>k&255;return w};function s(w,y){var T=l;return Object.prototype.hasOwnProperty.call(T,w)?T[w]:T[w]=y(w)}function o(w,y){this.h=y;for(var T=[],k=!0,S=w.length-1;0<=S;S--){var b=w[S]|0;k&&b==y||(T[S]=b,k=!1)}this.g=T}var l={};function u(w){return-128<=w&&128>w?s(w,function(y){return new o([y|0],0>y?-1:0)}):new o([w|0],0>w?-1:0)}function c(w){if(isNaN(w)||!isFinite(w))return p;if(0>w)return I(c(-w));for(var y=[],T=1,k=0;w>=T;k++)y[k]=w/T|0,T*=4294967296;return new o(y,0)}function d(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return I(d(w.substring(1),y));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(y,8)),k=p,S=0;S<w.length;S+=8){var b=Math.min(8,w.length-S),N=parseInt(w.substring(S,S+b),y);8>b?(b=c(Math.pow(y,b)),k=k.j(b).add(c(N))):(k=k.j(T),k=k.add(c(N)))}return k}var p=u(0),m=u(1),x=u(16777216);t=o.prototype,t.m=function(){if(R(this))return-I(this).m();for(var w=0,y=1,T=0;T<this.g.length;T++){var k=this.i(T);w+=(0<=k?k:4294967296+k)*y,y*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(A(this))return"0";if(R(this))return"-"+I(this).toString(w);for(var y=c(Math.pow(w,6)),T=this,k="";;){var S=L(T,y).g;T=E(T,S.j(y));var b=((0<T.g.length?T.g[0]:T.h)>>>0).toString(w);if(T=S,A(T))return b+k;for(;6>b.length;)b="0"+b;k=b+k}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function A(w){if(w.h!=0)return!1;for(var y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function R(w){return w.h==-1}t.l=function(w){return w=E(this,w),R(w)?-1:A(w)?0:1};function I(w){for(var y=w.g.length,T=[],k=0;k<y;k++)T[k]=~w.g[k];return new o(T,~w.h).add(m)}t.abs=function(){return R(this)?I(this):this},t.add=function(w){for(var y=Math.max(this.g.length,w.g.length),T=[],k=0,S=0;S<=y;S++){var b=k+(this.i(S)&65535)+(w.i(S)&65535),N=(b>>>16)+(this.i(S)>>>16)+(w.i(S)>>>16);k=N>>>16,b&=65535,N&=65535,T[S]=N<<16|b}return new o(T,T[T.length-1]&-2147483648?-1:0)};function E(w,y){return w.add(I(y))}t.j=function(w){if(A(this)||A(w))return p;if(R(this))return R(w)?I(this).j(I(w)):I(I(this).j(w));if(R(w))return I(this.j(I(w)));if(0>this.l(x)&&0>w.l(x))return c(this.m()*w.m());for(var y=this.g.length+w.g.length,T=[],k=0;k<2*y;k++)T[k]=0;for(k=0;k<this.g.length;k++)for(var S=0;S<w.g.length;S++){var b=this.i(k)>>>16,N=this.i(k)&65535,Ve=w.i(S)>>>16,vt=w.i(S)&65535;T[2*k+2*S]+=N*vt,_(T,2*k+2*S),T[2*k+2*S+1]+=b*vt,_(T,2*k+2*S+1),T[2*k+2*S+1]+=N*Ve,_(T,2*k+2*S+1),T[2*k+2*S+2]+=b*Ve,_(T,2*k+2*S+2)}for(k=0;k<y;k++)T[k]=T[2*k+1]<<16|T[2*k];for(k=y;k<2*y;k++)T[k]=0;return new o(T,0)};function _(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function C(w,y){this.g=w,this.h=y}function L(w,y){if(A(y))throw Error("division by zero");if(A(w))return new C(p,p);if(R(w))return y=L(I(w),y),new C(I(y.g),I(y.h));if(R(y))return y=L(w,I(y)),new C(I(y.g),y.h);if(30<w.g.length){if(R(w)||R(y))throw Error("slowDivide_ only works with positive integers.");for(var T=m,k=y;0>=k.l(w);)T=O(T),k=O(k);var S=z(T,1),b=z(k,1);for(k=z(k,2),T=z(T,2);!A(k);){var N=b.add(k);0>=N.l(w)&&(S=S.add(T),b=N),k=z(k,1),T=z(T,1)}return y=E(w,S.j(y)),new C(S,y)}for(S=p;0<=w.l(y);){for(T=Math.max(1,Math.floor(w.m()/y.m())),k=Math.ceil(Math.log(T)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),b=c(T),N=b.j(y);R(N)||0<N.l(w);)T-=k,b=c(T),N=b.j(y);A(b)&&(b=m),S=S.add(b),w=E(w,N)}return new C(S,w)}t.A=function(w){return L(this,w).h},t.and=function(w){for(var y=Math.max(this.g.length,w.g.length),T=[],k=0;k<y;k++)T[k]=this.i(k)&w.i(k);return new o(T,this.h&w.h)},t.or=function(w){for(var y=Math.max(this.g.length,w.g.length),T=[],k=0;k<y;k++)T[k]=this.i(k)|w.i(k);return new o(T,this.h|w.h)},t.xor=function(w){for(var y=Math.max(this.g.length,w.g.length),T=[],k=0;k<y;k++)T[k]=this.i(k)^w.i(k);return new o(T,this.h^w.h)};function O(w){for(var y=w.g.length+1,T=[],k=0;k<y;k++)T[k]=w.i(k)<<1|w.i(k-1)>>>31;return new o(T,w.h)}function z(w,y){var T=y>>5;y%=32;for(var k=w.g.length-T,S=[],b=0;b<k;b++)S[b]=0<y?w.i(b+T)>>>y|w.i(b+T+1)<<32-y:w.i(b+T);return new o(S,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,LE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Vr=o}).apply(typeof Q0<"u"?Q0:typeof self<"u"?self:typeof window<"u"?window:{});var xl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var VE,Co,ME,Yl,If,FE,UE,zE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,f){return a==Array.prototype||a==Object.prototype||(a[h]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof xl=="object"&&xl];for(var h=0;h<a.length;++h){var f=a[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,h){if(h)e:{var f=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var D=a[v];if(!(D in f))break e;f=f[D]}a=a[a.length-1],v=f[a],h=h(v),h!=v&&h!=null&&e(f,a,{configurable:!0,writable:!0,value:h})}}function s(a,h){a instanceof String&&(a+="");var f=0,v=!1,D={next:function(){if(!v&&f<a.length){var V=f++;return{value:h(V,a[V]),done:!1}}return v=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(a){return a||function(){return s(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function c(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function d(a,h,f){return a.call.apply(a.bind,arguments)}function p(a,h,f){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,v),a.apply(h,D)}}return function(){return a.apply(h,arguments)}}function m(a,h,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,m.apply(null,arguments)}function x(a,h){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function A(a,h){function f(){}f.prototype=h.prototype,a.aa=h.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(v,D,V){for(var q=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)q[ve-2]=arguments[ve];return h.prototype[D].apply(v,q)}}function R(a){const h=a.length;if(0<h){const f=Array(h);for(let v=0;v<h;v++)f[v]=a[v];return f}return[]}function I(a,h){for(let f=1;f<arguments.length;f++){const v=arguments[f];if(u(v)){const D=a.length||0,V=v.length||0;a.length=D+V;for(let q=0;q<V;q++)a[D+q]=v[q]}else a.push(v)}}class E{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function _(a){return/^[\s\xa0]*$/.test(a)}function C(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function L(a){return L[" "](a),a}L[" "]=function(){};var O=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function z(a,h,f){for(const v in a)h.call(f,a[v],v,a)}function w(a,h){for(const f in a)h.call(void 0,a[f],f,a)}function y(a){const h={};for(const f in a)h[f]=a[f];return h}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(a,h){let f,v;for(let D=1;D<arguments.length;D++){v=arguments[D];for(f in v)a[f]=v[f];for(let V=0;V<T.length;V++)f=T[V],Object.prototype.hasOwnProperty.call(v,f)&&(a[f]=v[f])}}function S(a){var h=1;a=a.split(":");const f=[];for(;0<h&&a.length;)f.push(a.shift()),h--;return a.length&&f.push(a.join(":")),f}function b(a){l.setTimeout(()=>{throw a},0)}function N(){var a=X;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class Ve{constructor(){this.h=this.g=null}add(h,f){const v=vt.get();v.set(h,f),this.h?this.h.next=v:this.g=v,this.h=v}}var vt=new E(()=>new Kt,a=>a.reset());class Kt{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Rt,H=!1,X=new Ve,ee=()=>{const a=l.Promise.resolve(void 0);Rt=()=>{a.then(pe)}};var pe=()=>{for(var a;a=N();){try{a.h.call(a.g)}catch(f){b(f)}var h=vt;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}H=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var kt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,h),l.removeEventListener("test",f,h)}catch{}return a}();function se(a,h){if(we.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(O){e:{try{L(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else f=="mouseover"?h=a.fromElement:f=="mouseout"&&(h=a.toElement);this.relatedTarget=h,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Ae[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&se.aa.h.call(this)}}A(se,we);var Ae={2:"touch",3:"pen",4:"mouse"};se.prototype.h=function(){se.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var st="closure_listenable_"+(1e6*Math.random()|0),Fi=0;function Ui(a,h,f,v,D){this.listener=a,this.proxy=null,this.src=h,this.type=f,this.capture=!!v,this.ha=D,this.key=++Fi,this.da=this.fa=!1}function F(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function J(a){this.src=a,this.g={},this.h=0}J.prototype.add=function(a,h,f,v,D){var V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);var q=ze(a,h,v,D);return-1<q?(h=a[q],f||(h.fa=!1)):(h=new Ui(h,this.src,V,!!v,D),h.fa=f,a.push(h)),h};function me(a,h){var f=h.type;if(f in a.g){var v=a.g[f],D=Array.prototype.indexOf.call(v,h,void 0),V;(V=0<=D)&&Array.prototype.splice.call(v,D,1),V&&(F(h),a.g[f].length==0&&(delete a.g[f],a.h--))}}function ze(a,h,f,v){for(var D=0;D<a.length;++D){var V=a[D];if(!V.da&&V.listener==h&&V.capture==!!f&&V.ha==v)return D}return-1}var th="closure_lm_"+(1e6*Math.random()|0),nh={};function eg(a,h,f,v,D){if(v&&v.once)return ng(a,h,f,v,D);if(Array.isArray(h)){for(var V=0;V<h.length;V++)eg(a,h[V],f,v,D);return null}return f=oh(f),a&&a[st]?a.K(h,f,c(v)?!!v.capture:!!v,D):tg(a,h,f,!1,v,D)}function tg(a,h,f,v,D,V){if(!h)throw Error("Invalid event type");var q=c(D)?!!D.capture:!!D,ve=ih(a);if(ve||(a[th]=ve=new J(a)),f=ve.add(h,f,v,q,V),f.proxy)return f;if(v=US(),f.proxy=v,v.src=a,v.listener=f,a.addEventListener)kt||(D=q),D===void 0&&(D=!1),a.addEventListener(h.toString(),v,D);else if(a.attachEvent)a.attachEvent(ig(h.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function US(){function a(f){return h.call(a.src,a.listener,f)}const h=zS;return a}function ng(a,h,f,v,D){if(Array.isArray(h)){for(var V=0;V<h.length;V++)ng(a,h[V],f,v,D);return null}return f=oh(f),a&&a[st]?a.L(h,f,c(v)?!!v.capture:!!v,D):tg(a,h,f,!0,v,D)}function rg(a,h,f,v,D){if(Array.isArray(h))for(var V=0;V<h.length;V++)rg(a,h[V],f,v,D);else v=c(v)?!!v.capture:!!v,f=oh(f),a&&a[st]?(a=a.i,h=String(h).toString(),h in a.g&&(V=a.g[h],f=ze(V,f,v,D),-1<f&&(F(V[f]),Array.prototype.splice.call(V,f,1),V.length==0&&(delete a.g[h],a.h--)))):a&&(a=ih(a))&&(h=a.g[h.toString()],a=-1,h&&(a=ze(h,f,v,D)),(f=-1<a?h[a]:null)&&rh(f))}function rh(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[st])me(h.i,a);else{var f=a.type,v=a.proxy;h.removeEventListener?h.removeEventListener(f,v,a.capture):h.detachEvent?h.detachEvent(ig(f),v):h.addListener&&h.removeListener&&h.removeListener(v),(f=ih(h))?(me(f,a),f.h==0&&(f.src=null,h[th]=null)):F(a)}}}function ig(a){return a in nh?nh[a]:nh[a]="on"+a}function zS(a,h){if(a.da)a=!0;else{h=new se(h,this);var f=a.listener,v=a.ha||a.src;a.fa&&rh(a),a=f.call(v,h)}return a}function ih(a){return a=a[th],a instanceof J?a:null}var sh="__closure_events_fn_"+(1e9*Math.random()>>>0);function oh(a){return typeof a=="function"?a:(a[sh]||(a[sh]=function(h){return a.handleEvent(h)}),a[sh])}function ot(){ce.call(this),this.i=new J(this),this.M=this,this.F=null}A(ot,ce),ot.prototype[st]=!0,ot.prototype.removeEventListener=function(a,h,f,v){rg(this,a,h,f,v)};function _t(a,h){var f,v=a.F;if(v)for(f=[];v;v=v.F)f.push(v);if(a=a.M,v=h.type||h,typeof h=="string")h=new we(h,a);else if(h instanceof we)h.target=h.target||a;else{var D=h;h=new we(v,a),k(h,D)}if(D=!0,f)for(var V=f.length-1;0<=V;V--){var q=h.g=f[V];D=Ha(q,v,!0,h)&&D}if(q=h.g=a,D=Ha(q,v,!0,h)&&D,D=Ha(q,v,!1,h)&&D,f)for(V=0;V<f.length;V++)q=h.g=f[V],D=Ha(q,v,!1,h)&&D}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var f=a.g[h],v=0;v<f.length;v++)F(f[v]);delete a.g[h],a.h--}}this.F=null},ot.prototype.K=function(a,h,f,v){return this.i.add(String(a),h,!1,f,v)},ot.prototype.L=function(a,h,f,v){return this.i.add(String(a),h,!0,f,v)};function Ha(a,h,f,v){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,V=0;V<h.length;++V){var q=h[V];if(q&&!q.da&&q.capture==f){var ve=q.listener,Ye=q.ha||q.src;q.fa&&me(a.i,q),D=ve.call(Ye,v)!==!1&&D}}return D&&!v.defaultPrevented}function sg(a,h,f){if(typeof a=="function")f&&(a=m(a,f));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function og(a){a.g=sg(()=>{a.g=null,a.i&&(a.i=!1,og(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class BS extends ce{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:og(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ks(a){ce.call(this),this.h=a,this.g={}}A(Ks,ce);var ag=[];function lg(a){z(a.g,function(h,f){this.g.hasOwnProperty(f)&&rh(h)},a),a.g={}}Ks.prototype.N=function(){Ks.aa.N.call(this),lg(this)},Ks.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ah=l.JSON.stringify,jS=l.JSON.parse,$S=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function lh(){}lh.prototype.h=null;function ug(a){return a.h||(a.h=a.i())}function cg(){}var Gs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function uh(){we.call(this,"d")}A(uh,we);function ch(){we.call(this,"c")}A(ch,we);var ni={},hg=null;function Wa(){return hg=hg||new ot}ni.La="serverreachability";function dg(a){we.call(this,ni.La,a)}A(dg,we);function Js(a){const h=Wa();_t(h,new dg(h))}ni.STAT_EVENT="statevent";function fg(a,h){we.call(this,ni.STAT_EVENT,a),this.stat=h}A(fg,we);function wt(a){const h=Wa();_t(h,new fg(h,a))}ni.Ma="timingevent";function pg(a,h){we.call(this,ni.Ma,a),this.size=h}A(pg,we);function Xs(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function Ys(){this.g=!0}Ys.prototype.xa=function(){this.g=!1};function qS(a,h,f,v,D,V){a.info(function(){if(a.g)if(V)for(var q="",ve=V.split("&"),Ye=0;Ye<ve.length;Ye++){var fe=ve[Ye].split("=");if(1<fe.length){var at=fe[0];fe=fe[1];var lt=at.split("_");q=2<=lt.length&&lt[1]=="type"?q+(at+"="+fe+"&"):q+(at+"=redacted&")}}else q=null;else q=V;return"XMLHTTP REQ ("+v+") [attempt "+D+"]: "+h+`
`+f+`
`+q})}function HS(a,h,f,v,D,V,q){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+D+"]: "+h+`
`+f+`
`+V+" "+q})}function zi(a,h,f,v){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+QS(a,f)+(v?" "+v:"")})}function WS(a,h){a.info(function(){return"TIMEOUT: "+h})}Ys.prototype.info=function(){};function QS(a,h){if(!a.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var v=f[a];if(!(2>v.length)){var D=v[1];if(Array.isArray(D)&&!(1>D.length)){var V=D[0];if(V!="noop"&&V!="stop"&&V!="close")for(var q=1;q<D.length;q++)D[q]=""}}}}return ah(f)}catch{return h}}var Qa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},mg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hh;function Ka(){}A(Ka,lh),Ka.prototype.g=function(){return new XMLHttpRequest},Ka.prototype.i=function(){return{}},hh=new Ka;function ar(a,h,f,v){this.j=a,this.i=h,this.l=f,this.R=v||1,this.U=new Ks(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gg}function gg(){this.i=null,this.g="",this.h=!1}var yg={},dh={};function fh(a,h,f){a.L=1,a.v=Ya(Fn(h)),a.m=f,a.P=!0,vg(a,null)}function vg(a,h){a.F=Date.now(),Ga(a),a.A=Fn(a.v);var f=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),bg(f.i,"t",v),a.C=0,f=a.j.J,a.h=new gg,a.g=Jg(a.j,f?h:null,!a.m),0<a.O&&(a.M=new BS(m(a.Y,a,a.g),a.O)),h=a.U,f=a.g,v=a.ca;var D="readystatechange";Array.isArray(D)||(D&&(ag[0]=D.toString()),D=ag);for(var V=0;V<D.length;V++){var q=eg(f,D[V],v||h.handleEvent,!1,h.h||h);if(!q)break;h.g[q.key]=q}h=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),Js(),qS(a.i,a.u,a.A,a.l,a.R,a.m)}ar.prototype.ca=function(a){a=a.target;const h=this.M;h&&Un(a)==3?h.j():this.Y(a)},ar.prototype.Y=function(a){try{if(a==this.g)e:{const lt=Un(this.g);var h=this.g.Ba();const $i=this.g.Z();if(!(3>lt)&&(lt!=3||this.g&&(this.h.h||this.g.oa()||Ug(this.g)))){this.J||lt!=4||h==7||(h==8||0>=$i?Js(3):Js(2)),ph(this);var f=this.g.Z();this.X=f;t:if(_g(this)){var v=Ug(this.g);a="";var D=v.length,V=Un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ri(this),Zs(this);var q="";break t}this.h.i=new l.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,a+=this.h.i.decode(v[h],{stream:!(V&&h==D-1)});v.length=0,this.h.g+=a,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=f==200,HS(this.i,this.u,this.A,this.l,this.R,lt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ve,Ye=this.g;if((ve=Ye.g?Ye.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(ve)){var fe=ve;break t}}fe=null}if(f=fe)zi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mh(this,f);else{this.o=!1,this.s=3,wt(12),ri(this),Zs(this);break e}}if(this.P){f=!0;let nn;for(;!this.J&&this.C<q.length;)if(nn=KS(this,q),nn==dh){lt==4&&(this.s=4,wt(14),f=!1),zi(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==yg){this.s=4,wt(15),zi(this.i,this.l,q,"[Invalid Chunk]"),f=!1;break}else zi(this.i,this.l,nn,null),mh(this,nn);if(_g(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),lt!=4||q.length!=0||this.h.h||(this.s=1,wt(16),f=!1),this.o=this.o&&f,!f)zi(this.i,this.l,q,"[Invalid Chunked Response]"),ri(this),Zs(this);else if(0<q.length&&!this.W){this.W=!0;var at=this.j;at.g==this&&at.ba&&!at.M&&(at.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Eh(at),at.M=!0,wt(11))}}else zi(this.i,this.l,q,null),mh(this,q);lt==4&&ri(this),this.o&&!this.J&&(lt==4?Wg(this.j,this):(this.o=!1,Ga(this)))}else hI(this.g),f==400&&0<q.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),ri(this),Zs(this)}}}catch{}finally{}};function _g(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function KS(a,h){var f=a.C,v=h.indexOf(`
`,f);return v==-1?dh:(f=Number(h.substring(f,v)),isNaN(f)?yg:(v+=1,v+f>h.length?dh:(h=h.slice(v,v+f),a.C=v+f,h)))}ar.prototype.cancel=function(){this.J=!0,ri(this)};function Ga(a){a.S=Date.now()+a.I,wg(a,a.I)}function wg(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Xs(m(a.ba,a),h)}function ph(a){a.B&&(l.clearTimeout(a.B),a.B=null)}ar.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(WS(this.i,this.A),this.L!=2&&(Js(),wt(17)),ri(this),this.s=2,Zs(this)):wg(this,this.S-a)};function Zs(a){a.j.G==0||a.J||Wg(a.j,a)}function ri(a){ph(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,lg(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function mh(a,h){try{var f=a.j;if(f.G!=0&&(f.g==a||gh(f.h,a))){if(!a.K&&gh(f.h,a)&&f.G==3){try{var v=f.Da.g.parse(h)}catch{v=null}if(Array.isArray(v)&&v.length==3){var D=v;if(D[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)il(f),nl(f);else break e;wh(f),wt(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=Xs(m(f.Za,f),6e3));if(1>=Sg(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else si(f,11)}else if((a.K||f.g==a)&&il(f),!_(h))for(D=f.Da.g.parse(h),h=0;h<D.length;h++){let fe=D[h];if(f.T=fe[0],fe=fe[1],f.G==2)if(fe[0]=="c"){f.K=fe[1],f.ia=fe[2];const at=fe[3];at!=null&&(f.la=at,f.j.info("VER="+f.la));const lt=fe[4];lt!=null&&(f.Aa=lt,f.j.info("SVER="+f.Aa));const $i=fe[5];$i!=null&&typeof $i=="number"&&0<$i&&(v=1.5*$i,f.L=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const nn=a.g;if(nn){const ol=nn.g?nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ol){var V=v.h;V.g||ol.indexOf("spdy")==-1&&ol.indexOf("quic")==-1&&ol.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(yh(V,V.h),V.h=null))}if(v.D){const Th=nn.g?nn.g.getResponseHeader("X-HTTP-Session-Id"):null;Th&&(v.ya=Th,Se(v.I,v.D,Th))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),v=f;var q=a;if(v.qa=Gg(v,v.J?v.ia:null,v.W),q.K){Ig(v.h,q);var ve=q,Ye=v.L;Ye&&(ve.I=Ye),ve.B&&(ph(ve),Ga(ve)),v.g=q}else qg(v);0<f.i.length&&rl(f)}else fe[0]!="stop"&&fe[0]!="close"||si(f,7);else f.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?si(f,7):_h(f):fe[0]!="noop"&&f.l&&f.l.ta(fe),f.v=0)}}Js(4)}catch{}}var GS=class{constructor(a,h){this.g=a,this.map=h}};function Eg(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Tg(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Sg(a){return a.h?1:a.g?a.g.size:0}function gh(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function yh(a,h){a.g?a.g.add(h):a.h=h}function Ig(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Eg.prototype.cancel=function(){if(this.i=xg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function xg(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const f of a.g.values())h=h.concat(f.D);return h}return R(a.i)}function JS(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],f=a.length,v=0;v<f;v++)h.push(a[v]);return h}h=[],f=0;for(v in a)h[f++]=a[v];return h}function XS(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var f=0;f<a;f++)h.push(f);return h}h=[],f=0;for(const v in a)h[f++]=v;return h}}}function Ag(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var f=XS(a),v=JS(a),D=v.length,V=0;V<D;V++)h.call(void 0,v[V],f&&f[V],a)}var Cg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function YS(a,h){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var v=a[f].indexOf("="),D=null;if(0<=v){var V=a[f].substring(0,v);D=a[f].substring(v+1)}else V=a[f];h(V,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function ii(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof ii){this.h=a.h,Ja(this,a.j),this.o=a.o,this.g=a.g,Xa(this,a.s),this.l=a.l;var h=a.i,f=new no;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),Rg(this,f),this.m=a.m}else a&&(h=String(a).match(Cg))?(this.h=!1,Ja(this,h[1]||"",!0),this.o=eo(h[2]||""),this.g=eo(h[3]||"",!0),Xa(this,h[4]),this.l=eo(h[5]||"",!0),Rg(this,h[6]||"",!0),this.m=eo(h[7]||"")):(this.h=!1,this.i=new no(null,this.h))}ii.prototype.toString=function(){var a=[],h=this.j;h&&a.push(to(h,kg,!0),":");var f=this.g;return(f||h=="file")&&(a.push("//"),(h=this.o)&&a.push(to(h,kg,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(to(f,f.charAt(0)=="/"?tI:eI,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",to(f,rI)),a.join("")};function Fn(a){return new ii(a)}function Ja(a,h,f){a.j=f?eo(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Xa(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function Rg(a,h,f){h instanceof no?(a.i=h,iI(a.i,a.h)):(f||(h=to(h,nI)),a.i=new no(h,a.h))}function Se(a,h,f){a.i.set(h,f)}function Ya(a){return Se(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function eo(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function to(a,h,f){return typeof a=="string"?(a=encodeURI(a).replace(h,ZS),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function ZS(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var kg=/[#\/\?@]/g,eI=/[#\?:]/g,tI=/[#\?]/g,nI=/[#\?@]/g,rI=/#/g;function no(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function lr(a){a.g||(a.g=new Map,a.h=0,a.i&&YS(a.i,function(h,f){a.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=no.prototype,t.add=function(a,h){lr(this),this.i=null,a=Bi(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(h),this.h+=1,this};function Ng(a,h){lr(a),h=Bi(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Pg(a,h){return lr(a),h=Bi(a,h),a.g.has(h)}t.forEach=function(a,h){lr(this),this.g.forEach(function(f,v){f.forEach(function(D){a.call(h,D,v,this)},this)},this)},t.na=function(){lr(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let v=0;v<h.length;v++){const D=a[v];for(let V=0;V<D.length;V++)f.push(h[v])}return f},t.V=function(a){lr(this);let h=[];if(typeof a=="string")Pg(this,a)&&(h=h.concat(this.g.get(Bi(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)h=h.concat(a[f])}return h},t.set=function(a,h){return lr(this),this.i=null,a=Bi(this,a),Pg(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function bg(a,h,f){Ng(a,h),0<f.length&&(a.i=null,a.g.set(Bi(a,h),R(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var v=h[f];const V=encodeURIComponent(String(v)),q=this.V(v);for(v=0;v<q.length;v++){var D=V;q[v]!==""&&(D+="="+encodeURIComponent(String(q[v]))),a.push(D)}}return this.i=a.join("&")};function Bi(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function iI(a,h){h&&!a.j&&(lr(a),a.i=null,a.g.forEach(function(f,v){var D=v.toLowerCase();v!=D&&(Ng(this,v),bg(this,D,f))},a)),a.j=h}function sI(a,h){const f=new Ys;if(l.Image){const v=new Image;v.onload=x(ur,f,"TestLoadImage: loaded",!0,h,v),v.onerror=x(ur,f,"TestLoadImage: error",!1,h,v),v.onabort=x(ur,f,"TestLoadImage: abort",!1,h,v),v.ontimeout=x(ur,f,"TestLoadImage: timeout",!1,h,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else h(!1)}function oI(a,h){const f=new Ys,v=new AbortController,D=setTimeout(()=>{v.abort(),ur(f,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:v.signal}).then(V=>{clearTimeout(D),V.ok?ur(f,"TestPingServer: ok",!0,h):ur(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),ur(f,"TestPingServer: error",!1,h)})}function ur(a,h,f,v,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),v(f)}catch{}}function aI(){this.g=new $S}function lI(a,h,f){const v=f||"";try{Ag(a,function(D,V){let q=D;c(D)&&(q=ah(D)),h.push(v+V+"="+encodeURIComponent(q))})}catch(D){throw h.push(v+"type="+encodeURIComponent("_badmap")),D}}function Za(a){this.l=a.Ub||null,this.j=a.eb||!1}A(Za,lh),Za.prototype.g=function(){return new el(this.l,this.j)},Za.prototype.i=function(a){return function(){return a}}({});function el(a,h){ot.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(el,ot),t=el.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,io(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ro(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,io(this)),this.g&&(this.readyState=3,io(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dg(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Dg(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?ro(this):io(this),this.readyState==3&&Dg(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,ro(this))},t.Qa=function(a){this.g&&(this.response=a,ro(this))},t.ga=function(){this.g&&ro(this)};function ro(a){a.readyState=4,a.l=null,a.j=null,a.v=null,io(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=h.next();return a.join(`\r
`)};function io(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(el.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Og(a){let h="";return z(a,function(f,v){h+=v,h+=":",h+=f,h+=`\r
`}),h}function vh(a,h,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=Og(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Se(a,h,f))}function De(a){ot.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(De,ot);var uI=/^https?$/i,cI=["POST","PUT"];t=De.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hh.g(),this.v=this.o?ug(this.o):ug(hh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(V){Lg(this,V);return}if(a=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var D in v)f.set(D,v[D]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const V of v.keys())f.set(V,v.get(V));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),D=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(cI,h,void 0))||v||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,q]of f)this.g.setRequestHeader(V,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fg(this),this.u=!0,this.g.send(a),this.u=!1}catch(V){Lg(this,V)}};function Lg(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Vg(a),tl(a)}function Vg(a){a.A||(a.A=!0,_t(a,"complete"),_t(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,_t(this,"complete"),_t(this,"abort"),tl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tl(this,!0)),De.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Mg(this):this.bb())},t.bb=function(){Mg(this)};function Mg(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Un(a)!=4||a.Z()!=2)){if(a.u&&Un(a)==4)sg(a.Ea,0,a);else if(_t(a,"readystatechange"),Un(a)==4){a.h=!1;try{const q=a.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var v;if(v=q===0){var D=String(a.D).match(Cg)[1]||null;!D&&l.self&&l.self.location&&(D=l.self.location.protocol.slice(0,-1)),v=!uI.test(D?D.toLowerCase():"")}f=v}if(f)_t(a,"complete"),_t(a,"success");else{a.m=6;try{var V=2<Un(a)?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.Z()+"]",Vg(a)}}finally{tl(a)}}}}function tl(a,h){if(a.g){Fg(a);const f=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||_t(a,"ready");try{f.onreadystatechange=v}catch{}}}function Fg(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Un(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),jS(h)}};function Ug(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function hI(a){const h={};a=(a.g&&2<=Un(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(_(a[v]))continue;var f=S(a[v]);const D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=h[D]||[];h[D]=V,V.push(f)}w(h,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function so(a,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||h}function zg(a){this.Aa=0,this.i=[],this.j=new Ys,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=so("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=so("baseRetryDelayMs",5e3,a),this.cb=so("retryDelaySeedMs",1e4,a),this.Wa=so("forwardChannelMaxRetries",2,a),this.wa=so("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Eg(a&&a.concurrentRequestLimit),this.Da=new aI,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=zg.prototype,t.la=8,t.G=1,t.connect=function(a,h,f,v){wt(0),this.W=a,this.H=h||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.I=Gg(this,null,this.W),rl(this)};function _h(a){if(Bg(a),a.G==3){var h=a.U++,f=Fn(a.I);if(Se(f,"SID",a.K),Se(f,"RID",h),Se(f,"TYPE","terminate"),oo(a,f),h=new ar(a,a.j,h),h.L=2,h.v=Ya(Fn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=h.v,f=!0),f||(h.g=Jg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ga(h)}Kg(a)}function nl(a){a.g&&(Eh(a),a.g.cancel(),a.g=null)}function Bg(a){nl(a),a.u&&(l.clearTimeout(a.u),a.u=null),il(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function rl(a){if(!Tg(a.h)&&!a.s){a.s=!0;var h=a.Ga;Rt||ee(),H||(Rt(),H=!0),X.add(h,a),a.B=0}}function dI(a,h){return Sg(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Xs(m(a.Ga,a,h),Qg(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const D=new ar(this,this.j,a);let V=this.o;if(this.S&&(V?(V=y(V),k(V,this.S)):V=this.S),this.m!==null||this.O||(D.H=V,V=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(h+=v,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=$g(this,D,h),f=Fn(this.I),Se(f,"RID",a),Se(f,"CVER",22),this.D&&Se(f,"X-HTTP-Session-Id",this.D),oo(this,f),V&&(this.O?h="headers="+encodeURIComponent(String(Og(V)))+"&"+h:this.m&&vh(f,this.m,V)),yh(this.h,D),this.Ua&&Se(f,"TYPE","init"),this.P?(Se(f,"$req",h),Se(f,"SID","null"),D.T=!0,fh(D,f,null)):fh(D,f,h),this.G=2}}else this.G==3&&(a?jg(this,a):this.i.length==0||Tg(this.h)||jg(this))};function jg(a,h){var f;h?f=h.l:f=a.U++;const v=Fn(a.I);Se(v,"SID",a.K),Se(v,"RID",f),Se(v,"AID",a.T),oo(a,v),a.m&&a.o&&vh(v,a.m,a.o),f=new ar(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),h&&(a.i=h.D.concat(a.i)),h=$g(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),yh(a.h,f),fh(f,v,h)}function oo(a,h){a.H&&z(a.H,function(f,v){Se(h,v,f)}),a.l&&Ag({},function(f,v){Se(h,v,f)})}function $g(a,h,f){f=Math.min(a.i.length,f);var v=a.l?m(a.l.Na,a.l,a):null;e:{var D=a.i;let V=-1;for(;;){const q=["count="+f];V==-1?0<f?(V=D[0].g,q.push("ofs="+V)):V=0:q.push("ofs="+V);let ve=!0;for(let Ye=0;Ye<f;Ye++){let fe=D[Ye].g;const at=D[Ye].map;if(fe-=V,0>fe)V=Math.max(0,D[Ye].g-100),ve=!1;else try{lI(at,q,"req"+fe+"_")}catch{v&&v(at)}}if(ve){v=q.join("&");break e}}}return a=a.i.splice(0,f),h.D=a,v}function qg(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;Rt||ee(),H||(Rt(),H=!0),X.add(h,a),a.v=0}}function wh(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Xs(m(a.Fa,a),Qg(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Hg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Xs(m(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),nl(this),Hg(this))};function Eh(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Hg(a){a.g=new ar(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Fn(a.qa);Se(h,"RID","rpc"),Se(h,"SID",a.K),Se(h,"AID",a.T),Se(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&Se(h,"TO",a.ja),Se(h,"TYPE","xmlhttp"),oo(a,h),a.m&&a.o&&vh(h,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=Ya(Fn(h)),f.m=null,f.P=!0,vg(f,a)}t.Za=function(){this.C!=null&&(this.C=null,nl(this),wh(this),wt(19))};function il(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Wg(a,h){var f=null;if(a.g==h){il(a),Eh(a),a.g=null;var v=2}else if(gh(a.h,h))f=h.D,Ig(a.h,h),v=1;else return;if(a.G!=0){if(h.o)if(v==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var D=a.B;v=Wa(),_t(v,new pg(v,f)),rl(a)}else qg(a);else if(D=h.s,D==3||D==0&&0<h.X||!(v==1&&dI(a,h)||v==2&&wh(a)))switch(f&&0<f.length&&(h=a.h,h.i=h.i.concat(f)),D){case 1:si(a,5);break;case 4:si(a,10);break;case 3:si(a,6);break;default:si(a,2)}}}function Qg(a,h){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*h}function si(a,h){if(a.j.info("Error code "+h),h==2){var f=m(a.fb,a),v=a.Xa;const D=!v;v=new ii(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ja(v,"https"),Ya(v),D?sI(v.toString(),f):oI(v.toString(),f)}else wt(2);a.G=0,a.l&&a.l.sa(h),Kg(a),Bg(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Kg(a){if(a.G=0,a.ka=[],a.l){const h=xg(a.h);(h.length!=0||a.i.length!=0)&&(I(a.ka,h),I(a.ka,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.ra()}}function Gg(a,h,f){var v=f instanceof ii?Fn(f):new ii(f);if(v.g!="")h&&(v.g=h+"."+v.g),Xa(v,v.s);else{var D=l.location;v=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var V=new ii(null);v&&Ja(V,v),h&&(V.g=h),D&&Xa(V,D),f&&(V.l=f),v=V}return f=a.D,h=a.ya,f&&h&&Se(v,f,h),Se(v,"VER",a.la),oo(a,v),v}function Jg(a,h,f){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new De(new Za({eb:f})):new De(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xg(){}t=Xg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function sl(){}sl.prototype.g=function(a,h){return new Ft(a,h)};function Ft(a,h){ot.call(this),this.g=new zg(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!_(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!_(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new ji(this)}A(Ft,ot),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){_h(this.g)},Ft.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=ah(a),a=f);h.i.push(new GS(h.Ya++,a)),h.G==3&&rl(h)},Ft.prototype.N=function(){this.g.l=null,delete this.j,_h(this.g),delete this.g,Ft.aa.N.call(this)};function Yg(a){uh.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const f in h){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}A(Yg,uh);function Zg(){ch.call(this),this.status=1}A(Zg,ch);function ji(a){this.g=a}A(ji,Xg),ji.prototype.ua=function(){_t(this.g,"a")},ji.prototype.ta=function(a){_t(this.g,new Yg(a))},ji.prototype.sa=function(a){_t(this.g,new Zg)},ji.prototype.ra=function(){_t(this.g,"b")},sl.prototype.createWebChannel=sl.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,zE=function(){return new sl},UE=function(){return Wa()},FE=ni,If={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qa.NO_ERROR=0,Qa.TIMEOUT=8,Qa.HTTP_ERROR=6,Yl=Qa,mg.COMPLETE="complete",ME=mg,cg.EventType=Gs,Gs.OPEN="a",Gs.CLOSE="b",Gs.ERROR="c",Gs.MESSAGE="d",ot.prototype.listen=ot.prototype.K,Co=cg,De.prototype.listenOnce=De.prototype.L,De.prototype.getLastError=De.prototype.Ka,De.prototype.getLastErrorCode=De.prototype.Ba,De.prototype.getStatus=De.prototype.Z,De.prototype.getResponseJson=De.prototype.Oa,De.prototype.getResponseText=De.prototype.oa,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Ha,VE=De}).apply(typeof xl<"u"?xl:typeof self<"u"?self:typeof window<"u"?window:{});const K0="@firebase/firestore",G0="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bs="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci=new Yp("@firebase/firestore");function Ki(){return Ci.logLevel}function Q(t,...e){if(Ci.logLevel<=ae.DEBUG){const n=e.map(um);Ci.debug(`Firestore (${Bs}): ${t}`,...n)}}function rr(t,...e){if(Ci.logLevel<=ae.ERROR){const n=e.map(um);Ci.error(`Firestore (${Bs}): ${t}`,...n)}}function ks(t,...e){if(Ci.logLevel<=ae.WARN){const n=e.map(um);Ci.warn(`Firestore (${Bs}): ${t}`,...n)}}function um(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,BE(t,r,n)}function BE(t,e,n){let r=`FIRESTORE (${Bs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw rr(r),new Error(r)}function ge(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||BE(e,i,r)}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends Vn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dt.UNAUTHENTICATED))}shutdown(){}}class mP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class gP{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ge(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Jn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Jn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Jn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string",31837,{l:r}),new jE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new dt(e)}}class yP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new yP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class J0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _P{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Bt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ge(this.o===void 0,3512);const r=s=>{s.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new J0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new J0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=wP(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function le(t,e){return t<e?-1:t>e?1:0}function xf(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return id(i)===id(s)?le(i,s):id(i)?1:-1}return le(t.length,e.length)}const EP=55296,TP=57343;function id(t){const e=t.charCodeAt(0);return e>=EP&&e<=TP}function Ns(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="__name__";class Tn{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Z(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Tn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Tn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Tn.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return le(e.length,n.length)}static compareSegments(e,n){const r=Tn.isNumericId(e),i=Tn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Tn.extractNumericId(e).compare(Tn.extractNumericId(n)):xf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Vr.fromString(e.substring(4,e.length-2))}}class Ee extends Tn{construct(e,n,r){return new Ee(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ee(n)}static emptyPath(){return new Ee([])}}const SP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tt extends Tn{construct(e,n,r){return new tt(e,n,r)}static isValidIdentifier(e){return SP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===X0}static keyField(){return new tt([X0])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new W(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new W(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new W(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new W(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tt(n)}static emptyPath(){return new tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(Ee.fromString(e))}static fromName(e){return new G(Ee.fromString(e).popFirst(5))}static empty(){return new G(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new Ee(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(t,e,n){if(!n)throw new W(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function IP(t,e,n,r){if(e===!0&&r===!0)throw new W(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Y0(t){if(!G.isDocumentKey(t))throw new W(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Z0(t){if(G.isDocumentKey(t))throw new W(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function qE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Nc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z(12329,{type:typeof t})}function It(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nc(t);throw new W(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(t,e){const n={typeString:t};return e&&(n.value=e),n}function ba(t,e){if(!qE(t))throw new W(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new W(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev=-62135596800,tv=1e6;class _e{static now(){return _e.fromMillis(Date.now())}static fromDate(e){return _e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*tv);return new _e(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ev)throw new W(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tv}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ba(e,_e._jsonSchema))return new _e(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ev;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_e._jsonSchemaVersion="firestore/timestamp/1.0",_e._jsonSchema={type:qe("string",_e._jsonSchemaVersion),seconds:qe("number"),nanoseconds:qe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{static fromTimestamp(e){return new te(e)}static min(){return new te(new _e(0,0))}static max(){return new te(new _e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=-1;function xP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new _e(n+1,0):new _e(n,r));return new Br(i,G.empty(),e)}function AP(t){return new Br(t.readTime,t.key,fa)}class Br{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Br(te.min(),G.empty(),fa)}static max(){return new Br(te.max(),G.empty(),fa)}}function CP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function js(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==RP)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(i=>i?j.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new j((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(d=>{o[c]=d,++l,l===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new j((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function NP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function $s(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Pc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm=-1;function bc(t){return t==null}function qu(t){return t===0&&1/t==-1/0}function PP(t){return typeof t=="number"&&Number.isInteger(t)&&!qu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="";function bP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=nv(e)),e=DP(t.get(n),e);return nv(e)}function DP(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case HE:n+="";break;default:n+=s}}return n}function nv(t){return t+HE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function WE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){this.comparator=e,this.root=n||et.EMPTY}insert(e,n){return new be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,et.BLACK,null,null))}remove(e){return new be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Al(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Al(this.root,e,this.comparator,!1)}getReverseIterator(){return new Al(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Al(this.root,e,this.comparator,!0)}}class Al{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class et{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??et.RED,this.left=i??et.EMPTY,this.right=s??et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new et(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return et.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Z(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Z(27949);return e+(this.isRed()?0:1)}}et.EMPTY=null,et.RED=!0,et.BLACK=!1;et.EMPTY=new class{constructor(){this.size=0}get key(){throw Z(57766)}get value(){throw Z(16141)}get color(){throw Z(16727)}get left(){throw Z(29726)}get right(){throw Z(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new et(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new iv(this.data.getIterator())}getIteratorFrom(e){return new iv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ke)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ke(this.comparator);return n.data=e,n}}class iv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.fields=e,e.sort(tt.comparator)}static empty(){return new $t([])}unionWith(e){let n=new Ke(tt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new $t(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ns(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new QE("Invalid base64 string: "+s):s}}(e);return new it(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new it(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}it.EMPTY_BYTE_STRING=new it("");const OP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jr(t){if(ge(!!t,39018),typeof t=="string"){let e=0;const n=OP.exec(t);if(ge(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(t.seconds),nanos:Me(t.nanos)}}function Me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $r(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="server_timestamp",GE="__type__",JE="__previous_value__",XE="__local_write_time__";function dm(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[GE])==null?void 0:r.stringValue)===KE}function Dc(t){const e=t.mapValue.fields[JE];return dm(e)?Dc(e):e}function pa(t){const e=jr(t.mapValue.fields[XE].timestampValue);return new _e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,n,r,i,s,o,l,u,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=d}}const Hu="(default)";class ma{constructor(e,n){this.projectId=e,this.database=n||Hu}static empty(){return new ma("","")}get isDefaultDatabase(){return this.database===Hu}isEqual(e){return e instanceof ma&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="__type__",ZE="__max__",Cl={mapValue:{fields:{__type__:{stringValue:ZE}}}},eT="__vector__",Wu="value";function qr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?dm(t)?4:MP(t)?9007199254740991:VP(t)?10:11:Z(28295,{value:t})}function Dn(t,e){if(t===e)return!0;const n=qr(t);if(n!==qr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return pa(t).isEqual(pa(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=jr(i.timestampValue),l=jr(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return $r(i.bytesValue).isEqual($r(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Me(i.geoPointValue.latitude)===Me(s.geoPointValue.latitude)&&Me(i.geoPointValue.longitude)===Me(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Me(i.integerValue)===Me(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Me(i.doubleValue),l=Me(s.doubleValue);return o===l?qu(o)===qu(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ns(t.arrayValue.values||[],e.arrayValue.values||[],Dn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(rv(o)!==rv(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Dn(o[u],l[u])))return!1;return!0}(t,e);default:return Z(52216,{left:t})}}function ga(t,e){return(t.values||[]).find(n=>Dn(n,e))!==void 0}function Ps(t,e){if(t===e)return 0;const n=qr(t),r=qr(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Me(s.integerValue||s.doubleValue),u=Me(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return sv(t.timestampValue,e.timestampValue);case 4:return sv(pa(t),pa(e));case 5:return xf(t.stringValue,e.stringValue);case 6:return function(s,o){const l=$r(s),u=$r(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const d=le(l[c],u[c]);if(d!==0)return d}return le(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=le(Me(s.latitude),Me(o.latitude));return l!==0?l:le(Me(s.longitude),Me(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ov(t.arrayValue,e.arrayValue);case 10:return function(s,o){var m,x,A,R;const l=s.fields||{},u=o.fields||{},c=(m=l[Wu])==null?void 0:m.arrayValue,d=(x=u[Wu])==null?void 0:x.arrayValue,p=le(((A=c==null?void 0:c.values)==null?void 0:A.length)||0,((R=d==null?void 0:d.values)==null?void 0:R.length)||0);return p!==0?p:ov(c,d)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Cl.mapValue&&o===Cl.mapValue)return 0;if(s===Cl.mapValue)return 1;if(o===Cl.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),c=o.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let p=0;p<u.length&&p<d.length;++p){const m=xf(u[p],d[p]);if(m!==0)return m;const x=Ps(l[u[p]],c[d[p]]);if(x!==0)return x}return le(u.length,d.length)}(t.mapValue,e.mapValue);default:throw Z(23264,{he:n})}}function sv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=jr(t),r=jr(e),i=le(n.seconds,r.seconds);return i!==0?i:le(n.nanos,r.nanos)}function ov(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ps(n[i],r[i]);if(s)return s}return le(n.length,r.length)}function bs(t){return Af(t)}function Af(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=jr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return $r(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Af(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Af(n.fields[o])}`;return i+"}"}(t.mapValue):Z(61005,{value:t})}function Zl(t){switch(qr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Dc(t);return e?16+Zl(e):16;case 5:return 2*t.stringValue.length;case 6:return $r(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Zl(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Zr(r.fields,(s,o)=>{i+=s.length+Zl(o)}),i}(t.mapValue);default:throw Z(13486,{value:t})}}function av(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Cf(t){return!!t&&"integerValue"in t}function fm(t){return!!t&&"arrayValue"in t}function lv(t){return!!t&&"nullValue"in t}function uv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function eu(t){return!!t&&"mapValue"in t}function VP(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[YE])==null?void 0:r.stringValue)===eT}function jo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Zr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=jo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=jo(t.arrayValue.values[n]);return e}return{...t}}function MP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ZE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.value=e}static empty(){return new bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!eu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=jo(n)}setAll(e){let n=tt.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=jo(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());eu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Dn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];eu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Zr(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new bt(jo(this.value))}}function tT(t){const e=[];return Zr(t.fields,(n,r)=>{const i=new tt([n]);if(eu(r)){const s=tT(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new $t(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new pt(e,0,te.min(),te.min(),te.min(),bt.empty(),0)}static newFoundDocument(e,n,r,i){return new pt(e,1,n,te.min(),r,i,0)}static newNoDocument(e,n){return new pt(e,2,n,te.min(),te.min(),bt.empty(),0)}static newUnknownDocument(e,n){return new pt(e,3,n,te.min(),te.min(),bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n){this.position=e,this.inclusive=n}}function cv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=Ps(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function hv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Dn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n="asc"){this.field=e,this.dir=n}}function FP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{}class $e extends nT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new zP(e,n,r):n==="array-contains"?new $P(e,r):n==="in"?new qP(e,r):n==="not-in"?new HP(e,r):n==="array-contains-any"?new WP(e,r):new $e(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new BP(e,r):new jP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ps(n,this.value)):n!==null&&qr(this.value)===qr(n)&&this.matchesComparison(Ps(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gn extends nT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new gn(e,n)}matches(e){return rT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function rT(t){return t.op==="and"}function iT(t){return UP(t)&&rT(t)}function UP(t){for(const e of t.filters)if(e instanceof gn)return!1;return!0}function Rf(t){if(t instanceof $e)return t.field.canonicalString()+t.op.toString()+bs(t.value);if(iT(t))return t.filters.map(e=>Rf(e)).join(",");{const e=t.filters.map(n=>Rf(n)).join(",");return`${t.op}(${e})`}}function sT(t,e){return t instanceof $e?function(r,i){return i instanceof $e&&r.op===i.op&&r.field.isEqual(i.field)&&Dn(r.value,i.value)}(t,e):t instanceof gn?function(r,i){return i instanceof gn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&sT(o,i.filters[l]),!0):!1}(t,e):void Z(19439)}function oT(t){return t instanceof $e?function(n){return`${n.field.canonicalString()} ${n.op} ${bs(n.value)}`}(t):t instanceof gn?function(n){return n.op.toString()+" {"+n.getFilters().map(oT).join(" ,")+"}"}(t):"Filter"}class zP extends $e{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class BP extends $e{constructor(e,n){super(e,"in",n),this.keys=aT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class jP extends $e{constructor(e,n){super(e,"not-in",n),this.keys=aT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function aT(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class $P extends $e{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return fm(n)&&ga(n.arrayValue,this.value)}}class qP extends $e{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ga(this.value.arrayValue,n)}}class HP extends $e{constructor(e,n){super(e,"not-in",n)}matches(e){if(ga(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ga(this.value.arrayValue,n)}}class WP extends $e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!fm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ga(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function dv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new QP(t,e,n,r,i,s,o)}function pm(t){const e=ne(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Rf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),bc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>bs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>bs(r)).join(",")),e.Te=n}return e.Te}function mm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!FP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hv(t.startAt,e.startAt)&&hv(t.endAt,e.endAt)}function kf(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function KP(t,e,n,r,i,s,o,l){return new qs(t,e,n,r,i,s,o,l)}function Oc(t){return new qs(t)}function fv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function lT(t){return t.collectionGroup!==null}function $o(t){const e=ne(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ke(tt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new ya(s,r))}),n.has(tt.keyField().canonicalString())||e.Ie.push(new ya(tt.keyField(),r))}return e.Ie}function kn(t){const e=ne(t);return e.Ee||(e.Ee=GP(e,$o(t))),e.Ee}function GP(t,e){if(t.limitType==="F")return dv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ya(i.field,s)});const n=t.endAt?new Qu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Qu(t.startAt.position,t.startAt.inclusive):null;return dv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Nf(t,e){const n=t.filters.concat([e]);return new qs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Pf(t,e,n){return new qs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Lc(t,e){return mm(kn(t),kn(e))&&t.limitType===e.limitType}function uT(t){return`${pm(kn(t))}|lt:${t.limitType}`}function Gi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>oT(i)).join(", ")}]`),bc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>bs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>bs(i)).join(",")),`Target(${r})`}(kn(t))}; limitType=${t.limitType})`}function Vc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):G.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of $o(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const c=cv(o,l,u);return o.inclusive?c<=0:c<0}(r.startAt,$o(r),i)||r.endAt&&!function(o,l,u){const c=cv(o,l,u);return o.inclusive?c>=0:c>0}(r.endAt,$o(r),i))}(t,e)}function JP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function cT(t){return(e,n)=>{let r=!1;for(const i of $o(t)){const s=XP(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function XP(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),c=l.data.field(s);return u!==null&&c!==null?Ps(u,c):Z(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Zr(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return WE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=new be(G.comparator);function ir(){return YP}const hT=new be(G.comparator);function Ro(...t){let e=hT;for(const n of t)e=e.insert(n.key,n);return e}function dT(t){let e=hT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function di(){return qo()}function fT(){return qo()}function qo(){return new Vi(t=>t.toString(),(t,e)=>t.isEqual(e))}const ZP=new be(G.comparator),eb=new Ke(G.comparator);function ue(...t){let e=eb;for(const n of t)e=e.add(n);return e}const tb=new Ke(le);function nb(){return tb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qu(e)?"-0":e}}function pT(t){return{integerValue:""+t}}function rb(t,e){return PP(e)?pT(e):gm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(){this._=void 0}}function ib(t,e,n){return t instanceof Ku?function(i,s){const o={fields:{[GE]:{stringValue:KE},[XE]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&dm(s)&&(s=Dc(s)),s&&(o.fields[JE]=s),{mapValue:o}}(n,e):t instanceof va?gT(t,e):t instanceof _a?yT(t,e):function(i,s){const o=mT(i,s),l=pv(o)+pv(i.Ae);return Cf(o)&&Cf(i.Ae)?pT(l):gm(i.serializer,l)}(t,e)}function sb(t,e,n){return t instanceof va?gT(t,e):t instanceof _a?yT(t,e):n}function mT(t,e){return t instanceof Gu?function(r){return Cf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ku extends Mc{}class va extends Mc{constructor(e){super(),this.elements=e}}function gT(t,e){const n=vT(e);for(const r of t.elements)n.some(i=>Dn(i,r))||n.push(r);return{arrayValue:{values:n}}}class _a extends Mc{constructor(e){super(),this.elements=e}}function yT(t,e){let n=vT(e);for(const r of t.elements)n=n.filter(i=>!Dn(i,r));return{arrayValue:{values:n}}}class Gu extends Mc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function pv(t){return Me(t.integerValue||t.doubleValue)}function vT(t){return fm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function ob(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof va&&i instanceof va||r instanceof _a&&i instanceof _a?Ns(r.elements,i.elements,Dn):r instanceof Gu&&i instanceof Gu?Dn(r.Ae,i.Ae):r instanceof Ku&&i instanceof Ku}(t.transform,e.transform)}class ab{constructor(e,n){this.version=e,this.transformResults=n}}class xt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xt}static exists(e){return new xt(void 0,e)}static updateTime(e){return new xt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fc{}function _T(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Uc(t.key,xt.none()):new Da(t.key,t.data,xt.none());{const n=t.data,r=bt.empty();let i=new Ke(tt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ei(t.key,r,new $t(i.toArray()),xt.none())}}function lb(t,e,n){t instanceof Da?function(i,s,o){const l=i.value.clone(),u=gv(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ei?function(i,s,o){if(!tu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=gv(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(wT(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ho(t,e,n,r){return t instanceof Da?function(s,o,l,u){if(!tu(s.precondition,o))return l;const c=s.value.clone(),d=yv(s.fieldTransforms,u,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ei?function(s,o,l,u){if(!tu(s.precondition,o))return l;const c=yv(s.fieldTransforms,u,o),d=o.data;return d.setAll(wT(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,l){return tu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function ub(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=mT(r.transform,i||null);s!=null&&(n===null&&(n=bt.empty()),n.set(r.field,s))}return n||null}function mv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ns(r,i,(s,o)=>ob(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Da extends Fc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ei extends Fc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function wT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function gv(t,e,n){const r=new Map;ge(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,sb(o,l,n[i]))}return r}function yv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,ib(s,o,e))}return r}class Uc extends Fc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cb extends Fc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&lb(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ho(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ho(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=fT();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=_T(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&Ns(this.mutations,e.mutations,(n,r)=>mv(n,r))&&Ns(this.baseMutations,e.baseMutations,(n,r)=>mv(n,r))}}class ym{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ge(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return ZP}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new ym(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be,he;function pb(t){switch(t){case B.OK:return Z(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return Z(15467,{code:t})}}function ET(t){if(t===void 0)return rr("GRPC error has no .code"),B.UNKNOWN;switch(t){case Be.OK:return B.OK;case Be.CANCELLED:return B.CANCELLED;case Be.UNKNOWN:return B.UNKNOWN;case Be.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Be.INTERNAL:return B.INTERNAL;case Be.UNAVAILABLE:return B.UNAVAILABLE;case Be.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Be.NOT_FOUND:return B.NOT_FOUND;case Be.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Be.ABORTED:return B.ABORTED;case Be.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Be.DATA_LOSS:return B.DATA_LOSS;default:return Z(39323,{code:t})}}(he=Be||(Be={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mb(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb=new Vr([4294967295,4294967295],0);function vv(t){const e=mb().encode(t),n=new LE;return n.update(e),new Uint8Array(n.digest())}function _v(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Vr([n,r],0),new Vr([i,s],0)]}class vm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ko(`Invalid padding: ${n}`);if(r<0)throw new ko(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ko(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ko(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Vr.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Vr.fromNumber(r)));return i.compare(gb)===1&&(i=new Vr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=vv(e),[r,i]=_v(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new vm(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=vv(e),[r,i]=_v(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ko extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Oa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new zc(te.min(),i,new be(le),ir(),ue())}}class Oa{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Oa(r,n,ue(),ue(),ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class TT{constructor(e,n){this.targetId=e,this.Ce=n}}class ST{constructor(e,n,r=it.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class wv{constructor(){this.ve=0,this.Fe=Ev(),this.Me=it.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ue(),n=ue(),r=ue();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Z(38017,{changeType:s})}}),new Oa(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Ev()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class yb{constructor(e){this.Ge=e,this.ze=new Map,this.je=ir(),this.Je=Rl(),this.He=Rl(),this.Ye=new be(le)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Z(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(kf(s))if(r===0){const o=new G(s.path);this.et(n,o,pt.newNoDocument(o,te.min()))}else ge(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=$r(r).toUint8Array()}catch(u){if(u instanceof QE)return ks("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new vm(o,i,s)}catch(u){return ks(u instanceof ko?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&kf(l.target)){const u=new G(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,pt.newNoDocument(u,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=ue();this.He.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new zc(e,n,this.Ye,this.je,r);return this.je=ir(),this.Je=Rl(),this.He=Rl(),this.Ye=new be(le),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new wv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ke(le),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ke(le),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new wv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Rl(){return new be(G.comparator)}function Ev(){return new be(G.comparator)}const vb=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),_b=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),wb=(()=>({and:"AND",or:"OR"}))();class Eb{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function bf(t,e){return t.useProto3Json||bc(e)?e:{value:e}}function Ju(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Tb(t,e){return Ju(t,e.toTimestamp())}function Nn(t){return ge(!!t,49232),te.fromTimestamp(function(n){const r=jr(n);return new _e(r.seconds,r.nanos)}(t))}function _m(t,e){return Df(t,e).canonicalString()}function Df(t,e){const n=function(i){return new Ee(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function xT(t){const e=Ee.fromString(t);return ge(NT(e),10190,{key:e.toString()}),e}function Of(t,e){return _m(t.databaseId,e.path)}function sd(t,e){const n=xT(e);if(n.get(1)!==t.databaseId.projectId)throw new W(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(CT(n))}function AT(t,e){return _m(t.databaseId,e)}function Sb(t){const e=xT(t);return e.length===4?Ee.emptyPath():CT(e)}function Lf(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function CT(t){return ge(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Tv(t,e,n){return{name:Of(t,e),fields:n.value.mapValue.fields}}function Ib(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Z(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(ge(d===void 0||typeof d=="string",58123),it.fromBase64String(d||"")):(ge(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),it.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const d=c.code===void 0?B.UNKNOWN:ET(c.code);return new W(d,c.message||"")}(o);n=new ST(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=sd(t,r.document.name),s=Nn(r.document.updateTime),o=r.document.createTime?Nn(r.document.createTime):te.min(),l=new bt({mapValue:{fields:r.document.fields}}),u=pt.newFoundDocument(i,s,o,l),c=r.targetIds||[],d=r.removedTargetIds||[];n=new nu(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=sd(t,r.document),s=r.readTime?Nn(r.readTime):te.min(),o=pt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new nu([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=sd(t,r.document),s=r.removedTargetIds||[];n=new nu([],s,i,null)}else{if(!("filter"in e))return Z(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new fb(i,s),l=r.targetId;n=new TT(l,o)}}return n}function xb(t,e){let n;if(e instanceof Da)n={update:Tv(t,e.key,e.value)};else if(e instanceof Uc)n={delete:Of(t,e.key)};else if(e instanceof ei)n={update:Tv(t,e.key,e.data),updateMask:Ob(e.fieldMask)};else{if(!(e instanceof cb))return Z(16599,{Vt:e.type});n={verify:Of(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof Ku)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof va)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof _a)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Gu)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw Z(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Tb(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Z(27497)}(t,e.precondition)),n}function Ab(t,e){return t&&t.length>0?(ge(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?Nn(i.updateTime):Nn(s);return o.isEqual(te.min())&&(o=Nn(s)),new ab(o,i.transformResults||[])}(n,e))):[]}function Cb(t,e){return{documents:[AT(t,e.path)]}}function Rb(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=AT(t,i);const s=function(c){if(c.length!==0)return kT(gn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(m){return{field:Ji(m.field),direction:Pb(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=bf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:i}}function kb(t){let e=Sb(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ge(r===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(p){const m=RT(p);return m instanceof gn&&iT(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(A){return new ya(Xi(A.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,bc(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){const m=!!p.before,x=p.values||[];return new Qu(x,m)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const m=!p.before,x=p.values||[];return new Qu(x,m)}(n.endAt)),KP(e,i,o,s,l,"F",u,c)}function Nb(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function RT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Xi(n.unaryFilter.field);return $e.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Xi(n.unaryFilter.field);return $e.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Xi(n.unaryFilter.field);return $e.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Xi(n.unaryFilter.field);return $e.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Z(61313);default:return Z(60726)}}(t):t.fieldFilter!==void 0?function(n){return $e.create(Xi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Z(58110);default:return Z(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return gn.create(n.compositeFilter.filters.map(r=>RT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z(1026)}}(n.compositeFilter.op))}(t):Z(30097,{filter:t})}function Pb(t){return vb[t]}function bb(t){return _b[t]}function Db(t){return wb[t]}function Ji(t){return{fieldPath:t.canonicalString()}}function Xi(t){return tt.fromServerFormat(t.fieldPath)}function kT(t){return t instanceof $e?function(n){if(n.op==="=="){if(uv(n.value))return{unaryFilter:{field:Ji(n.field),op:"IS_NAN"}};if(lv(n.value))return{unaryFilter:{field:Ji(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(uv(n.value))return{unaryFilter:{field:Ji(n.field),op:"IS_NOT_NAN"}};if(lv(n.value))return{unaryFilter:{field:Ji(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ji(n.field),op:bb(n.op),value:n.value}}}(t):t instanceof gn?function(n){const r=n.getFilters().map(i=>kT(i));return r.length===1?r[0]:{compositeFilter:{op:Db(n.op),filters:r}}}(t):Z(54877,{filter:t})}function Ob(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function NT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n,r,i,s=te.min(),o=te.min(),l=it.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e){this.yt=e}}function Vb(t){const e=kb({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Pf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(){this.Cn=new Fb}addToCollectionParentIndex(e,n){return this.Cn.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(Br.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(Br.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class Fb{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ke(Ee.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ke(Ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},PT=41943040;class Nt{static withCacheSize(e){return new Nt(e,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nt.DEFAULT_COLLECTION_PERCENTILE=10,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nt.DEFAULT=new Nt(PT,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nt.DISABLED=new Nt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ds(0)}static cr(){return new Ds(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv="LruGarbageCollector",Ub=1048576;function xv([t,e],[n,r]){const i=le(t,n);return i===0?le(e,r):i}class zb{constructor(e){this.Ir=e,this.buffer=new Ke(xv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();xv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Bb{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Q(Iv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){$s(n)?Q(Iv,"Ignoring IndexedDB error during garbage collection: ",n):await js(n)}await this.Vr(3e5)})}}class jb{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return j.resolve(Pc.ce);const r=new zb(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(Sv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Sv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,l,u,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(s=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(c=Date.now(),Ki()<=ae.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(c-u)+`ms
Total Duration: ${c-d}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}function $b(t,e){return new jb(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(){this.changes=new Vi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ho(r.mutation,i,$t.empty(),_e.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ue()){const i=di();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ro();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=di();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ue()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=ir();const o=qo(),l=function(){return qo()}();return n.forEach((u,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof ei)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Ho(d.mutation,c,d.mutation.getFieldMask(),_e.now())):o.set(c.key,$t.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>l.set(c,new Hb(d,o.get(c)??null))),l))}recalculateAndSaveOverlays(e,n){const r=qo();let i=new be((o,l)=>o-l),s=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let d=r.get(u)||$t.empty();d=l.applyToLocalView(c,d),r.set(u,d);const p=(i.get(l.batchId)||ue()).add(u);i=i.insert(l.batchId,p)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,d=u.value,p=fT();d.forEach(m=>{if(!s.has(m)){const x=_T(n.get(m),r.get(m));x!==null&&p.set(m,x),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,p))}return j.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):lT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):j.resolve(di());let l=fa,u=s;return o.next(c=>j.forEach(c,(d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(d)?j.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,ue())).next(d=>({batchId:l,changes:dT(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let i=Ro();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ro();return this.indexManager.getCollectionParents(e,s).next(l=>j.forEach(l,u=>{const c=function(p,m){return new qs(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,pt.newInvalidDocument(d)))});let l=Ro();return o.forEach((u,c)=>{const d=s.get(u);d!==void 0&&Ho(d.mutation,c,$t.empty(),_e.now()),Vc(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return j.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Nn(i.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:Vb(i.bundledQuery),readTime:Nn(i.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(){this.overlays=new be(G.comparator),this.qr=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=di();return j.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const i=di(),s=n.length+1,o=new G(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return j.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new be((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=di(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const l=di(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>l.set(c,d)),!(l.size()>=i)););return j.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new db(n,r));let s=this.qr.get(n);s===void 0&&(s=ue(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(){this.Qr=new Ke(Ge.$r),this.Ur=new Ke(Ge.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ge(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ge(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new G(new Ee([])),r=new Ge(n,e),i=new Ge(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new G(new Ee([])),r=new Ge(n,e),i=new Ge(n,e+1);let s=ue();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ge(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ge{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return G.comparator(e.key,n.key)||le(e.Yr,n.Yr)}static Kr(e,n){return le(e.Yr,n.Yr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ke(Ge.$r)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new hb(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.Zr=this.Zr.add(new Ge(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?hm:this.tr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ge(n,0),i=new Ge(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const l=this.Xr(o.Yr);s.push(l)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ke(le);return n.forEach(i=>{const s=new Ge(i,0),o=new Ge(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],l=>{r=r.add(l.Yr)})}),j.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;G.isDocumentKey(s)||(s=s.child(""));const o=new Ge(new G(s),0);let l=new Ke(le);return this.Zr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(l=l.add(u.Yr)),!0)},o),j.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ge(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return j.forEach(n.mutations,i=>{const s=new Ge(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ge(n,0),i=this.Zr.firstAfterOrEqual(r);return j.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e){this.ri=e,this.docs=function(){return new be(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():pt.newInvalidDocument(n))}getEntries(e,n){let r=ir();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():pt.newInvalidDocument(i))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ir();const o=n.path,l=new G(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||CP(AP(d),r)<=0||(i.has(d.key)||Vc(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Z(9500)}ii(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Yb(this)}getSize(e){return j.resolve(this.size)}}class Yb extends qb{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e){this.persistence=e,this.si=new Vi(n=>pm(n),mm),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.oi=0,this._i=new wm,this.targetCount=0,this.ai=Ds.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),j.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ds(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Pr(n),j.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),j.waitFor(s).next(()=>i)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),j.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,n){this.ui={},this.overlays={},this.ci=new Pc(0),this.li=!1,this.li=!0,this.hi=new Gb,this.referenceDelegate=e(this),this.Pi=new Zb(this),this.indexManager=new Mb,this.remoteDocumentCache=function(i){return new Xb(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Lb(n),this.Ii=new Qb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Kb,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Jb(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const i=new eD(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return j.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class eD extends kP{constructor(e){super(),this.currentSequenceNumber=e}}class Em{constructor(e){this.persistence=e,this.Ri=new wm,this.Vi=null}static mi(e){return new Em(e)}get fi(){if(this.Vi)return this.Vi;throw Z(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),j.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,r=>{const i=G.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,te.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return j.or([()=>j.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Xu{constructor(e,n){this.persistence=e,this.pi=new Vi(r=>bP(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=$b(this,n)}static mi(e,n){return new Xu(e,n)}Ei(){}di(e){return j.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return j.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?j.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,s.removeEntry(o,te.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),j.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),j.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Zl(e.data.value)),n}br(e,n,r){return j.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return j.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ue(),i=ue();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Tm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return DR()?8:NP(yt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new tD;return this.Ss(e,n,o).next(l=>{if(s.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Ki()<=ae.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Gi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(Ki()<=ae.DEBUG&&Q("QueryEngine","Query:",Gi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Ki()<=ae.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Gi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kn(n))):j.resolve())}ys(e,n){if(fv(n))return j.resolve(null);let r=kn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Pf(n,null,"F"),r=kn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ue(...s);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Ds(n,l);return this.Cs(n,c,o,u.readTime)?this.ys(e,Pf(n,null,"F")):this.vs(e,c,n,u)}))})))}ws(e,n,r,i){return fv(n)||i.isEqual(te.min())?j.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?j.resolve(null):(Ki()<=ae.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Gi(n)),this.vs(e,o,n,xP(i,fa)).next(l=>l))})}Ds(e,n){let r=new Ke(cT(e));return n.forEach((i,s)=>{Vc(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Ki()<=ae.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Gi(n)),this.ps.getDocumentsMatchingQuery(e,n,Br.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="LocalStore",rD=3e8;class iD{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new be(le),this.xs=new Vi(s=>pm(s),mm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Wb(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function sD(t,e,n,r){return new iD(t,e,n,r)}async function DT(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=ue();for(const c of i){o.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of s){l.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:l}))})})}function oD(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,c,d){const p=c.batch,m=p.keys();let x=j.resolve();return m.forEach(A=>{x=x.next(()=>d.getEntry(u,A)).next(R=>{const I=c.docVersions.get(A);ge(I!==null,48541),R.version.compareTo(I)<0&&(p.applyToRemoteDocument(R,c),R.isValidDocument()&&(R.setReadTime(c.commitVersion),d.addEntry(R)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ue();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function OT(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function aD(t,e){const n=ne(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach((d,p)=>{const m=i.get(p);if(!m)return;l.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,p)));let x=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?x=x.withResumeToken(it.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):d.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(d.resumeToken,r)),i=i.insert(p,x),function(R,I,E){return R.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=rD?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(m,x,d)&&l.push(n.Pi.updateTargetData(s,x))});let u=ir(),c=ue();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(lD(s,o,e.documentUpdates).next(d=>{u=d.ks,c=d.qs})),!r.isEqual(te.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(p=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(d)}return j.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.Ms=i,s))}function lD(t,e,n){let r=ue(),i=ue();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ir();return n.forEach((l,u)=>{const c=s.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):Q(Sm,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{ks:o,qs:i}})}function uD(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=hm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function cD(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,j.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new Sr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Vf(t,e,n){const r=ne(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!$s(o))throw o;Q(Sm,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Av(t,e,n){const r=ne(t);let i=te.min(),s=ue();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,d){const p=ne(u),m=p.xs.get(d);return m!==void 0?j.resolve(p.Ms.get(m)):p.Pi.getTargetData(c,d)}(r,o,kn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:te.min(),n?s:ue())).next(l=>(hD(r,JP(e),l),{documents:l,Qs:s})))}function hD(t,e,n){let r=t.Os.get(e)||te.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class Cv{constructor(){this.activeTargetIds=nb()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dD{constructor(){this.Mo=new Cv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Cv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="ConnectivityMonitor";class kv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Q(Rv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Q(Rv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kl=null;function Mf(){return kl===null?kl=function(){return 268435456+Math.round(2147483648*Math.random())}():kl++,"0x"+kl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od="RestConnection",pD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mD{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Hu?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=Mf(),l=this.zo(e,n.toUriEncodedString());Q(od,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,s);const{host:c}=new URL(l),d=Di(c);return this.Jo(e,l,u,r,d).then(p=>(Q(od,`Received RPC '${e}' ${o}: `,p),p),p=>{throw ks(od,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",r),p})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=pD[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht="WebChannelConnection";class yD extends mD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=Mf();return new Promise((l,u)=>{const c=new VE;c.setWithCredentials(!0),c.listenOnce(ME.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Yl.NO_ERROR:const p=c.getResponseJson();Q(ht,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case Yl.TIMEOUT:Q(ht,`RPC '${e}' ${o} timed out`),u(new W(B.DEADLINE_EXCEEDED,"Request time out"));break;case Yl.HTTP_ERROR:const m=c.getStatus();if(Q(ht,`RPC '${e}' ${o} failed with status:`,m,"response text:",c.getResponseText()),m>0){let x=c.getResponseJson();Array.isArray(x)&&(x=x[0]);const A=x==null?void 0:x.error;if(A&&A.status&&A.message){const R=function(E){const _=E.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(_)>=0?_:B.UNKNOWN}(A.status);u(new W(R,A.message))}else u(new W(B.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new W(B.UNAVAILABLE,"Connection failed."));break;default:Z(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Q(ht,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);Q(ht,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",d,r,15)})}T_(e,n,r){const i=Mf(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=zE(),l=UE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=s.join("");Q(ht,`Creating RPC '${e}' stream ${i}: ${d}`,u);const p=o.createWebChannel(d,u);this.I_(p);let m=!1,x=!1;const A=new gD({Yo:I=>{x?Q(ht,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(m||(Q(ht,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),Q(ht,`RPC '${e}' stream ${i} sending:`,I),p.send(I))},Zo:()=>p.close()}),R=(I,E,_)=>{I.listen(E,C=>{try{_(C)}catch(L){setTimeout(()=>{throw L},0)}})};return R(p,Co.EventType.OPEN,()=>{x||(Q(ht,`RPC '${e}' stream ${i} transport opened.`),A.o_())}),R(p,Co.EventType.CLOSE,()=>{x||(x=!0,Q(ht,`RPC '${e}' stream ${i} transport closed`),A.a_(),this.E_(p))}),R(p,Co.EventType.ERROR,I=>{x||(x=!0,ks(ht,`RPC '${e}' stream ${i} transport errored. Name:`,I.name,"Message:",I.message),A.a_(new W(B.UNAVAILABLE,"The operation could not be completed")))}),R(p,Co.EventType.MESSAGE,I=>{var E;if(!x){const _=I.data[0];ge(!!_,16349);const C=_,L=(C==null?void 0:C.error)||((E=C[0])==null?void 0:E.error);if(L){Q(ht,`RPC '${e}' stream ${i} received error:`,L);const O=L.status;let z=function(T){const k=Be[T];if(k!==void 0)return ET(k)}(O),w=L.message;z===void 0&&(z=B.INTERNAL,w="Unknown error status: "+O+" with message "+L.message),x=!0,A.a_(new W(z,w)),p.close()}else Q(ht,`RPC '${e}' stream ${i} received:`,_),A.u_(_)}}),R(l,FE.STAT_EVENT,I=>{I.stat===If.PROXY?Q(ht,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===If.NOPROXY&&Q(ht,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.__()},0),A}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function ad(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(t){return new Eb(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="PersistentStream";class VT{constructor(e,n,r,i,s,o,l,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new LT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(rr(n.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new W(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Q(Nv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Q(Nv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vD extends VT{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Ib(this.serializer,e),r=function(s){if(!("targetChange"in s))return te.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?te.min():o.readTime?Nn(o.readTime):te.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Lf(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=kf(u)?{documents:Cb(s,u)}:{query:Rb(s,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=IT(s,o.resumeToken);const c=bf(s,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(te.min())>0){l.readTime=Ju(s,o.snapshotVersion.toTimestamp());const c=bf(s,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=Nb(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Lf(this.serializer),n.removeTarget=e,this.q_(n)}}class _D extends VT{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Ab(e.writeResults,e.commitTime),r=Nn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Lf(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>xb(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{}class ED extends wD{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new W(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,Df(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(B.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Df(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(B.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class TD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(rr(n),this.aa=!1):Q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri="RemoteStore";class SD{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Mi(this)&&(Q(Ri,"Restarting streams for network reachability change."),await async function(u){const c=ne(u);c.Ea.add(4),await La(c),c.Ra.set("Unknown"),c.Ea.delete(4),await jc(c)}(this))})}),this.Ra=new TD(r,i)}}async function jc(t){if(Mi(t))for(const e of t.da)await e(!0)}async function La(t){for(const e of t.da)await e(!1)}function MT(t,e){const n=ne(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Cm(n)?Am(n):Hs(n).O_()&&xm(n,e))}function Im(t,e){const n=ne(t),r=Hs(n);n.Ia.delete(e),r.O_()&&FT(n,e),n.Ia.size===0&&(r.O_()?r.L_():Mi(n)&&n.Ra.set("Unknown"))}function xm(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hs(t).Y_(e)}function FT(t,e){t.Va.Ue(e),Hs(t).Z_(e)}function Am(t){t.Va=new yb({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Hs(t).start(),t.Ra.ua()}function Cm(t){return Mi(t)&&!Hs(t).x_()&&t.Ia.size>0}function Mi(t){return ne(t).Ea.size===0}function UT(t){t.Va=void 0}async function ID(t){t.Ra.set("Online")}async function xD(t){t.Ia.forEach((e,n)=>{xm(t,e)})}async function AD(t,e){UT(t),Cm(t)?(t.Ra.ha(e),Am(t)):t.Ra.set("Unknown")}async function CD(t,e,n){if(t.Ra.set("Online"),e instanceof ST&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(r){Q(Ri,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Yu(t,r)}else if(e instanceof nu?t.Va.Ze(e):e instanceof TT?t.Va.st(e):t.Va.tt(e),!n.isEqual(te.min()))try{const r=await OT(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Va.Tt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.Ia.get(c);d&&s.Ia.set(c,d.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const d=s.Ia.get(u);if(!d)return;s.Ia.set(u,d.withResumeToken(it.EMPTY_BYTE_STRING,d.snapshotVersion)),FT(s,u);const p=new Sr(d.target,u,c,d.sequenceNumber);xm(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Q(Ri,"Failed to raise snapshot:",r),await Yu(t,r)}}async function Yu(t,e,n){if(!$s(e))throw e;t.Ea.add(1),await La(t),t.Ra.set("Offline"),n||(n=()=>OT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q(Ri,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await jc(t)})}function zT(t,e){return e().catch(n=>Yu(t,n,e))}async function $c(t){const e=ne(t),n=Hr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:hm;for(;RD(e);)try{const i=await uD(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,kD(e,i)}catch(i){await Yu(e,i)}BT(e)&&jT(e)}function RD(t){return Mi(t)&&t.Ta.length<10}function kD(t,e){t.Ta.push(e);const n=Hr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function BT(t){return Mi(t)&&!Hr(t).x_()&&t.Ta.length>0}function jT(t){Hr(t).start()}async function ND(t){Hr(t).ra()}async function PD(t){const e=Hr(t);for(const n of t.Ta)e.ea(n.mutations)}async function bD(t,e,n){const r=t.Ta.shift(),i=ym.from(r,e,n);await zT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await $c(t)}async function DD(t,e){e&&Hr(t).X_&&await async function(r,i){if(function(o){return pb(o)&&o!==B.ABORTED}(i.code)){const s=r.Ta.shift();Hr(r).B_(),await zT(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await $c(r)}}(t,e),BT(t)&&jT(t)}async function Pv(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),Q(Ri,"RemoteStore received new credentials");const r=Mi(n);n.Ea.add(3),await La(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await jc(n)}async function OD(t,e){const n=ne(t);e?(n.Ea.delete(2),await jc(n)):e||(n.Ea.add(2),await La(n),n.Ra.set("Unknown"))}function Hs(t){return t.ma||(t.ma=function(n,r,i){const s=ne(n);return s.sa(),new vD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:ID.bind(null,t),t_:xD.bind(null,t),r_:AD.bind(null,t),H_:CD.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Cm(t)?Am(t):t.Ra.set("Unknown")):(await t.ma.stop(),UT(t))})),t.ma}function Hr(t){return t.fa||(t.fa=function(n,r,i){const s=ne(n);return s.sa(),new _D(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:ND.bind(null,t),r_:DD.bind(null,t),ta:PD.bind(null,t),na:bD.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await $c(t)):(await t.fa.stop(),t.Ta.length>0&&(Q(Ri,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new Rm(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function km(t,e){if(rr("AsyncQueue",`${e}: ${t}`),$s(t))return new W(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{static emptySet(e){return new ws(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=Ro(),this.sortedSet=new be(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ws)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ws;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(){this.ga=new be(G.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Z(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Os{constructor(e,n,r,i,s,o,l,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Os(e,n,ws.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class VD{constructor(){this.queries=Dv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ne(n),s=i.queries;i.queries=Dv(),s.forEach((o,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new W(B.ABORTED,"Firestore shutting down"))}}function Dv(){return new Vi(t=>uT(t),Lc)}async function Nm(t,e){const n=ne(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new LD,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=km(o,`Initialization of query '${Gi(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&bm(n)}async function Pm(t,e){const n=ne(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function MD(t,e){const n=ne(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.Sa)l.Fa(i)&&(r=!0);o.wa=i}}r&&bm(n)}function FD(t,e,n){const r=ne(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function bm(t){t.Ca.forEach(e=>{e.next()})}var Ff,Ov;(Ov=Ff||(Ff={})).Ma="default",Ov.Cache="cache";class Dm{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Os(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Os.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ff.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e){this.key=e}}class qT{constructor(e){this.key=e}}class UD{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ue(),this.mutatedKeys=ue(),this.eu=cT(e),this.tu=new ws(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new bv,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,p)=>{const m=i.get(d),x=Vc(this.query,p)?p:null,A=!!m&&this.mutatedKeys.has(m.key),R=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let I=!1;m&&x?m.data.isEqual(x.data)?A!==R&&(r.track({type:3,doc:x}),I=!0):this.su(m,x)||(r.track({type:2,doc:x}),I=!0,(u&&this.eu(x,u)>0||c&&this.eu(x,c)<0)&&(l=!0)):!m&&x?(r.track({type:0,doc:x}),I=!0):m&&!x&&(r.track({type:1,doc:m}),I=!0,(u||c)&&(l=!0)),I&&(x?(o=o.add(x),s=R?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,p)=>function(x,A){const R=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z(20277,{Rt:I})}};return R(x)-R(A)}(d.type,p.type)||this.eu(d.doc,p.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,c=u!==this.Za;return this.Za=u,o.length!==0||c?{snapshot:new Os(this.query,e.tu,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new bv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ue(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new qT(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new $T(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ue();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Os.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Om="SyncEngine";class zD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class BD{constructor(e){this.key=e,this.hu=!1}}class jD{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Vi(l=>uT(l),Lc),this.Iu=new Map,this.Eu=new Set,this.du=new be(G.comparator),this.Au=new Map,this.Ru=new wm,this.Vu={},this.mu=new Map,this.fu=Ds.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function $D(t,e,n=!0){const r=JT(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await HT(r,e,n,!0),i}async function qD(t,e){const n=JT(t);await HT(n,e,!0,!1)}async function HT(t,e,n,r){const i=await cD(t.localStore,kn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await HD(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&MT(t.remoteStore,i),l}async function HD(t,e,n,r,i){t.pu=(p,m,x)=>async function(R,I,E,_){let C=I.view.ru(E);C.Cs&&(C=await Av(R.localStore,I.query,!1).then(({documents:w})=>I.view.ru(w,C)));const L=_&&_.targetChanges.get(I.targetId),O=_&&_.targetMismatches.get(I.targetId)!=null,z=I.view.applyChanges(C,R.isPrimaryClient,L,O);return Vv(R,I.targetId,z.au),z.snapshot}(t,p,m,x);const s=await Av(t.localStore,e,!0),o=new UD(e,s.Qs),l=o.ru(s.documents),u=Oa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(l,t.isPrimaryClient,u);Vv(t,n,c.au);const d=new zD(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function WD(t,e,n){const r=ne(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Lc(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Vf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Im(r.remoteStore,i.targetId),Uf(r,i.targetId)}).catch(js)):(Uf(r,i.targetId),await Vf(r.localStore,i.targetId,!0))}async function QD(t,e){const n=ne(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Im(n.remoteStore,r.targetId))}async function KD(t,e,n){const r=tO(t);try{const i=await function(o,l){const u=ne(o),c=_e.now(),d=l.reduce((x,A)=>x.add(A.key),ue());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",x=>{let A=ir(),R=ue();return u.Ns.getEntries(x,d).next(I=>{A=I,A.forEach((E,_)=>{_.isValidDocument()||(R=R.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(x,A)).next(I=>{p=I;const E=[];for(const _ of l){const C=ub(_,p.get(_.key).overlayedDocument);C!=null&&E.push(new ei(_.key,C,tT(C.value.mapValue),xt.exists(!0)))}return u.mutationQueue.addMutationBatch(x,c,E,l)}).next(I=>{m=I;const E=I.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(x,I.batchId,E)})}).then(()=>({batchId:m.batchId,changes:dT(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let c=o.Vu[o.currentUser.toKey()];c||(c=new be(le)),c=c.insert(l,u),o.Vu[o.currentUser.toKey()]=c}(r,i.batchId,n),await Va(r,i.changes),await $c(r.remoteStore)}catch(i){const s=km(i,"Failed to persist write");n.reject(s)}}async function WT(t,e){const n=ne(t);try{const r=await aD(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ge(o.hu,14607):i.removedDocuments.size>0&&(ge(o.hu,42227),o.hu=!1))}),await Va(n,r,e)}catch(r){await js(r)}}function Lv(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=ne(o);u.onlineState=l;let c=!1;u.queries.forEach((d,p)=>{for(const m of p.Sa)m.va(l)&&(c=!0)}),c&&bm(u)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function GD(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new be(G.comparator);o=o.insert(s,pt.newNoDocument(s,te.min()));const l=ue().add(s),u=new zc(te.min(),new Map,new be(le),o,l);await WT(r,u),r.du=r.du.remove(s),r.Au.delete(e),Lm(r)}else await Vf(r.localStore,e,!1).then(()=>Uf(r,e,n)).catch(js)}async function JD(t,e){const n=ne(t),r=e.batch.batchId;try{const i=await oD(n.localStore,e);KT(n,r,null),QT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Va(n,i)}catch(i){await js(i)}}async function XD(t,e,n){const r=ne(t);try{const i=await function(o,l){const u=ne(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,l).next(p=>(ge(p!==null,37113),d=p.keys(),u.mutationQueue.removeMutationBatch(c,p))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(r.localStore,e);KT(r,e,n),QT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Va(r,i)}catch(i){await js(i)}}function QT(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function KT(t,e,n){const r=ne(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Uf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||GT(t,r)})}function GT(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Im(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Lm(t))}function Vv(t,e,n){for(const r of n)r instanceof $T?(t.Ru.addReference(r.key,e),YD(t,r)):r instanceof qT?(Q(Om,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||GT(t,r.key)):Z(19791,{wu:r})}function YD(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Q(Om,"New document in limbo: "+n),t.Eu.add(r),Lm(t))}function Lm(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new G(Ee.fromString(e)),r=t.fu.next();t.Au.set(r,new BD(n)),t.du=t.du.insert(n,r),MT(t.remoteStore,new Sr(kn(Oc(n.path)),r,"TargetPurposeLimboResolution",Pc.ce))}}async function Va(t,e,n){const r=ne(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const p=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(c){i.push(c);const p=Tm.As(u.targetId,c);s.push(p)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(u,c){const d=ne(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>j.forEach(c,m=>j.forEach(m.Es,x=>d.persistence.referenceDelegate.addReference(p,m.targetId,x)).next(()=>j.forEach(m.ds,x=>d.persistence.referenceDelegate.removeReference(p,m.targetId,x)))))}catch(p){if(!$s(p))throw p;Q(Sm,"Failed to update sequence numbers: "+p)}for(const p of c){const m=p.targetId;if(!p.fromCache){const x=d.Ms.get(m),A=x.snapshotVersion,R=x.withLastLimboFreeSnapshotVersion(A);d.Ms=d.Ms.insert(m,R)}}}(r.localStore,s))}async function ZD(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){Q(Om,"User change. New user:",e.toKey());const r=await DT(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new W(B.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Va(n,r.Ls)}}function eO(t,e){const n=ne(t),r=n.Au.get(e);if(r&&r.hu)return ue().add(r.key);{let i=ue();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const l=n.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}function JT(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=WT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GD.bind(null,e),e.Pu.H_=MD.bind(null,e.eventManager),e.Pu.yu=FD.bind(null,e.eventManager),e}function tO(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=XD.bind(null,e),e}class Zu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return sD(this.persistence,new nD,e.initialUser,this.serializer)}Cu(e){return new bT(Em.mi,this.serializer)}Du(e){return new dD}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zu.provider={build:()=>new Zu};class nO extends Zu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ge(this.persistence.referenceDelegate instanceof Xu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Bb(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Nt.withCacheSize(this.cacheSizeBytes):Nt.DEFAULT;return new bT(r=>Xu.mi(r,n),this.serializer)}}class zf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Lv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZD.bind(null,this.syncEngine),await OD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new VD}()}createDatastore(e){const n=Bc(e.databaseInfo.databaseId),r=function(s){return new yD(s)}(e.databaseInfo);return function(s,o,l,u){return new ED(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new SD(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Lv(this.syncEngine,n,0),function(){return kv.v()?new kv:new fD}())}createSyncEngine(e,n){return function(i,s,o,l,u,c,d){const p=new jD(i,s,o,l,u,c);return d&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ne(i);Q(Ri,"RemoteStore shutting down."),s.Ea.add(5),await La(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}zf.provider={build:()=>new zf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="FirestoreClient";class rO{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=dt.UNAUTHENTICATED,this.clientId=cm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Q(Wr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q(Wr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=km(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ld(t,e){t.asyncQueue.verifyOperationInProgress(),Q(Wr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await DT(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Mv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await iO(t);Q(Wr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Pv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Pv(e.remoteStore,i)),t._onlineComponents=e}async function iO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q(Wr,"Using user provided OfflineComponentProvider");try{await ld(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===B.FAILED_PRECONDITION||i.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ks("Error using user provided cache. Falling back to memory cache: "+n),await ld(t,new Zu)}}else Q(Wr,"Using default OfflineComponentProvider"),await ld(t,new nO(void 0));return t._offlineComponents}async function XT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q(Wr,"Using user provided OnlineComponentProvider"),await Mv(t,t._uninitializedComponentsProvider._online)):(Q(Wr,"Using default OnlineComponentProvider"),await Mv(t,new zf))),t._onlineComponents}function sO(t){return XT(t).then(e=>e.syncEngine)}async function ec(t){const e=await XT(t),n=e.eventManager;return n.onListen=$D.bind(null,e.syncEngine),n.onUnlisten=WD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=qD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=QD.bind(null,e.syncEngine),n}function oO(t,e,n={}){const r=new Jn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const d=new Vm({next:m=>{d.Nu(),o.enqueueAndForget(()=>Pm(s,p));const x=m.docs.has(l);!x&&m.fromCache?c.reject(new W(B.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&m.fromCache&&u&&u.source==="server"?c.reject(new W(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new Dm(Oc(l.path),d,{includeMetadataChanges:!0,qa:!0});return Nm(s,p)}(await ec(t),t.asyncQueue,e,n,r)),r.promise}function aO(t,e,n={}){const r=new Jn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const d=new Vm({next:m=>{d.Nu(),o.enqueueAndForget(()=>Pm(s,p)),m.fromCache&&u.source==="server"?c.reject(new W(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new Dm(l,d,{includeMetadataChanges:!0,qa:!0});return Nm(s,p)}(await ec(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT="firestore.googleapis.com",Uv=!0;class zv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new W(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ZT,this.ssl=Uv}else this.host=e.host,this.ssl=e.ssl??Uv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=PT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ub)throw new W(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YT(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new W(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new W(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new W(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new pP;switch(r.type){case"firstParty":return new vP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Fv.get(n);r&&(Q("ComponentProvider","Removing Datastore"),Fv.delete(n),r.terminate())}(this),Promise.resolve()}}function lO(t,e,n,r={}){var c;t=It(t,qc);const i=Di(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(Jp(`https://${l}`),Xp("Firestore",!0)),s.host!==ZT&&s.host!==l&&ks("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:i,emulatorOptions:r};if(!Si(u,o)&&(t._setSettings(u),r.mockUserToken)){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=dt.MOCK_USER;else{d=G1(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new W(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new dt(m)}t._authCredentials=new mP(new jE(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ti(this.firestore,e,this._query)}}class Le{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Le(this.firestore,e,this._key)}toJSON(){return{type:Le._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ba(n,Le._jsonSchema))return new Le(e,r||null,new G(Ee.fromString(n.referencePath)))}}Le._jsonSchemaVersion="firestore/documentReference/1.0",Le._jsonSchema={type:qe("string",Le._jsonSchemaVersion),referencePath:qe("string")};class Mr extends ti{constructor(e,n,r){super(e,n,Oc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Le(this.firestore,null,new G(e))}withConverter(e){return new Mr(this.firestore,e,this._path)}}function vo(t,e,...n){if(t=Pe(t),$E("collection","path",e),t instanceof qc){const r=Ee.fromString(e,...n);return Z0(r),new Mr(t,null,r)}{if(!(t instanceof Le||t instanceof Mr))throw new W(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return Z0(r),new Mr(t.firestore,null,r)}}function jn(t,e,...n){if(t=Pe(t),arguments.length===1&&(e=cm.newId()),$E("doc","path",e),t instanceof qc){const r=Ee.fromString(e,...n);return Y0(r),new Le(t,null,new G(r))}{if(!(t instanceof Le||t instanceof Mr))throw new W(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return Y0(r),new Le(t.firestore,t instanceof Mr?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="AsyncQueue";class jv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new LT(this,"async_queue_retry"),this._c=()=>{const r=ad();r&&Q(Bv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=ad();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ad();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Jn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!$s(e))throw e;Q(Bv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,rr("INTERNAL UNHANDLED ERROR: ",$v(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Rm.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Z(47125,{Pc:$v(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function $v(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class On extends qc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new jv,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jv(e),this._firestoreClient=void 0,await e}}}function uO(t,e){const n=typeof t=="object"?t:em(),r=typeof t=="string"?t:e||Hu,i=Ac(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=W1("firestore");s&&lO(i,...s)}return i}function Ma(t){if(t._terminated)throw new W(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||cO(t),t._firestoreClient}function cO(t){var r,i,s;const e=t._freezeSettings(),n=function(l,u,c,d){return new LP(l,u,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,YT(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new rO(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xt(it.fromBase64String(e))}catch(n){throw new W(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xt(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ba(e,Xt._jsonSchema))return Xt.fromBase64String(e.bytes)}}Xt._jsonSchemaVersion="firestore/bytes/1.0",Xt._jsonSchema={type:qe("string",Xt._jsonSchemaVersion),bytes:qe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pn._jsonSchemaVersion}}static fromJSON(e){if(ba(e,Pn._jsonSchema))return new Pn(e.latitude,e.longitude)}}Pn._jsonSchemaVersion="firestore/geoPoint/1.0",Pn._jsonSchema={type:qe("string",Pn._jsonSchemaVersion),latitude:qe("number"),longitude:qe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:bn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ba(e,bn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new bn(e.vectorValues);throw new W(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bn._jsonSchemaVersion="firestore/vectorValue/1.0",bn._jsonSchema={type:qe("string",bn._jsonSchemaVersion),vectorValues:qe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO=/^__.*__$/;class dO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ei(e,this.data,this.fieldMask,n,this.fieldTransforms):new Da(e,this.data,n,this.fieldTransforms)}}class eS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ei(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function tS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z(40011,{Ac:t})}}class Fm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Fm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return tc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(tS(this.Ac)&&hO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class fO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Bc(e)}Cc(e,n,r,i=!1){return new Fm({Ac:e,methodName:n,Dc:r,path:tt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ua(t){const e=t._freezeSettings(),n=Bc(t._databaseId);return new fO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Um(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);zm("Data must be an object, but it was:",o,r);const l=iS(r,o);let u,c;if(s.merge)u=new $t(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const p of s.mergeFields){const m=Bf(e,p,n);if(!o.contains(m))throw new W(B.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);oS(d,m)||d.push(m)}u=new $t(d),c=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,c=o.fieldTransforms;return new dO(new bt(l),u,c)}class Hc extends Mm{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hc}}function nS(t,e,n,r){const i=t.Cc(1,e,n);zm("Data must be an object, but it was:",i,r);const s=[],o=bt.empty();Zr(r,(u,c)=>{const d=Bm(e,u,n);c=Pe(c);const p=i.yc(d);if(c instanceof Hc)s.push(d);else{const m=za(c,p);m!=null&&(s.push(d),o.set(d,m))}});const l=new $t(s);return new eS(o,l,i.fieldTransforms)}function rS(t,e,n,r,i,s){const o=t.Cc(1,e,n),l=[Bf(e,r,n)],u=[i];if(s.length%2!=0)throw new W(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)l.push(Bf(e,s[m])),u.push(s[m+1]);const c=[],d=bt.empty();for(let m=l.length-1;m>=0;--m)if(!oS(c,l[m])){const x=l[m];let A=u[m];A=Pe(A);const R=o.yc(x);if(A instanceof Hc)c.push(x);else{const I=za(A,R);I!=null&&(c.push(x),d.set(x,I))}}const p=new $t(c);return new eS(d,p,o.fieldTransforms)}function pO(t,e,n,r=!1){return za(n,t.Cc(r?4:3,e))}function za(t,e){if(sS(t=Pe(t)))return zm("Unsupported field value:",e,t),iS(t,e);if(t instanceof Mm)return function(r,i){if(!tS(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=za(l,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Pe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=_e.fromDate(r);return{timestampValue:Ju(i.serializer,s)}}if(r instanceof _e){const s=new _e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ju(i.serializer,s)}}if(r instanceof Pn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xt)return{bytesValue:IT(i.serializer,r._byteString)};if(r instanceof Le){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:_m(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof bn)return function(o,l){return{mapValue:{fields:{[YE]:{stringValue:eT},[Wu]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Sc("VectorValues must only contain numeric values.");return gm(l.serializer,c)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Nc(r)}`)}(t,e)}function iS(t,e){const n={};return WE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zr(t,(r,i)=>{const s=za(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function sS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _e||t instanceof Pn||t instanceof Xt||t instanceof Le||t instanceof Mm||t instanceof bn)}function zm(t,e,n){if(!sS(n)||!qE(n)){const r=Nc(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Bf(t,e,n){if((e=Pe(e))instanceof Fa)return e._internalPath;if(typeof e=="string")return Bm(t,e);throw tc("Field path arguments must be of type string or ",t,!1,void 0,n)}const mO=new RegExp("[~\\*/\\[\\]]");function Bm(t,e,n){if(e.search(mO)>=0)throw tc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fa(...e.split("."))._internalPath}catch{throw tc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function tc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new W(B.INVALID_ARGUMENT,l+t+u)}function oS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Le(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Wc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gO extends aS{data(){return super.data()}}function Wc(t,e){return typeof e=="string"?Bm(t,e):e instanceof Fa?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jm{}class uS extends jm{}function ud(t,e,...n){let r=[];e instanceof jm&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof $m).length,l=s.filter(u=>u instanceof Qc).length;if(o>1||o>0&&l>0)throw new W(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Qc extends uS{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Qc(e,n,r)}_apply(e){const n=this._parse(e);return cS(e._query,n),new ti(e.firestore,e.converter,Nf(e._query,n))}_parse(e){const n=Ua(e.firestore);return function(s,o,l,u,c,d,p){let m;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new W(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Wv(p,d);const A=[];for(const R of p)A.push(Hv(u,s,R));m={arrayValue:{values:A}}}else m=Hv(u,s,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Wv(p,d),m=pO(l,o,p,d==="in"||d==="not-in");return $e.create(c,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Nl(t,e,n){const r=e,i=Wc("where",t);return Qc._create(i,r,n)}class $m extends jm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new $m(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:gn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)cS(o,u),o=Nf(o,u)}(e._query,n),new ti(e.firestore,e.converter,Nf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qm extends uS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new qm(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new W(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new W(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ya(s,o)}(e._query,this._field,this._direction);return new ti(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new qs(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function cd(t,e="asc"){const n=e,r=Wc("orderBy",t);return qm._create(r,n)}function Hv(t,e,n){if(typeof(n=Pe(n))=="string"){if(n==="")throw new W(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lT(e)&&n.indexOf("/")!==-1)throw new W(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ee.fromString(n));if(!G.isDocumentKey(r))throw new W(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return av(t,new G(r))}if(n instanceof Le)return av(t,n._key);throw new W(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nc(n)}.`)}function Wv(t,e){if(!Array.isArray(t)||t.length===0)throw new W(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cS(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class yO{convertValue(e,n="none"){switch(qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($r(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Zr(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Wu].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Me(o.doubleValue));return new bn(n)}convertGeoPoint(e){return new Pn(Me(e.latitude),Me(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Dc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(pa(e));default:return null}}convertTimestamp(e){const n=jr(e);return new _e(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ee.fromString(e);ge(NT(r),9688,{name:e});const i=new ma(r.get(1),r.get(3)),s=new G(r.popFirst(5));return i.isEqual(n)||rr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class No{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gi extends aS{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ru(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Wc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new W(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=gi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}gi._jsonSchemaVersion="firestore/documentSnapshot/1.0",gi._jsonSchema={type:qe("string",gi._jsonSchemaVersion),bundleSource:qe("string","DocumentSnapshot"),bundleName:qe("string"),bundle:qe("string")};class ru extends gi{data(e={}){return super.data(e)}}class yi{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new No(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ru(this._firestore,this._userDataWriter,r.key,r,new No(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new ru(i._firestore,i._userDataWriter,l.doc.key,l.doc,new No(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new ru(i._firestore,i._userDataWriter,l.doc.key,l.doc,new No(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:vO(l.type),doc:u,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new W(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=yi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=cm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function vO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(t){t=It(t,Le);const e=It(t.firestore,On);return oO(Ma(e),t._key).then(n=>hS(e,t,n))}yi._jsonSchemaVersion="firestore/querySnapshot/1.0",yi._jsonSchema={type:qe("string",yi._jsonSchemaVersion),bundleSource:qe("string","QuerySnapshot"),bundleName:qe("string"),bundle:qe("string")};class Wm extends yO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,n)}}function Kv(t){t=It(t,ti);const e=It(t.firestore,On),n=Ma(e),r=new Wm(e);return lS(t._query),aO(n,t._query).then(i=>new yi(e,r,t,i))}function _O(t,e,n){t=It(t,Le);const r=It(t.firestore,On),i=Hm(t.converter,e,n);return Ba(r,[Um(Ua(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,xt.none())])}function jf(t,e,n,...r){t=It(t,Le);const i=It(t.firestore,On),s=Ua(i);let o;return o=typeof(e=Pe(e))=="string"||e instanceof Fa?rS(s,"updateDoc",t._key,e,n,r):nS(s,"updateDoc",t._key,e),Ba(i,[o.toMutation(t._key,xt.exists(!0))])}function wO(t){return Ba(It(t.firestore,On),[new Uc(t._key,xt.none())])}function EO(t,e){const n=It(t.firestore,On),r=jn(t),i=Hm(t.converter,e);return Ba(n,[Um(Ua(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,xt.exists(!1))]).then(()=>r)}function TO(t,...e){var u,c,d;t=Pe(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||qv(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(qv(e[r])){const p=e[r];e[r]=(u=p.next)==null?void 0:u.bind(p),e[r+1]=(c=p.error)==null?void 0:c.bind(p),e[r+2]=(d=p.complete)==null?void 0:d.bind(p)}let s,o,l;if(t instanceof Le)o=It(t.firestore,On),l=Oc(t._key.path),s={next:p=>{e[r]&&e[r](hS(o,t,p))},error:e[r+1],complete:e[r+2]};else{const p=It(t,ti);o=It(p.firestore,On),l=p._query;const m=new Wm(o);s={next:x=>{e[r]&&e[r](new yi(o,m,p,x))},error:e[r+1],complete:e[r+2]},lS(t._query)}return function(m,x,A,R){const I=new Vm(R),E=new Dm(x,I,A);return m.asyncQueue.enqueueAndForget(async()=>Nm(await ec(m),E)),()=>{I.Nu(),m.asyncQueue.enqueueAndForget(async()=>Pm(await ec(m),E))}}(Ma(o),l,i,s)}function Ba(t,e){return function(r,i){const s=new Jn;return r.asyncQueue.enqueueAndForget(async()=>KD(await sO(r),i,s)),s.promise}(Ma(t),e)}function hS(t,e,n){const r=n.docs.get(e._key),i=new Wm(t);return new gi(t,i,e._key,r,new No(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ua(e)}set(e,n,r){this._verifyNotCommitted();const i=hd(e,this._firestore),s=Hm(i.converter,n,r),o=Um(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,xt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=hd(e,this._firestore);let o;return o=typeof(n=Pe(n))=="string"||n instanceof Fa?rS(this._dataReader,"WriteBatch.update",s._key,n,r,i):nS(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,xt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=hd(e,this._firestore);return this._mutations=this._mutations.concat(new Uc(n._key,xt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new W(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hd(t,e){if((t=Pe(t)).firestore!==e)throw new W(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(t){return Ma(t=It(t,On)),new SO(t,e=>Ba(t,e))}(function(e,n=!0){(function(i){Bs=i})(Oi),Ii(new zr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new On(new gP(r.getProvider("auth-internal")),new _P(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new W(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ma(c.options.projectId,d)}(o,i),o);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),An(K0,G0,e),An(K0,G0,"esm2020")})();var xO="firebase",AO="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */An(xO,AO,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS="firebasestorage.googleapis.com",CO="storageBucket",RO=2*60*1e3,kO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn extends Vn{constructor(e,n,r=0){super(dd(e),`Firebase Storage: ${n} (${dd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Mn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return dd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ln;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ln||(Ln={}));function dd(t){return"storage/"+t}function NO(){const t="An unknown error occurred, please check the error payload for server response.";return new Mn(Ln.UNKNOWN,t)}function PO(){return new Mn(Ln.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bO(){return new Mn(Ln.CANCELED,"User canceled the upload/download.")}function DO(t){return new Mn(Ln.INVALID_URL,"Invalid URL '"+t+"'.")}function OO(t){return new Mn(Ln.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Gv(t){return new Mn(Ln.INVALID_ARGUMENT,t)}function fS(){return new Mn(Ln.APP_DELETED,"The Firebase app was deleted.")}function LO(t){return new Mn(Ln.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=un.makeFromUrl(e,n)}catch{return new un(e,"")}if(r.path==="")return r;throw OO(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function c(L){L.path_=decodeURIComponent(L.path)}const d="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",x=new RegExp(`^https?://${p}/${d}/b/${i}/o${m}`,"i"),A={bucket:1,path:3},R=n===dS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",E=new RegExp(`^https?://${R}/${i}/${I}`,"i"),C=[{regex:l,indices:u,postModify:s},{regex:x,indices:A,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let L=0;L<C.length;L++){const O=C[L],z=O.regex.exec(e);if(z){const w=z[O.indices.bucket];let y=z[O.indices.path];y||(y=""),r=new un(w,y),O.postModify(r);break}}if(r==null)throw DO(e);return r}}class VO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MO(t,e,n){let r=1,i=null,s=null,o=!1,l=0;function u(){return l===2}let c=!1;function d(...I){c||(c=!0,e.apply(null,I))}function p(I){i=setTimeout(()=>{i=null,t(x,u())},I)}function m(){s&&clearTimeout(s)}function x(I,...E){if(c){m();return}if(I){m(),d.call(null,I,...E);return}if(u()||o){m(),d.call(null,I,...E);return}r<64&&(r*=2);let C;l===1?(l=2,C=0):C=(r+Math.random())*1e3,p(C)}let A=!1;function R(I){A||(A=!0,m(),!c&&(i!==null?(I||(l=2),clearTimeout(i),p(0)):I||(l=1)))}return p(0),s=setTimeout(()=>{o=!0,R(!0)},n),R}function FO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(t){return t!==void 0}function Jv(t,e,n,r){if(r<e)throw Gv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Gv(`Invalid value for '${t}'. Expected ${n} or less.`)}function zO(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var nc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(nc||(nc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e,n,r,i,s,o,l,u,c,d,p,m=!0,x=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=p,this.retry=m,this.isUsingEmulator=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,R)=>{this.resolve_=A,this.reject_=R,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Pl(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{const u=l.loaded,c=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===nc.NO_ERROR,u=s.getStatus();if(!l||BO(u,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===nc.ABORT;r(!1,new Pl(!1,null,d));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new Pl(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());UO(u)?s(u):s()}catch(u){o(u)}else if(l!==null){const u=NO();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(i.canceled){const u=this.appDelete_?fS():bO();o(u)}else{const u=PO();o(u)}};this.canceled_?n(!1,new Pl(!1,null,!0)):this.backoffId_=MO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&FO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Pl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function $O(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function qO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function HO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function WO(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function QO(t,e,n,r,i,s,o=!0,l=!1){const u=zO(t.urlParams),c=t.url+u,d=Object.assign({},t.headers);return HO(d,e),$O(d,n),qO(d,s),WO(d,r),new jO(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function GO(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n){this._service=e,n instanceof un?this._location=n:this._location=un.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new rc(e,n)}get root(){const e=new un(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return GO(this._location.path)}get storage(){return this._service}get parent(){const e=KO(this._location.path);if(e===null)return null;const n=new un(this._location.bucket,e);return new rc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw LO(e)}}function Xv(t,e){const n=e==null?void 0:e[CO];return n==null?null:un.makeFromBucketSpec(n,t)}function JO(t,e,n,r={}){t.host=`${e}:${n}`;const i=Di(e);i&&(Jp(`https://${t.host}/b`),Xp("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:G1(s,t.app.options.projectId))}class XO{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=dS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=RO,this._maxUploadRetryTime=kO,this._requests=new Set,i!=null?this._bucket=un.makeFromBucketSpec(i,this._host):this._bucket=Xv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=un.makeFromBucketSpec(this._url,e):this._bucket=Xv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Jv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Jv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Bt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new rc(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new VO(fS());{const o=QO(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Yv="@firebase/storage",Zv="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="storage";function YO(t=em(),e){t=Pe(t);const r=Ac(t,pS).getImmediate({identifier:e}),i=W1("storage");return i&&ZO(r,...i),r}function ZO(t,e,n,r={}){JO(t,e,n,r)}function e4(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new XO(n,r,i,e,Oi)}function t4(){Ii(new zr(pS,e4,"PUBLIC").setMultipleInstances(!0)),An(Yv,Zv,""),An(Yv,Zv,"esm2020")}t4();const n4={apiKey:"AIzaSyAphx3rmh-O5SD9t8DnL8M0-i3GHeKj6lE",authDomain:"sapientia-699c2.firebaseapp.com",projectId:"sapientia-699c2",storageBucket:"sapientia-699c2.firebasestorage.app",messagingSenderId:"331824802793",appId:"1:331824802793:web:7cb0e76f5d1e39f69a7978",measurementId:"G-2BC5DD3X0N"},Qm=Y1(n4),_o=dP(Qm),zt=uO(Qm);YO(Qm);class r4{async register(e,n,r){try{const s=(await Kk(_o,e,n)).user;await Xk(s,{displayName:r});const o={id:s.uid,email:e,name:r,bio:"",avatar:"",level:1,experience:0,totalQuotes:0,totalFavorites:0,totalCustom:0,streak:0,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString(),preferences:{theme:"light",notifications:!0,autoBackup:!0,language:"pt-BR",privacy:"private"},achievements:this.getInitialAchievements(),goals:this.getInitialGoals()};return await _O(jn(zt,"users",s.uid),o),o}catch(i){throw i.code==="auth/email-already-in-use"?new Error("Email já está em uso"):new Error("Erro ao criar conta: "+i.message)}}async login(e,n){try{const i=(await Gk(_o,e,n)).user,s=await Qv(jn(zt,"users",i.uid));if(!s.exists())throw new Error("Dados do usuário não encontrados");const o=s.data();return await jf(jn(zt,"users",i.uid),{lastLogin:new Date().toISOString()}),o}catch(r){throw r.code==="auth/user-not-found"?new Error("Usuário não encontrado"):r.code==="auth/wrong-password"?new Error("Senha incorreta"):new Error("Erro ao fazer login: "+r.message)}}async logout(){try{await tN(_o)}catch(e){throw new Error("Erro ao fazer logout: "+e.message)}}getCurrentUser(){return _o.currentUser}onAuthStateChanged(e){return eN(_o,e)}async updateUser(e,n){try{await jf(jn(zt,"users",e),n)}catch(r){throw new Error("Erro ao atualizar usuário: "+r.message)}}async getUserData(e){var n,r,i,s,o;try{const l=await Qv(jn(zt,"users",e));if(l.exists()){const u=l.data();console.log("Raw Firestore data:",u);const c={id:String(u.id||e),email:String(u.email||""),name:String(u.name||""),bio:String(u.bio||""),avatar:String(u.avatar||""),level:Number(u.level||1),experience:Number(u.experience||0),totalQuotes:Number(u.totalQuotes||0),totalFavorites:Number(u.totalFavorites||0),totalCustom:Number(u.totalCustom||0),streak:Number(u.streak||0),createdAt:String(u.createdAt||new Date().toISOString()),lastLogin:String(u.lastLogin||new Date().toISOString()),preferences:{theme:((n=u.preferences)==null?void 0:n.theme)||"light",notifications:((r=u.preferences)==null?void 0:r.notifications)!==!1,autoBackup:((i=u.preferences)==null?void 0:i.autoBackup)!==!1,language:((s=u.preferences)==null?void 0:s.language)||"pt-BR",privacy:((o=u.preferences)==null?void 0:o.privacy)||"private"},achievements:Array.isArray(u.achievements)?u.achievements:[],goals:Array.isArray(u.goals)?u.goals:[]};return console.log("Processed user data:",c),c}return null}catch(l){throw console.error("Error in getUserData:",l),new Error("Erro ao buscar dados do usuário: "+l.message)}}getInitialAchievements(){return[{id:"first-quote",title:"Primeira Citação",description:"Adicionou sua primeira citação",icon:"🎯",unlocked:!1,progress:0,maxProgress:1,category:"collection"},{id:"favorite-collector",title:"Colecionador de Favoritas",description:"Marcou 10 citações como favoritas",icon:"❤️",unlocked:!1,progress:0,maxProgress:10,category:"collection"},{id:"quote-master",title:"Mestre das Citações",description:"Atingiu 50 citações salvas",icon:"📚",unlocked:!1,progress:0,maxProgress:50,category:"collection"},{id:"custom-creator",title:"Criador Personalizado",description:"Criou 5 citações personalizadas",icon:"✍️",unlocked:!1,progress:0,maxProgress:5,category:"activity"},{id:"daily-user",title:"Usuário Diário",description:"Usou o app por 7 dias consecutivos",icon:"🔥",unlocked:!1,progress:0,maxProgress:7,category:"activity"},{id:"quote-enthusiast",title:"Entusiasta das Citações",description:"Atingiu 100 citações salvas",icon:"🏆",unlocked:!1,progress:0,maxProgress:100,category:"collection"},{id:"streak-master",title:"Mestre da Sequência",description:"Manteve uma sequência de 30 dias",icon:"⚡",unlocked:!1,progress:0,maxProgress:30,category:"activity"},{id:"level-10",title:"Nível 10",description:"Atingiu o nível 10",icon:"⭐",unlocked:!1,progress:0,maxProgress:10,category:"special"}]}getInitialGoals(){return[{id:"monthly-quotes",title:"Meta Mensal",description:"Adicionar 20 citações este mês",target:20,current:0,type:"quotes",completed:!1},{id:"weekly-favorites",title:"Favoritas da Semana",description:"Marcar 5 citações como favoritas",target:5,current:0,type:"favorites",completed:!1}]}}const cn=new r4,i4=({onLogout:t,currentUser:e})=>{const n=bi();if(!e||typeof e!="object"||!e.id)return console.log("Header: currentUser inválido:",e),null;const r={...e,id:String(e.id||""),name:String(e.name||""),email:String(e.email||""),level:Number(e.level||1),experience:Number(e.experience||0),totalQuotes:Number(e.totalQuotes||0),totalFavorites:Number(e.totalFavorites||0)},i=async()=>{try{await cn.logout(),t()}catch(s){console.error("Erro ao fazer logout:",s)}};return g("header",{className:"bg-white shadow-sm border-b border-neutral-200",children:g("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:P("div",{className:"flex items-center justify-between h-16",children:[P(Kn,{to:"/",className:"flex items-center space-x-2 group",children:[P("div",{className:"relative",children:[g("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-600 to-primary-700 rounded-lg flex items-center justify-center shadow-lg group-hover:shadow-xl transition-all duration-300 group-hover:scale-110",children:g(KC,{className:"w-6 h-6 text-white group-hover:rotate-12 transition-transform duration-300"})}),g("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-accent-500 rounded-full flex items-center justify-center group-hover:scale-125 transition-transform duration-300",children:g(Kp,{className:"w-2 h-2 text-white"})}),g("div",{className:"absolute -bottom-1 -left-1 w-3 h-3 bg-secondary-500 rounded-full group-hover:animate-pulse"}),g("div",{className:"absolute -top-1 -left-1 w-2 h-2 bg-secondary-400 rounded-full group-hover:animate-ping"})]}),P("div",{className:"overflow-hidden",children:[P("h1",{className:"text-xl font-serif font-bold text-neutral-800 group-hover:text-primary-600 transition-colors duration-300",children:[g("span",{className:"inline-block group-hover:animate-bounce",children:"S"}),g("span",{className:"inline-block group-hover:animate-bounce",style:{animationDelay:"0.1s"},children:"a"}),g("span",{className:"inline-block group-hover:animate-bounce",style:{animationDelay:"0.2s"},children:"p"}),g("span",{className:"inline-block group-hover:animate-bounce",style:{animationDelay:"0.3s"},children:"i"}),g("span",{className:"inline-block group-hover:animate-bounce",style:{animationDelay:"0.4s"},children:"e"}),g("span",{className:"inline-block group-hover:animate-bounce",style:{animationDelay:"0.5s"},children:"n"}),g("span",{className:"inline-block group-hover:animate-bounce",style:{animationDelay:"0.6s"},children:"t"}),g("span",{className:"inline-block group-hover:animate-bounce",style:{animationDelay:"0.7s"},children:"i"}),g("span",{className:"inline-block group-hover:animate-bounce",style:{animationDelay:"0.8s"},children:"a"})]}),g("p",{className:"text-xs text-neutral-500 group-hover:text-neutral-700 transition-colors duration-300",children:"Biblioteca de Citações"})]})]}),P("nav",{className:"flex items-center space-x-6",children:[P(Kn,{to:"/favorites",className:`flex items-center space-x-2 text-sm font-medium transition-all duration-200 hover:scale-105 ${n.pathname==="/favorites"?"text-primary-600":"text-neutral-600 hover:text-neutral-900"}`,children:[g(Dr,{size:16,className:n.pathname==="/favorites"?"fill-current":""}),g("span",{children:"Favoritas"})]}),r&&P("div",{className:"flex items-center space-x-4",children:[P("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-yellow-50 to-orange-50 px-3 py-1 rounded-full",children:[g(ff,{className:"w-4 h-4 text-yellow-600"}),P("span",{className:"text-xs font-medium text-neutral-700",children:["Nível ",r.level||1]}),g("div",{className:"w-16 h-1 bg-neutral-200 rounded-full",children:g("div",{className:"h-1 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full transition-all duration-300",style:{width:`${(r.experience||0)%100}%`}})})]}),P(Kn,{to:"/profile",className:`flex items-center space-x-2 text-sm font-medium transition-all duration-200 hover:scale-105 ${n.pathname==="/profile"?"text-primary-600":"text-neutral-600 hover:text-neutral-900"}`,children:[P("div",{className:"relative",children:[g("div",{className:"w-8 h-8 bg-gradient-to-br from-primary-500 to-primary-600 rounded-full flex items-center justify-center text-white font-medium text-sm",children:r.avatar?g("img",{src:r.avatar,alt:r.name||"Usuário",className:"w-8 h-8 rounded-full"}):(r.name||"U").charAt(0).toUpperCase()}),g("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),P("div",{className:"hidden sm:block",children:[g("div",{className:"font-medium text-neutral-800",children:r.name||"Usuário"}),P("div",{className:"text-xs text-neutral-500",children:[r.totalQuotes||0," citações"]})]})]}),g("button",{onClick:i,className:"p-2 text-neutral-400 hover:text-red-500 rounded-lg transition-all duration-200 hover:scale-110",title:"Sair",children:g(rR,{size:16})})]})]})]})})})},s4=()=>{const e=bi().pathname==="/add";return P("div",{className:"fixed bottom-6 right-6 z-50 group",children:[P("div",{className:"absolute bottom-full right-0 mb-2 px-3 py-2 bg-neutral-800 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap",children:["Adicionar Pensamento",g("div",{className:"absolute top-full right-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-neutral-800"})]}),g(Kn,{to:"/add",className:"w-14 h-14 bg-primary-600 hover:bg-primary-700 text-white rounded-full flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-110 group-hover:rotate-90",title:"Adicionar Pensamento",children:!e&&g(Gp,{size:24})})]})};function mS(t,e){return function(){return t.apply(e,arguments)}}const{toString:o4}=Object.prototype,{getPrototypeOf:Km}=Object,{iterator:Kc,toStringTag:gS}=Symbol,Gc=(t=>e=>{const n=o4.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),yn=t=>(t=t.toLowerCase(),e=>Gc(e)===t),Jc=t=>e=>typeof e===t,{isArray:Ws}=Array,wa=Jc("undefined");function ja(t){return t!==null&&!wa(t)&&t.constructor!==null&&!wa(t.constructor)&&Mt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const yS=yn("ArrayBuffer");function a4(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&yS(t.buffer),e}const l4=Jc("string"),Mt=Jc("function"),vS=Jc("number"),$a=t=>t!==null&&typeof t=="object",u4=t=>t===!0||t===!1,iu=t=>{if(Gc(t)!=="object")return!1;const e=Km(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(gS in t)&&!(Kc in t)},c4=t=>{if(!$a(t)||ja(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},h4=yn("Date"),d4=yn("File"),f4=yn("Blob"),p4=yn("FileList"),m4=t=>$a(t)&&Mt(t.pipe),g4=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Mt(t.append)&&((e=Gc(t))==="formdata"||e==="object"&&Mt(t.toString)&&t.toString()==="[object FormData]"))},y4=yn("URLSearchParams"),[v4,_4,w4,E4]=["ReadableStream","Request","Response","Headers"].map(yn),T4=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function qa(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Ws(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{if(ja(t))return;const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let l;for(r=0;r<o;r++)l=s[r],e.call(null,t[l],l,t)}}function _S(t,e){if(ja(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const fi=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),wS=t=>!wa(t)&&t!==fi;function $f(){const{caseless:t}=wS(this)&&this||{},e={},n=(r,i)=>{const s=t&&_S(e,i)||i;iu(e[s])&&iu(r)?e[s]=$f(e[s],r):iu(r)?e[s]=$f({},r):Ws(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&qa(arguments[r],n);return e}const S4=(t,e,n,{allOwnKeys:r}={})=>(qa(e,(i,s)=>{n&&Mt(i)?t[s]=mS(i,n):t[s]=i},{allOwnKeys:r}),t),I4=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),x4=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},A4=(t,e,n,r)=>{let i,s,o;const l={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=n!==!1&&Km(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},C4=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},R4=t=>{if(!t)return null;if(Ws(t))return t;let e=t.length;if(!vS(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},k4=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Km(Uint8Array)),N4=(t,e)=>{const r=(t&&t[Kc]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},P4=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},b4=yn("HTMLFormElement"),D4=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),e_=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),O4=yn("RegExp"),ES=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};qa(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},L4=t=>{ES(t,(e,n)=>{if(Mt(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Mt(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},V4=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Ws(t)?r(t):r(String(t).split(e)),n},M4=()=>{},F4=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function U4(t){return!!(t&&Mt(t.append)&&t[gS]==="FormData"&&t[Kc])}const z4=t=>{const e=new Array(10),n=(r,i)=>{if($a(r)){if(e.indexOf(r)>=0)return;if(ja(r))return r;if(!("toJSON"in r)){e[i]=r;const s=Ws(r)?[]:{};return qa(r,(o,l)=>{const u=n(o,i+1);!wa(u)&&(s[l]=u)}),e[i]=void 0,s}}return r};return n(t,0)},B4=yn("AsyncFunction"),j4=t=>t&&($a(t)||Mt(t))&&Mt(t.then)&&Mt(t.catch),TS=((t,e)=>t?setImmediate:e?((n,r)=>(fi.addEventListener("message",({source:i,data:s})=>{i===fi&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),fi.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Mt(fi.postMessage)),$4=typeof queueMicrotask<"u"?queueMicrotask.bind(fi):typeof process<"u"&&process.nextTick||TS,q4=t=>t!=null&&Mt(t[Kc]),M={isArray:Ws,isArrayBuffer:yS,isBuffer:ja,isFormData:g4,isArrayBufferView:a4,isString:l4,isNumber:vS,isBoolean:u4,isObject:$a,isPlainObject:iu,isEmptyObject:c4,isReadableStream:v4,isRequest:_4,isResponse:w4,isHeaders:E4,isUndefined:wa,isDate:h4,isFile:d4,isBlob:f4,isRegExp:O4,isFunction:Mt,isStream:m4,isURLSearchParams:y4,isTypedArray:k4,isFileList:p4,forEach:qa,merge:$f,extend:S4,trim:T4,stripBOM:I4,inherits:x4,toFlatObject:A4,kindOf:Gc,kindOfTest:yn,endsWith:C4,toArray:R4,forEachEntry:N4,matchAll:P4,isHTMLForm:b4,hasOwnProperty:e_,hasOwnProp:e_,reduceDescriptors:ES,freezeMethods:L4,toObjectSet:V4,toCamelCase:D4,noop:M4,toFiniteNumber:F4,findKey:_S,global:fi,isContextDefined:wS,isSpecCompliantForm:U4,toJSONObject:z4,isAsyncFn:B4,isThenable:j4,setImmediate:TS,asap:$4,isIterable:q4};function re(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}M.inherits(re,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:M.toJSONObject(this.config),code:this.code,status:this.status}}});const SS=re.prototype,IS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{IS[t]={value:t}});Object.defineProperties(re,IS);Object.defineProperty(SS,"isAxiosError",{value:!0});re.from=(t,e,n,r,i,s)=>{const o=Object.create(SS);return M.toFlatObject(t,o,function(u){return u!==Error.prototype},l=>l!=="isAxiosError"),re.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const H4=null;function qf(t){return M.isPlainObject(t)||M.isArray(t)}function xS(t){return M.endsWith(t,"[]")?t.slice(0,-2):t}function t_(t,e,n){return t?t.concat(e).map(function(i,s){return i=xS(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function W4(t){return M.isArray(t)&&!t.some(qf)}const Q4=M.toFlatObject(M,{},null,function(e){return/^is[A-Z]/.test(e)});function Xc(t,e,n){if(!M.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=M.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(R,I){return!M.isUndefined(I[R])});const r=n.metaTokens,i=n.visitor||d,s=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&M.isSpecCompliantForm(e);if(!M.isFunction(i))throw new TypeError("visitor must be a function");function c(A){if(A===null)return"";if(M.isDate(A))return A.toISOString();if(M.isBoolean(A))return A.toString();if(!u&&M.isBlob(A))throw new re("Blob is not supported. Use a Buffer instead.");return M.isArrayBuffer(A)||M.isTypedArray(A)?u&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function d(A,R,I){let E=A;if(A&&!I&&typeof A=="object"){if(M.endsWith(R,"{}"))R=r?R:R.slice(0,-2),A=JSON.stringify(A);else if(M.isArray(A)&&W4(A)||(M.isFileList(A)||M.endsWith(R,"[]"))&&(E=M.toArray(A)))return R=xS(R),E.forEach(function(C,L){!(M.isUndefined(C)||C===null)&&e.append(o===!0?t_([R],L,s):o===null?R:R+"[]",c(C))}),!1}return qf(A)?!0:(e.append(t_(I,R,s),c(A)),!1)}const p=[],m=Object.assign(Q4,{defaultVisitor:d,convertValue:c,isVisitable:qf});function x(A,R){if(!M.isUndefined(A)){if(p.indexOf(A)!==-1)throw Error("Circular reference detected in "+R.join("."));p.push(A),M.forEach(A,function(E,_){(!(M.isUndefined(E)||E===null)&&i.call(e,E,M.isString(_)?_.trim():_,R,m))===!0&&x(E,R?R.concat(_):[_])}),p.pop()}}if(!M.isObject(t))throw new TypeError("data must be an object");return x(t),e}function n_(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Gm(t,e){this._pairs=[],t&&Xc(t,this,e)}const AS=Gm.prototype;AS.append=function(e,n){this._pairs.push([e,n])};AS.toString=function(e){const n=e?function(r){return e.call(this,r,n_)}:n_;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function K4(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function CS(t,e,n){if(!e)return t;const r=n&&n.encode||K4;M.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=M.isURLSearchParams(e)?e.toString():new Gm(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class G4{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){M.forEach(this.handlers,function(r){r!==null&&e(r)})}}const r_=G4,RS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},J4=typeof URLSearchParams<"u"?URLSearchParams:Gm,X4=typeof FormData<"u"?FormData:null,Y4=typeof Blob<"u"?Blob:null,Z4={isBrowser:!0,classes:{URLSearchParams:J4,FormData:X4,Blob:Y4},protocols:["http","https","file","blob","url","data"]},Jm=typeof window<"u"&&typeof document<"u",Hf=typeof navigator=="object"&&navigator||void 0,eL=Jm&&(!Hf||["ReactNative","NativeScript","NS"].indexOf(Hf.product)<0),tL=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),nL=Jm&&window.location.href||"http://localhost",rL=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Jm,hasStandardBrowserEnv:eL,hasStandardBrowserWebWorkerEnv:tL,navigator:Hf,origin:nL},Symbol.toStringTag,{value:"Module"})),mt={...rL,...Z4};function iL(t,e){return Xc(t,new mt.classes.URLSearchParams,{visitor:function(n,r,i,s){return mt.isNode&&M.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function sL(t){return M.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function oL(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function kS(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),u=s>=n.length;return o=!o&&M.isArray(i)?i.length:o,u?(M.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!l):((!i[o]||!M.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&M.isArray(i[o])&&(i[o]=oL(i[o])),!l)}if(M.isFormData(t)&&M.isFunction(t.entries)){const n={};return M.forEachEntry(t,(r,i)=>{e(sL(r),i,n,0)}),n}return null}function aL(t,e,n){if(M.isString(t))try{return(e||JSON.parse)(t),M.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Xm={transitional:RS,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=M.isObject(e);if(s&&M.isHTMLForm(e)&&(e=new FormData(e)),M.isFormData(e))return i?JSON.stringify(kS(e)):e;if(M.isArrayBuffer(e)||M.isBuffer(e)||M.isStream(e)||M.isFile(e)||M.isBlob(e)||M.isReadableStream(e))return e;if(M.isArrayBufferView(e))return e.buffer;if(M.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return iL(e,this.formSerializer).toString();if((l=M.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Xc(l?{"files[]":e}:e,u&&new u,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),aL(e)):e}],transformResponse:[function(e){const n=this.transitional||Xm.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(M.isResponse(e)||M.isReadableStream(e))return e;if(e&&M.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?re.from(l,re.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:mt.classes.FormData,Blob:mt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};M.forEach(["delete","get","head","post","put","patch"],t=>{Xm.headers[t]={}});const Ym=Xm,lL=M.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),uL=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&lL[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},i_=Symbol("internals");function wo(t){return t&&String(t).trim().toLowerCase()}function su(t){return t===!1||t==null?t:M.isArray(t)?t.map(su):String(t)}function cL(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const hL=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function fd(t,e,n,r,i){if(M.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!M.isString(e)){if(M.isString(r))return e.indexOf(r)!==-1;if(M.isRegExp(r))return r.test(e)}}function dL(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function fL(t,e){const n=M.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class Yc{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(l,u,c){const d=wo(u);if(!d)throw new Error("header name must be a non-empty string");const p=M.findKey(i,d);(!p||i[p]===void 0||c===!0||c===void 0&&i[p]!==!1)&&(i[p||u]=su(l))}const o=(l,u)=>M.forEach(l,(c,d)=>s(c,d,u));if(M.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(M.isString(e)&&(e=e.trim())&&!hL(e))o(uL(e),n);else if(M.isObject(e)&&M.isIterable(e)){let l={},u,c;for(const d of e){if(!M.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[c=d[0]]=(u=l[c])?M.isArray(u)?[...u,d[1]]:[u,d[1]]:d[1]}o(l,n)}else e!=null&&s(n,e,r);return this}get(e,n){if(e=wo(e),e){const r=M.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return cL(i);if(M.isFunction(n))return n.call(this,i,r);if(M.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=wo(e),e){const r=M.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||fd(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=wo(o),o){const l=M.findKey(r,o);l&&(!n||fd(r,r[l],l,n))&&(delete r[l],i=!0)}}return M.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||fd(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return M.forEach(this,(i,s)=>{const o=M.findKey(r,s);if(o){n[o]=su(i),delete n[s];return}const l=e?dL(s):String(s).trim();l!==s&&delete n[s],n[l]=su(i),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return M.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&M.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[i_]=this[i_]={accessors:{}}).accessors,i=this.prototype;function s(o){const l=wo(o);r[l]||(fL(i,o),r[l]=!0)}return M.isArray(e)?e.forEach(s):s(e),this}}Yc.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);M.reduceDescriptors(Yc.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});M.freezeMethods(Yc);const fn=Yc;function pd(t,e){const n=this||Ym,r=e||n,i=fn.from(r.headers);let s=r.data;return M.forEach(t,function(l){s=l.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function NS(t){return!!(t&&t.__CANCEL__)}function Qs(t,e,n){re.call(this,t??"canceled",re.ERR_CANCELED,e,n),this.name="CanceledError"}M.inherits(Qs,re,{__CANCEL__:!0});function PS(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new re("Request failed with status code "+n.status,[re.ERR_BAD_REQUEST,re.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function pL(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function mL(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(u){const c=Date.now(),d=r[s];o||(o=c),n[i]=u,r[i]=c;let p=s,m=0;for(;p!==i;)m+=n[p++],p=p%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const x=d&&c-d;return x?Math.round(m*1e3/x):void 0}}function gL(t,e){let n=0,r=1e3/e,i,s;const o=(c,d=Date.now())=>{n=d,i=null,s&&(clearTimeout(s),s=null),t(...c)};return[(...c)=>{const d=Date.now(),p=d-n;p>=r?o(c,d):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-p)))},()=>i&&o(i)]}const ic=(t,e,n=3)=>{let r=0;const i=mL(50,250);return gL(s=>{const o=s.loaded,l=s.lengthComputable?s.total:void 0,u=o-r,c=i(u),d=o<=l;r=o;const p={loaded:o,total:l,progress:l?o/l:void 0,bytes:u,rate:c||void 0,estimated:c&&l&&d?(l-o)/c:void 0,event:s,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(p)},n)},s_=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},o_=t=>(...e)=>M.asap(()=>t(...e)),yL=mt.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,mt.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(mt.origin),mt.navigator&&/(msie|trident)/i.test(mt.navigator.userAgent)):()=>!0,vL=mt.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];M.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),M.isString(r)&&o.push("path="+r),M.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function _L(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function wL(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function bS(t,e,n){let r=!_L(e);return t&&(r||n==!1)?wL(t,e):e}const a_=t=>t instanceof fn?{...t}:t;function ki(t,e){e=e||{};const n={};function r(c,d,p,m){return M.isPlainObject(c)&&M.isPlainObject(d)?M.merge.call({caseless:m},c,d):M.isPlainObject(d)?M.merge({},d):M.isArray(d)?d.slice():d}function i(c,d,p,m){if(M.isUndefined(d)){if(!M.isUndefined(c))return r(void 0,c,p,m)}else return r(c,d,p,m)}function s(c,d){if(!M.isUndefined(d))return r(void 0,d)}function o(c,d){if(M.isUndefined(d)){if(!M.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function l(c,d,p){if(p in e)return r(c,d);if(p in t)return r(void 0,c)}const u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(c,d,p)=>i(a_(c),a_(d),p,!0)};return M.forEach(Object.keys({...t,...e}),function(d){const p=u[d]||i,m=p(t[d],e[d],d);M.isUndefined(m)&&p!==l||(n[d]=m)}),n}const DS=t=>{const e=ki({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:l}=e;e.headers=o=fn.from(o),e.url=CS(bS(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let u;if(M.isFormData(n)){if(mt.hasStandardBrowserEnv||mt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((u=o.getContentType())!==!1){const[c,...d]=u?u.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...d].join("; "))}}if(mt.hasStandardBrowserEnv&&(r&&M.isFunction(r)&&(r=r(e)),r||r!==!1&&yL(e.url))){const c=i&&s&&vL.read(s);c&&o.set(i,c)}return e},EL=typeof XMLHttpRequest<"u",TL=EL&&function(t){return new Promise(function(n,r){const i=DS(t);let s=i.data;const o=fn.from(i.headers).normalize();let{responseType:l,onUploadProgress:u,onDownloadProgress:c}=i,d,p,m,x,A;function R(){x&&x(),A&&A(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let I=new XMLHttpRequest;I.open(i.method.toUpperCase(),i.url,!0),I.timeout=i.timeout;function E(){if(!I)return;const C=fn.from("getAllResponseHeaders"in I&&I.getAllResponseHeaders()),O={data:!l||l==="text"||l==="json"?I.responseText:I.response,status:I.status,statusText:I.statusText,headers:C,config:t,request:I};PS(function(w){n(w),R()},function(w){r(w),R()},O),I=null}"onloadend"in I?I.onloadend=E:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(E)},I.onabort=function(){I&&(r(new re("Request aborted",re.ECONNABORTED,t,I)),I=null)},I.onerror=function(){r(new re("Network Error",re.ERR_NETWORK,t,I)),I=null},I.ontimeout=function(){let L=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const O=i.transitional||RS;i.timeoutErrorMessage&&(L=i.timeoutErrorMessage),r(new re(L,O.clarifyTimeoutError?re.ETIMEDOUT:re.ECONNABORTED,t,I)),I=null},s===void 0&&o.setContentType(null),"setRequestHeader"in I&&M.forEach(o.toJSON(),function(L,O){I.setRequestHeader(O,L)}),M.isUndefined(i.withCredentials)||(I.withCredentials=!!i.withCredentials),l&&l!=="json"&&(I.responseType=i.responseType),c&&([m,A]=ic(c,!0),I.addEventListener("progress",m)),u&&I.upload&&([p,x]=ic(u),I.upload.addEventListener("progress",p),I.upload.addEventListener("loadend",x)),(i.cancelToken||i.signal)&&(d=C=>{I&&(r(!C||C.type?new Qs(null,t,I):C),I.abort(),I=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const _=pL(i.url);if(_&&mt.protocols.indexOf(_)===-1){r(new re("Unsupported protocol "+_+":",re.ERR_BAD_REQUEST,t));return}I.send(s||null)})},SL=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,l();const d=c instanceof Error?c:this.reason;r.abort(d instanceof re?d:new Qs(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,s(new re(`timeout ${e} of ms exceeded`,re.ETIMEDOUT))},e);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:u}=r;return u.unsubscribe=()=>M.asap(l),u}},IL=SL,xL=function*(t,e){let n=t.byteLength;if(!e||n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},AL=async function*(t,e){for await(const n of CL(t))yield*xL(n,e)},CL=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},l_=(t,e,n,r)=>{const i=AL(t,e);let s=0,o,l=u=>{o||(o=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:c,value:d}=await i.next();if(c){l(),u.close();return}let p=d.byteLength;if(n){let m=s+=p;n(m)}u.enqueue(new Uint8Array(d))}catch(c){throw l(c),c}},cancel(u){return l(u),i.return()}},{highWaterMark:2})},Zc=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",OS=Zc&&typeof ReadableStream=="function",RL=Zc&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),LS=(t,...e)=>{try{return!!t(...e)}catch{return!1}},kL=OS&&LS(()=>{let t=!1;const e=new Request(mt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),u_=64*1024,Wf=OS&&LS(()=>M.isReadableStream(new Response("").body)),sc={stream:Wf&&(t=>t.body)};Zc&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!sc[e]&&(sc[e]=M.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new re(`Response type '${e}' is not supported`,re.ERR_NOT_SUPPORT,r)})})})(new Response);const NL=async t=>{if(t==null)return 0;if(M.isBlob(t))return t.size;if(M.isSpecCompliantForm(t))return(await new Request(mt.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(M.isArrayBufferView(t)||M.isArrayBuffer(t))return t.byteLength;if(M.isURLSearchParams(t)&&(t=t+""),M.isString(t))return(await RL(t)).byteLength},PL=async(t,e)=>{const n=M.toFiniteNumber(t.getContentLength());return n??NL(e)},bL=Zc&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:l,onUploadProgress:u,responseType:c,headers:d,withCredentials:p="same-origin",fetchOptions:m}=DS(t);c=c?(c+"").toLowerCase():"text";let x=IL([i,s&&s.toAbortSignal()],o),A;const R=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let I;try{if(u&&kL&&n!=="get"&&n!=="head"&&(I=await PL(d,r))!==0){let O=new Request(e,{method:"POST",body:r,duplex:"half"}),z;if(M.isFormData(r)&&(z=O.headers.get("content-type"))&&d.setContentType(z),O.body){const[w,y]=s_(I,ic(o_(u)));r=l_(O.body,u_,w,y)}}M.isString(p)||(p=p?"include":"omit");const E="credentials"in Request.prototype;A=new Request(e,{...m,signal:x,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:E?p:void 0});let _=await fetch(A,m);const C=Wf&&(c==="stream"||c==="response");if(Wf&&(l||C&&R)){const O={};["status","statusText","headers"].forEach(T=>{O[T]=_[T]});const z=M.toFiniteNumber(_.headers.get("content-length")),[w,y]=l&&s_(z,ic(o_(l),!0))||[];_=new Response(l_(_.body,u_,w,()=>{y&&y(),R&&R()}),O)}c=c||"text";let L=await sc[M.findKey(sc,c)||"text"](_,t);return!C&&R&&R(),await new Promise((O,z)=>{PS(O,z,{data:L,headers:fn.from(_.headers),status:_.status,statusText:_.statusText,config:t,request:A})})}catch(E){throw R&&R(),E&&E.name==="TypeError"&&/Load failed|fetch/i.test(E.message)?Object.assign(new re("Network Error",re.ERR_NETWORK,t,A),{cause:E.cause||E}):re.from(E,E&&E.code,t,A)}}),Qf={http:H4,xhr:TL,fetch:bL};M.forEach(Qf,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const c_=t=>`- ${t}`,DL=t=>M.isFunction(t)||t===null||t===!1,VS={getAdapter:t=>{t=M.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!DL(n)&&(r=Qf[(o=String(n)).toLowerCase()],r===void 0))throw new re(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(c_).join(`
`):" "+c_(s[0]):"as no adapter specified";throw new re("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Qf};function md(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Qs(null,t)}function h_(t){return md(t),t.headers=fn.from(t.headers),t.data=pd.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),VS.getAdapter(t.adapter||Ym.adapter)(t).then(function(r){return md(t),r.data=pd.call(t,t.transformResponse,r),r.headers=fn.from(r.headers),r},function(r){return NS(r)||(md(t),r&&r.response&&(r.response.data=pd.call(t,t.transformResponse,r.response),r.response.headers=fn.from(r.response.headers))),Promise.reject(r)})}const MS="1.11.0",eh={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{eh[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const d_={};eh.transitional=function(e,n,r){function i(s,o){return"[Axios v"+MS+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,l)=>{if(e===!1)throw new re(i(o," has been removed"+(n?" in "+n:"")),re.ERR_DEPRECATED);return n&&!d_[o]&&(d_[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,l):!0}};eh.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function OL(t,e,n){if(typeof t!="object")throw new re("options must be an object",re.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const l=t[s],u=l===void 0||o(l,s,t);if(u!==!0)throw new re("option "+s+" must be "+u,re.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new re("Unknown option "+s,re.ERR_BAD_OPTION)}}const ou={assertOptions:OL,validators:eh},_n=ou.validators;class oc{constructor(e){this.defaults=e||{},this.interceptors={request:new r_,response:new r_}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=ki(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&ou.assertOptions(r,{silentJSONParsing:_n.transitional(_n.boolean),forcedJSONParsing:_n.transitional(_n.boolean),clarifyTimeoutError:_n.transitional(_n.boolean)},!1),i!=null&&(M.isFunction(i)?n.paramsSerializer={serialize:i}:ou.assertOptions(i,{encode:_n.function,serialize:_n.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ou.assertOptions(n,{baseUrl:_n.spelling("baseURL"),withXsrfToken:_n.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&M.merge(s.common,s[n.method]);s&&M.forEach(["delete","get","head","post","put","patch","common"],A=>{delete s[A]}),n.headers=fn.concat(o,s);const l=[];let u=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(n)===!1||(u=u&&R.synchronous,l.unshift(R.fulfilled,R.rejected))});const c=[];this.interceptors.response.forEach(function(R){c.push(R.fulfilled,R.rejected)});let d,p=0,m;if(!u){const A=[h_.bind(this),void 0];for(A.unshift(...l),A.push(...c),m=A.length,d=Promise.resolve(n);p<m;)d=d.then(A[p++],A[p++]);return d}m=l.length;let x=n;for(p=0;p<m;){const A=l[p++],R=l[p++];try{x=A(x)}catch(I){R.call(this,I);break}}try{d=h_.call(this,x)}catch(A){return Promise.reject(A)}for(p=0,m=c.length;p<m;)d=d.then(c[p++],c[p++]);return d}getUri(e){e=ki(this.defaults,e);const n=bS(e.baseURL,e.url,e.allowAbsoluteUrls);return CS(n,e.params,e.paramsSerializer)}}M.forEach(["delete","get","head","options"],function(e){oc.prototype[e]=function(n,r){return this.request(ki(r||{},{method:e,url:n,data:(r||{}).data}))}});M.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,l){return this.request(ki(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}oc.prototype[e]=n(),oc.prototype[e+"Form"]=n(!0)});const au=oc;class Zm{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(l=>{r.subscribe(l),s=l}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,l){r.reason||(r.reason=new Qs(s,o,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Zm(function(i){e=i}),cancel:e}}}const LL=Zm;function VL(t){return function(n){return t.apply(null,n)}}function ML(t){return M.isObject(t)&&t.isAxiosError===!0}const Kf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Kf).forEach(([t,e])=>{Kf[e]=t});const FL=Kf;function FS(t){const e=new au(t),n=mS(au.prototype.request,e);return M.extend(n,au.prototype,e,{allOwnKeys:!0}),M.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return FS(ki(t,i))},n}const He=FS(Ym);He.Axios=au;He.CanceledError=Qs;He.CancelToken=LL;He.isCancel=NS;He.VERSION=MS;He.toFormData=Xc;He.AxiosError=re;He.Cancel=He.CanceledError;He.all=function(e){return Promise.all(e)};He.spread=VL;He.isAxiosError=ML;He.mergeConfig=ki;He.AxiosHeaders=fn;He.formToJSON=t=>kS(M.isHTMLForm(t)?new FormData(t):t);He.getAdapter=VS.getAdapter;He.HttpStatusCode=FL;He.default=He;const Hi=He,Wi="https://api.quotable.io",Gf=[{_id:"nietzsche-1",content:"Quem luta com monstros deve ter cuidado para não se tornar um monstro.",author:"Friedrich Nietzsche",tags:["filosofia","moral","transformação"]},{_id:"nietzsche-2",content:"Deus está morto. Deus permanece morto. E nós o matamos.",author:"Friedrich Nietzsche",tags:["filosofia","religião","existencialismo"]},{_id:"nietzsche-3",content:"Aquele que tem um porquê para viver pode suportar quase qualquer como.",author:"Friedrich Nietzsche",tags:["filosofia","vida","propósito"]},{_id:"nietzsche-4",content:"O que não me destrói me torna mais forte.",author:"Friedrich Nietzsche",tags:["filosofia","resiliência","superação"]},{_id:"nietzsche-5",content:"A moralidade é o instinto do rebanho no indivíduo.",author:"Friedrich Nietzsche",tags:["filosofia","moral","sociedade"]},{_id:"marx-1",content:"A religião é o ópio do povo.",author:"Karl Marx",tags:["filosofia","política","religião"]},{_id:"marx-2",content:"Os filósofos apenas interpretaram o mundo de diferentes maneiras; o que importa é transformá-lo.",author:"Karl Marx",tags:["filosofia","ação","transformação"]},{_id:"marx-3",content:"A história de toda sociedade até hoje tem sido a história das lutas de classes.",author:"Karl Marx",tags:["filosofia","história","política"]},{_id:"marx-4",content:"O trabalhador torna-se mais pobre quanto mais riqueza produz.",author:"Karl Marx",tags:["filosofia","economia","trabalho"]},{_id:"plato-1",content:"Os homens são criaturas estranhas, numa mistura de orgulho e timidez.",author:"Platão",tags:["filosofia","psicologia","natureza humana"]},{_id:"plato-2",content:"A admiração é o princípio da filosofia.",author:"Platão",tags:["filosofia","sabedoria","conhecimento"]},{_id:"plato-3",content:"Os homens são criaturas estranhas, numa mistura de orgulho e timidez.",author:"Platão",tags:["filosofia","psicologia","natureza humana"]},{_id:"plato-4",content:"A justiça é dar a cada um o que lhe pertence.",author:"Platão",tags:["filosofia","justiça","ética"]},{_id:"socrates-1",content:"Conhece-te a ti mesmo.",author:"Sócrates",tags:["filosofia","autoconhecimento","sabedoria"]},{_id:"socrates-2",content:"Só sei que nada sei.",author:"Sócrates",tags:["filosofia","humildade","conhecimento"]},{_id:"socrates-3",content:"A vida não examinada não vale a pena ser vivida.",author:"Sócrates",tags:["filosofia","vida","reflexão"]},{_id:"aristotle-1",content:"O homem é por natureza um animal político.",author:"Aristóteles",tags:["filosofia","política","natureza humana"]},{_id:"aristotle-2",content:"A felicidade é a finalidade da vida.",author:"Aristóteles",tags:["filosofia","felicidade","ética"]},{_id:"aristotle-3",content:"A virtude está no meio termo.",author:"Aristóteles",tags:["filosofia","virtude","ética"]},{_id:"kant-1",content:"Age de tal forma que a máxima da tua ação possa valer como princípio universal.",author:"Immanuel Kant",tags:["filosofia","ética","imperativo categórico"]},{_id:"kant-2",content:"O homem não é nada além daquilo que faz.",author:"Immanuel Kant",tags:["filosofia","ação","existencialismo"]},{_id:"kant-3",content:"A coragem é a resistência ao medo, domínio do medo, não a ausência do medo.",author:"Immanuel Kant",tags:["filosofia","coragem","psicologia"]},{_id:"descartes-1",content:"Penso, logo existo.",author:"René Descartes",tags:["filosofia","existencialismo","cogito"]},{_id:"descartes-2",content:"A dúvida é o princípio da sabedoria.",author:"René Descartes",tags:["filosofia","dúvida","sabedoria"]},{_id:"rousseau-1",content:"O homem nasce livre, e por toda parte está acorrentado.",author:"Jean-Jacques Rousseau",tags:["filosofia","liberdade","sociedade"]},{_id:"rousseau-2",content:"A natureza fez o homem feliz e bom, mas a sociedade deprava-o e torna-o miserável.",author:"Jean-Jacques Rousseau",tags:["filosofia","natureza","sociedade"]},{_id:"voltaire-1",content:"Não concordo com uma palavra do que dizes, mas defenderei até a morte o direito de dizê-la.",author:"Voltaire",tags:["filosofia","liberdade","tolerância"]},{_id:"voltaire-2",content:"A ignorância afirma ou nega dogmaticamente; a ciência duvida.",author:"Voltaire",tags:["filosofia","ciência","ignorância"]},{_id:"hobbes-1",content:"O homem é o lobo do homem.",author:"Thomas Hobbes",tags:["filosofia","natureza humana","política"]},{_id:"hobbes-2",content:"A vida do homem é solitária, pobre, sórdida, brutal e curta.",author:"Thomas Hobbes",tags:["filosofia","vida","natureza humana"]},{_id:"locke-1",content:"A mente é uma tábula rasa.",author:"John Locke",tags:["filosofia","psicologia","conhecimento"]},{_id:"locke-2",content:"A liberdade do homem na sociedade consiste em não estar sujeito a nenhum poder legislativo senão aquele que foi estabelecido por consentimento.",author:"John Locke",tags:["filosofia","liberdade","política"]},{_id:"hume-1",content:"A razão é, e deve ser, escrava das paixões.",author:"David Hume",tags:["filosofia","razão","emoção"]},{_id:"hume-2",content:"O hábito é o grande guia da vida humana.",author:"David Hume",tags:["filosofia","hábito","psicologia"]},{_id:"schopenhauer-1",content:"A vida oscila como um pêndulo entre a dor e o tédio.",author:"Arthur Schopenhauer",tags:["filosofia","vida","pessimismo"]},{_id:"schopenhauer-2",content:"A compaixão é a base de toda moralidade.",author:"Arthur Schopenhauer",tags:["filosofia","compaixão","moral"]},{_id:"kierkegaard-1",content:"A vida só pode ser compreendida olhando-se para trás, mas deve ser vivida olhando-se para frente.",author:"Søren Kierkegaard",tags:["filosofia","vida","existencialismo"]},{_id:"kierkegaard-2",content:"A angústia é a vertigem da liberdade.",author:"Søren Kierkegaard",tags:["filosofia","angústia","liberdade"]},{_id:"sartre-1",content:"O inferno são os outros.",author:"Jean-Paul Sartre",tags:["filosofia","existencialismo","sociedade"]},{_id:"sartre-2",content:"O homem está condenado a ser livre.",author:"Jean-Paul Sartre",tags:["filosofia","liberdade","existencialismo"]},{_id:"camus-1",content:"O absurdo nasce da confrontação entre a busca humana e o silêncio irracional do mundo.",author:"Albert Camus",tags:["filosofia","absurdo","existencialismo"]},{_id:"camus-2",content:"Deve-se imaginar Sísifo feliz.",author:"Albert Camus",tags:["filosofia","felicidade","absurdo"]},{_id:"foucault-1",content:"O conhecimento é poder.",author:"Michel Foucault",tags:["filosofia","poder","conhecimento"]},{_id:"foucault-2",content:"Onde há poder, há resistência.",author:"Michel Foucault",tags:["filosofia","poder","resistência"]},{_id:"derrida-1",content:"Não há nada fora do texto.",author:"Jacques Derrida",tags:["filosofia","desconstrução","texto"]},{_id:"deleuze-1",content:"O desejo não falta de nada, ele não falta de objeto.",author:"Gilles Deleuze",tags:["filosofia","desejo","psicologia"]},{_id:"zizek-1",content:"A ideologia não é uma ilusão que esconde a realidade, mas a realidade que esconde que não há realidade.",author:"Slavoj Žižek",tags:["filosofia","ideologia","realidade"]},{_id:"chomsky-1",content:"Se você assume que não há esperança, você garante que não há esperança.",author:"Noam Chomsky",tags:["filosofia","esperança","ação"]},{_id:"machado-1",content:"A vida é cheia de obrigações que a gente cumpre, ou por medo, ou por força de hábito.",author:"Machado de Assis",tags:["literatura","vida","obrigações"]},{_id:"machado-2",content:"Não tive filhos, não transmiti a nenhuma criatura o legado da nossa miséria.",author:"Machado de Assis",tags:["literatura","vida","legado"]},{_id:"pessoa-1",content:"O poeta é um fingidor. Finge tão completamente que chega a fingir que é dor a dor que deveras sente.",author:"Fernando Pessoa",tags:["literatura","poesia","arte"]},{_id:"pessoa-2",content:"Tudo vale a pena se a alma não é pequena.",author:"Fernando Pessoa",tags:["literatura","alma","valor"]},{_id:"clarice-1",content:"Liberdade é pouco. O que eu desejo ainda não tem nome.",author:"Clarice Lispector",tags:["literatura","liberdade","desejo"]},{_id:"guimaraes-1",content:"O correr da vida embrulha tudo. A vida é assim: esquenta e esfria, aperta e daí afrouxa, sossega e depois desinquieta.",author:"João Guimarães Rosa",tags:["literatura","vida","movimento"]},{_id:"freud-1",content:"O sonho é a estrada real para o inconsciente.",author:"Sigmund Freud",tags:["psicologia","inconsciente","sonhos"]},{_id:"freud-2",content:"Às vezes um charuto é apenas um charuto.",author:"Sigmund Freud",tags:["psicologia","simplicidade","humor"]},{_id:"jung-1",content:"Quem olha para fora sonha, quem olha para dentro acorda.",author:"Carl Jung",tags:["psicologia","autoconhecimento","consciência"]},{_id:"einstein-1",content:"A imaginação é mais importante que o conhecimento.",author:"Albert Einstein",tags:["ciência","imaginação","conhecimento"]},{_id:"einstein-2",content:"A vida é como andar de bicicleta. Para manter o equilíbrio, você deve continuar em movimento.",author:"Albert Einstein",tags:["ciência","vida","movimento"]},{_id:"hawking-1",content:"A maior inimiga do conhecimento não é a ignorância, é a ilusão do conhecimento.",author:"Stephen Hawking",tags:["ciência","conhecimento","ignorância"]},{_id:"picasso-1",content:"A arte é a mentira que nos permite conhecer a verdade.",author:"Pablo Picasso",tags:["arte","verdade","criação"]},{_id:"beethoven-1",content:"A música é a revelação mais alta que qualquer filosofia.",author:"Ludwig van Beethoven",tags:["música","filosofia","arte"]},{_id:"mandela-1",content:"A educação é a arma mais poderosa que você pode usar para mudar o mundo.",author:"Nelson Mandela",tags:["política","educação","mudança"]},{_id:"gandhi-1",content:"Seja a mudança que você quer ver no mundo.",author:"Mahatma Gandhi",tags:["política","mudança","ação"]},{_id:"durkheim-1",content:"A sociedade não é simplesmente a soma de indivíduos, mas um sistema formado pela associação deles.",author:"Émile Durkheim",tags:["sociologia","sociedade","indivíduo"]},{_id:"weber-1",content:"A burocracia é a forma mais eficiente de organização humana.",author:"Max Weber",tags:["sociologia","burocracia","organização"]}],UL=()=>{const t=Math.floor(Math.random()*Gf.length),e=Gf[t];return{_id:`local-${Date.now()}-${t}`,content:e.content,author:e.author,tags:e.tags}},bl={async testConnection(){try{return(await Hi.get(`${Wi}/random`,{timeout:5e3})).status===200}catch{return console.warn("API não disponível, usando citações locais"),!1}},async getRandomQuote(){try{const t=await Hi.get(`${Wi}/random`,{timeout:1e4});return console.log("Citação da API:",t.data),t.data}catch{return console.warn("API não disponível, usando citação local"),UL()}},async getQuotesByAuthor(t){var e;try{const n=await Hi.get(`${Wi}/quotes?author=${encodeURIComponent(t)}`,{timeout:1e4});return console.log("Resultados por autor:",((e=n.data.results)==null?void 0:e.length)||0),n.data.results||[]}catch{console.warn("API não disponível para busca por autor")}return[]},async getAuthors(){try{return(await Hi.get(`${Wi}/authors`,{timeout:1e4})).data.results||[]}catch{console.warn("API não disponível para busca de autores")}return[]},async getQuotesByTags(t){try{const e=t.join("|");return(await Hi.get(`${Wi}/quotes?tags=${encodeURIComponent(e)}`,{timeout:1e4})).data.results||[]}catch{console.warn("API não disponível para busca por tags")}return[]},async searchQuotes(t){try{console.log("Buscando na API:",t);const r=(await Hi.get(`${Wi}/quotes?query=${encodeURIComponent(t)}`,{timeout:1e4})).data.results||[];console.log("Resultados por conteúdo:",r.length);const i=await this.getQuotesByAuthor(t);console.log("Resultados por autor:",i.length);const o=[...r,...i].filter((l,u,c)=>u===c.findIndex(d=>d._id===l._id));return console.log("Total de resultados únicos:",o.length),o}catch{console.warn("API não disponível para busca")}return Gf.filter(n=>n.content.toLowerCase().includes(t.toLowerCase())||n.author.toLowerCase().includes(t.toLowerCase())||n.tags.some(r=>r.toLowerCase().includes(t.toLowerCase())))}},Dl={QUOTES:"quotes",USER:"user"},Tt={saveQuotes(t){localStorage.setItem(Dl.QUOTES,JSON.stringify(t))},loadQuotes(){const t=localStorage.getItem(Dl.QUOTES);return t?JSON.parse(t):[]},getQuotes(){return this.loadQuotes()},addQuote(t){const e=this.loadQuotes();e.push(t),this.saveQuotes(e)},updateQuote(t,e){const n=this.loadQuotes(),r=n.findIndex(i=>i.id===t);r!==-1&&(n[r]={...n[r],...e},this.saveQuotes(n))},removeQuote(t){const n=this.loadQuotes().filter(r=>r.id!==t);this.saveQuotes(n)},removeDuplicates(){const t=this.loadQuotes(),e=new Set,n=[];for(const r of t){const i=`${r.text.toLowerCase().trim()}-${r.author.toLowerCase().trim()}`;if(e.has(i)){const s=n.findIndex(o=>`${o.text.toLowerCase().trim()}-${o.author.toLowerCase().trim()}`===i);if(s!==-1){const o=n[s];r.isFavorite&&!o.isFavorite&&(n[s]=r)}}else e.add(i),n.push(r)}this.saveQuotes(n)},saveUser(t){localStorage.setItem(Dl.USER,JSON.stringify(t))},loadUser(){const t=localStorage.getItem(Dl.USER);return t?JSON.parse(t):null},backupQuotes(){const t=this.loadQuotes();if(t.length>0){const e=`quotes_backup_${Date.now()}`;localStorage.setItem(e,JSON.stringify(t)),console.log(`Backup criado: ${e} com ${t.length} citações`)}},restoreFromBackup(){const e=Object.keys(localStorage).filter(n=>n.startsWith("quotes_backup_"));if(e.length>0){const n=e.sort().pop();if(n)try{const r=localStorage.getItem(n);if(r){const i=JSON.parse(r);if(Array.isArray(i)&&i.length>0)return this.saveQuotes(i),console.log(`Restaurado backup: ${n} com ${i.length} citações`),i}}catch(r){console.error("Erro ao restaurar backup:",r)}}return null},validateAndFixQuotes(){const t=this.loadQuotes();let e=!1;const n=t.map(r=>{const i={id:r.id||Date.now().toString(),text:r.text||"",author:r.author||"",source:r.source||"",category:r.category||"philosophy",tags:Array.isArray(r.tags)?r.tags:[],isFavorite:!!r.isFavorite,isCustom:!!r.isCustom,createdAt:r.createdAt||new Date().toISOString()};return JSON.stringify(r)!==JSON.stringify(i)&&(e=!0),i});return e&&(this.saveQuotes(n),console.log("Citações corrigidas e salvas")),n},getQuotesStats(){const t=this.loadQuotes(),e=new Date,n=new Date(e.getTime()-7*24*60*60*1e3);return{total:t.length,favorites:t.filter(r=>r.isFavorite).length,custom:t.filter(r=>r.isCustom).length,recent:t.filter(r=>new Date(r.createdAt)>n).length}}};class zL{async getUserQuotes(e){try{const n=ud(vo(zt,"quotes"),Nl("userId","==",e),cd("createdAt","desc")),r=await Kv(n),i=[];return r.forEach(s=>{var l,u,c;const o=s.data();i.push({id:s.id,text:o.text,author:o.author,source:o.source||"",category:o.category||"other",tags:o.tags||[],isFavorite:o.isFavorite||!1,isCustom:o.isCustom||!1,createdAt:((c=(u=(l=o.createdAt)==null?void 0:l.toDate)==null?void 0:u.call(l))==null?void 0:c.toISOString())||new Date().toISOString(),userId:o.userId})}),i}catch(n){throw console.error("Erro ao buscar citações:",n),new Error("Erro ao buscar citações: "+n.message)}}async addQuote(e,n){try{const r={...n,userId:e,createdAt:_e.now(),isFavorite:n.isFavorite||!1,isCustom:n.isCustom||!1};return{id:(await EO(vo(zt,"quotes"),r)).id,...n,userId:e,createdAt:r.createdAt.toDate().toISOString()}}catch(r){throw console.error("Erro ao adicionar citação:",r),new Error("Erro ao adicionar citação: "+r.message)}}async updateQuote(e,n){try{const r=jn(zt,"quotes",e);await jf(r,n)}catch(r){throw console.error("Erro ao atualizar citação:",r),new Error("Erro ao atualizar citação: "+r.message)}}async deleteQuote(e){try{await wO(jn(zt,"quotes",e))}catch(n){throw console.error("Erro ao remover citação:",n),new Error("Erro ao remover citação: "+n.message)}}async toggleFavorite(e,n){try{await this.updateQuote(e,{isFavorite:n})}catch(r){throw console.error("Erro ao alternar favorito:",r),new Error("Erro ao alternar favorito: "+r.message)}}async searchQuotes(e,n){try{const r=await this.getUserQuotes(e),i=n.toLowerCase();return r.filter(s=>s.text.toLowerCase().includes(i)||s.author.toLowerCase().includes(i)||s.tags.some(o=>o.toLowerCase().includes(i)))}catch(r){throw console.error("Erro ao buscar citações:",r),new Error("Erro ao buscar citações: "+r.message)}}async getFavoriteQuotes(e){try{const n=ud(vo(zt,"quotes"),Nl("userId","==",e),Nl("isFavorite","==",!0),cd("createdAt","desc")),r=await Kv(n),i=[];return r.forEach(s=>{var l,u,c;const o=s.data();i.push({id:s.id,text:o.text,author:o.author,source:o.source||"",category:o.category||"other",tags:o.tags||[],isFavorite:o.isFavorite||!1,isCustom:o.isCustom||!1,createdAt:((c=(u=(l=o.createdAt)==null?void 0:l.toDate)==null?void 0:u.call(l))==null?void 0:c.toISOString())||new Date().toISOString(),userId:o.userId})}),i}catch(n){throw console.error("Erro ao buscar favoritas:",n),new Error("Erro ao buscar favoritas: "+n.message)}}async migrateFromLocalStorage(e,n){try{const r=IO(zt);for(const i of n){const s={text:i.text,author:i.author,source:i.source||"",category:i.category||"other",tags:i.tags||[],isFavorite:i.isFavorite||!1,isCustom:i.isCustom||!1,createdAt:_e.now(),userId:e},o=jn(vo(zt,"quotes"));r.set(o,s)}await r.commit(),console.log(`Migradas ${n.length} citações para Firebase`)}catch(r){throw console.error("Erro ao migrar citações:",r),new Error("Erro ao migrar citações: "+r.message)}}onQuotesChange(e,n){const r=ud(vo(zt,"quotes"),Nl("userId","==",e),cd("createdAt","desc"));return TO(r,i=>{const s=[];i.forEach(o=>{var u,c,d;const l=o.data();s.push({id:o.id,text:l.text,author:l.author,source:l.source||"",category:l.category||"other",tags:l.tags||[],isFavorite:l.isFavorite||!1,isCustom:l.isCustom||!1,createdAt:((d=(c=(u=l.createdAt)==null?void 0:u.toDate)==null?void 0:c.call(u))==null?void 0:d.toISOString())||new Date().toISOString(),userId:l.userId})}),n(s)})}async getUserStats(e){try{const n=await this.getUserQuotes(e),r={},i={};n.forEach(l=>{r[l.author]=(r[l.author]||0)+1,i[l.category]=(i[l.category]||0)+1});const s=Object.entries(r).sort(([,l],[,u])=>u-l).slice(0,5).map(([l])=>l),o=Object.entries(i).sort(([,l],[,u])=>u-l).slice(0,5).map(([l])=>l);return{totalQuotes:n.length,totalFavorites:n.filter(l=>l.isFavorite).length,totalCustom:n.filter(l=>l.isCustom).length,topAuthors:s,topCategories:o}}catch(n){throw console.error("Erro ao obter estatísticas:",n),new Error("Erro ao obter estatísticas: "+n.message)}}}const wn=new zL,BL=t=>{const[e,n]=U.useState([]),[r,i]=U.useState(!0),[s,o]=U.useState(null);return U.useEffect(()=>{if(!t){n([]),i(!1);return}(async()=>{try{i(!0),o(null);const I=await wn.getUserQuotes(t);n(I)}catch(I){o(I.message),console.error("Erro ao carregar citações:",I)}finally{i(!1)}})()},[t]),U.useEffect(()=>{if(!t)return;const R=wn.onQuotesChange(t,I=>{n(I)});return()=>R()},[t]),{quotes:e,loading:r,error:s,addQuote:async R=>{if(!t)throw new Error("Usuário não autenticado");try{return o(null),await wn.addQuote(t,R)}catch(I){throw o(I.message),I}},updateQuote:async(R,I)=>{try{o(null),await wn.updateQuote(R,I)}catch(E){throw o(E.message),E}},deleteQuote:async R=>{try{o(null),await wn.deleteQuote(R)}catch(I){throw o(I.message),I}},toggleFavorite:async(R,I)=>{try{o(null),await wn.toggleFavorite(R,I)}catch(E){throw o(E.message),E}},searchQuotes:async R=>{if(!t)return[];try{return o(null),await wn.searchQuotes(t,R)}catch(I){throw o(I.message),I}},getFavorites:async()=>{if(!t)return[];try{return o(null),await wn.getFavoriteQuotes(t)}catch(R){throw o(R.message),R}},migrateFromLocalStorage:async R=>{if(!t)throw new Error("Usuário não autenticado");try{o(null),await wn.migrateFromLocalStorage(t,R)}catch(I){throw o(I.message),I}},getStats:async()=>{if(!t)return null;try{return o(null),await wn.getUserStats(t)}catch(R){throw o(R.message),R}}}},jL=()=>{const t=cn.getCurrentUser(),{quotes:e,addQuote:n,deleteQuote:r,toggleFavorite:i,migrateFromLocalStorage:s}=BL((t==null?void 0:t.uid)||null),[o,l]=U.useState(null),[u,c]=U.useState(""),[d,p]=U.useState("all"),[m,x]=U.useState([]),[A,R]=U.useState(!1),[I,E]=U.useState(!0),[_,C]=U.useState(!1),[L,O]=U.useState(!1),[z,w]=U.useState(null),[y,T]=U.useState(!1),[k,S]=U.useState("all"),[b,N]=U.useState("date"),[Ve,vt]=U.useState("desc"),[Kt,Rt]=U.useState("idle");U.useEffect(()=>{H()},[]);const H=async()=>{try{E(!0);const F=await bl.getRandomQuote();if(l(F),t&&Kt==="idle"){const J=Tt.getQuotes();if(J.length>0&&e.length===0){Rt("migrating");try{await s(J),Rt("completed"),localStorage.removeItem("sapientia_quotes"),console.log("Migração concluída com sucesso!")}catch(me){console.error("Erro na migração:",me),Rt("error")}}}}catch(F){console.error("Erro ao carregar dados:",F)}finally{E(!1)}},X=async()=>{try{T(!0);const F=await bl.getRandomQuote();l(null),setTimeout(()=>{l(F)},200)}catch(F){console.error("Erro ao buscar nova citação:",F)}finally{T(!1)}},ee=async()=>{if(!o)return;if(e.some(me=>me.text.toLowerCase().trim()===o.content.toLowerCase().trim()&&me.author.toLowerCase().trim()===o.author.toLowerCase().trim())){O(!0),setTimeout(()=>O(!1),2e3);return}const J={id:Date.now().toString(),text:o.content,author:o.author,source:"",category:"philosophy",tags:o.tags||[],isFavorite:!1,isCustom:!1,createdAt:new Date().toISOString()};await n(J),O(!0),setTimeout(()=>O(!1),2e3)},pe=o?e.some(F=>F.text.toLowerCase().trim()===o.content.toLowerCase().trim()&&F.author.toLowerCase().trim()===o.author.toLowerCase().trim()):!1,ce=async()=>{if(!o)return;const F=`"${o.content}" — ${o.author}`;try{await navigator.clipboard.writeText(F),C(!0),setTimeout(()=>C(!1),2e3)}catch(J){console.error("Erro ao copiar:",J)}},we=async()=>{if(!u.trim()){x([]),w(null);return}R(!0),w(null);try{if(d==="api"||d==="all"){const F=await bl.searchQuotes(u);x(F),F.length===0&&w("Nenhuma citação encontrada. Tente outros termos ou adicione manualmente.")}else if(d==="saved"){const F=e.filter(J=>J.text.toLowerCase().includes(u.toLowerCase())||J.author.toLowerCase().includes(u.toLowerCase())||J.tags.some(me=>me.toLowerCase().includes(u.toLowerCase())));x([]),w(F.length===0?"Nenhuma citação salva encontrada.":null)}else{const J=(await bl.searchQuotes(u)).filter(me=>me.tags.some(ze=>ze.toLowerCase().includes(d)));x(J),J.length===0&&w(`Nenhuma citação de ${kt(d)} encontrada.`)}}catch(F){console.error("Erro na busca:",F),w("Erro ao buscar citações. Verifique sua conexão.")}finally{R(!1)}},kt=F=>({philosophy:"Filosofia",literature:"Literatura",psychology:"Psicologia",science:"Ciência",politics:"Política"})[F]||F,se=async F=>{try{const J=e.find(me=>me.id===F);J&&await i(F,!J.isFavorite)}catch(J){console.error("Erro ao alternar favorito:",J)}},Ae=async F=>{if(t)try{if(e.some(ze=>ze.text.toLowerCase().trim()===F.content.toLowerCase().trim()&&ze.author.toLowerCase().trim()===F.author.toLowerCase().trim()))return;const me={text:F.content,author:F.author,source:"",category:"philosophy",tags:F.tags||[],isFavorite:!1,isCustom:!1};await n(me)}catch(J){console.error("Erro ao salvar citação:",J)}},st=async F=>{const J=e.find(ze=>ze.id===F);if(!J)return;if(confirm(`Tem certeza que deseja remover a citação:

"${J.text}"
— ${J.author}

Esta ação não pode ser desfeita.`))try{await r(F)}catch(ze){console.error("Erro ao remover citação:",ze)}},Fi=async F=>{const J=`"${F.text}" — ${F.author}`;try{await navigator.clipboard.writeText(J)}catch(me){console.error("Erro ao copiar:",me)}},Ui=e.filter(F=>{const J=!u||F.text.toLowerCase().includes(u.toLowerCase())||F.author.toLowerCase().includes(u.toLowerCase())||F.tags.some(ze=>ze.toLowerCase().includes(u.toLowerCase())),me=k==="all"||k==="favorites"&&F.isFavorite||k==="custom"&&F.isCustom||k==="recent"&&new Date().getTime()-new Date(F.createdAt).getTime()<7*24*60*60*1e3;return J&&me}).sort((F,J)=>{let me=0;switch(b){case"date":me=new Date(F.createdAt).getTime()-new Date(J.createdAt).getTime();break;case"author":me=F.author.localeCompare(J.author);break;case"text":me=F.text.localeCompare(J.text);break}return Ve==="asc"?me:-me});return I?g("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center",children:P("div",{className:"text-center",children:[g("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),g("p",{className:"mt-4 text-neutral-600",children:"Carregando..."})]})}):g("div",{className:"min-h-screen bg-neutral-50",children:P("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[g("div",{className:"mb-12",children:o&&P("div",{className:"bg-gradient-to-br from-white to-neutral-50 rounded-2xl shadow-sm border border-neutral-200 p-8 quote-entrance",children:[P("div",{className:"flex items-center justify-between mb-6",children:[P("div",{children:[g("h2",{className:"text-2xl font-serif font-bold text-neutral-800 mb-2",children:"Citação Aleatória"}),g("p",{className:"text-neutral-600",children:"Descubra pensamentos inspiradores"})]}),g("button",{onClick:X,disabled:y,className:"p-3 text-primary-600 hover:text-primary-700 hover:bg-primary-50 rounded-xl transition-all duration-200 disabled:opacity-50",title:"Nova citação",children:g(U1,{size:20,className:y?"animate-spin":""})})]}),P("div",{className:"mb-8",children:[P("blockquote",{className:"text-2xl text-neutral-700 font-serif italic mb-6 leading-relaxed",children:['"',o.content,'"']}),P("footer",{className:"text-neutral-600 text-lg",children:["— ",o.author,o.tags&&o.tags.length>0&&g("div",{className:"mt-3 flex flex-wrap gap-2",children:o.tags.map(F=>g("span",{className:"px-3 py-1 bg-neutral-100 text-neutral-600 text-sm rounded-full",children:F},F))})]})]}),P("div",{className:"flex items-center space-x-4",children:[P("button",{onClick:ee,disabled:pe,className:`flex items-center space-x-2 px-6 py-3 rounded-xl transition-all duration-200 ${pe||L?"bg-green-600 text-white scale-105 cursor-not-allowed":"bg-primary-600 hover:bg-primary-700 text-white hover:scale-105"}`,children:[pe||L?g(Ou,{size:18}):g(Dr,{size:18}),g("span",{className:"font-medium",children:pe?"Salvo":L?"Salvo!":"Salvar"})]}),P("button",{onClick:ce,className:`flex items-center space-x-2 px-6 py-3 rounded-xl transition-all duration-200 ${_?"bg-green-600 text-white scale-105":"bg-neutral-100 hover:bg-neutral-200 text-neutral-700 hover:scale-105"}`,children:[_?g(Ou,{size:18}):g(Wl,{size:18}),g("span",{className:"font-medium",children:_?"Copiado!":"Copiar"})]}),P("button",{onClick:()=>{const F=`"${o.content}" — ${o.author}`;navigator.share?navigator.share({title:"Citação Aleatória - Sapientia",text:F}):ce()},className:"flex items-center space-x-2 px-6 py-3 bg-neutral-100 hover:bg-neutral-200 text-neutral-700 rounded-xl transition-all duration-200 hover:scale-105",children:[g(Ql,{size:18}),g("span",{className:"font-medium",children:"Compartilhar"})]})]})]})}),g("div",{className:"mb-12",children:P("div",{className:"bg-white rounded-2xl shadow-sm border border-neutral-200 p-8",children:[g("h3",{className:"text-xl font-serif font-bold text-neutral-800 mb-6",children:"Buscar Citações"}),P("div",{className:"space-y-6",children:[P("div",{className:"relative",children:[g(pf,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-neutral-400",size:20}),g("input",{type:"text",placeholder:"Buscar por citação, autor, palavras-chave...",value:u,onChange:F=>c(F.target.value),onKeyPress:F=>F.key==="Enter"&&we(),className:"w-full pl-12 pr-4 py-4 border border-neutral-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent text-lg"})]}),P("div",{className:"flex items-center space-x-4",children:[P("div",{className:"flex items-center space-x-2",children:[g(F1,{size:16,className:"text-neutral-500"}),g("span",{className:"text-sm font-medium text-neutral-700",children:"Filtrar por:"})]}),g("div",{className:"flex flex-wrap gap-2",children:[{value:"all",label:"Tudo"},{value:"saved",label:"Salvas"},{value:"api",label:"API"},{value:"philosophy",label:"Filosofia"},{value:"literature",label:"Literatura"},{value:"psychology",label:"Psicologia"},{value:"science",label:"Ciência"},{value:"politics",label:"Política"}].map(F=>g("button",{onClick:()=>p(F.value),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${d===F.value?"bg-primary-600 text-white scale-105":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200 hover:scale-105"}`,children:F.label},F.value))}),g("button",{onClick:we,disabled:A,className:"ml-auto bg-primary-600 hover:bg-primary-700 text-white px-8 py-3 rounded-xl font-medium transition-all duration-200 disabled:opacity-50 hover:scale-105",children:A?"Buscando...":"Buscar"})]})]})]})}),u&&(d==="api"||d==="all"||d==="philosophy"||d==="literature"||d==="psychology"||d==="science"||d==="politics")&&g("div",{className:"mb-12",children:P("div",{className:"bg-white rounded-2xl shadow-sm border border-neutral-200 p-8",children:[P("h3",{className:"text-xl font-serif font-bold text-neutral-800 mb-6",children:[d==="all"||d==="api"?"Resultados da API":`Resultados de ${kt(d)}`," (",m.length," encontrados)"]}),z&&g("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:P("div",{className:"flex items-center space-x-2",children:[g(Jh,{size:20,className:"text-yellow-600"}),g("p",{className:"text-yellow-800",children:z})]})}),g("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:m.map(F=>{var me;const J=e.some(ze=>ze.text.toLowerCase().trim()===F.content.toLowerCase().trim()&&ze.author.toLowerCase().trim()===F.author.toLowerCase().trim());return P("div",{className:"bg-neutral-50 rounded-xl p-6 hover:shadow-md transition-shadow duration-200",children:[P("blockquote",{className:"text-neutral-700 font-serif italic mb-4",children:['"',F.content,'"']}),P("footer",{className:"text-neutral-600 mb-4",children:["— ",F.author]}),g("div",{className:"flex flex-wrap gap-1 mb-4",children:(me=F.tags)==null?void 0:me.slice(0,3).map(ze=>g("span",{className:"px-2 py-1 bg-neutral-100 text-neutral-600 text-xs rounded-full",children:ze},ze))}),g("div",{className:"flex items-center justify-between",children:g("button",{onClick:()=>Ae(F),disabled:J,className:`text-sm font-medium transition-colors ${J?"text-neutral-400 cursor-not-allowed":"text-primary-600 hover:text-primary-700"}`,children:J?"Já salvo":"Salvar"})})]},F._id)})})]})}),u&&d==="saved"&&g("div",{className:"mb-12",children:P("div",{className:"bg-white rounded-2xl shadow-sm border border-neutral-200 p-8",children:[g("h3",{className:"text-xl font-serif font-bold text-neutral-800 mb-6",children:"Suas Citações Salvas"}),z&&g("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:P("div",{className:"flex items-center space-x-2",children:[g(Jh,{size:20,className:"text-yellow-600"}),g("p",{className:"text-yellow-800",children:z})]})}),g("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:Ui.map(F=>P("div",{className:"bg-neutral-50 rounded-xl p-6 hover:shadow-md transition-shadow duration-200",children:[P("blockquote",{className:"text-neutral-700 font-serif italic mb-4",children:['"',F.text,'"']}),P("footer",{className:"text-neutral-600 mb-4",children:["— ",F.author]}),F.tags.length>0&&g("div",{className:"flex flex-wrap gap-1 mb-4",children:F.tags.slice(0,3).map(J=>g("span",{className:"px-2 py-1 bg-neutral-100 text-neutral-600 text-xs rounded-full",children:J},J))}),P("div",{className:"flex items-center justify-between pt-4 border-t border-neutral-200",children:[P("div",{className:"flex items-center space-x-2",children:[g("button",{onClick:()=>se(F.id),className:`p-2 rounded-lg transition-all duration-200 hover:scale-110 ${F.isFavorite?"text-red-500 hover:text-red-600":"text-neutral-400 hover:text-red-500"}`,title:F.isFavorite?"Desfavoritar":"Favoritar",children:g(Dr,{className:`w-4 h-4 ${F.isFavorite?"fill-current":""}`})}),g("button",{onClick:()=>Fi(F),className:"p-2 text-neutral-400 hover:text-neutral-600 rounded-lg transition-all duration-200 hover:scale-110",title:"Copiar",children:g(Wl,{className:"w-4 h-4"})}),g("button",{onClick:()=>{const J=`"${F.text}" — ${F.author}`;navigator.share?navigator.share({title:"Citação - Sapientia",text:J}):Fi(F)},className:"p-2 text-neutral-400 hover:text-neutral-600 rounded-lg transition-all duration-200 hover:scale-110",title:"Compartilhar",children:g(Ql,{className:"w-4 h-4"})})]}),P("div",{className:"flex items-center space-x-2",children:[F.isCustom&&g("span",{className:"text-xs text-accent-600 bg-accent-50 px-2 py-1 rounded-full",children:"Personalizada"}),g("button",{onClick:()=>st(F.id),className:"p-2 text-neutral-400 hover:text-red-500 rounded-lg transition-all duration-200 hover:scale-110",title:"Remover",children:g(Lu,{className:"w-4 h-4"})})]})]})]},F.id))})]})}),P("div",{className:"bg-white rounded-2xl shadow-sm border border-neutral-200 p-8",children:[P("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8",children:[P("div",{children:[g("h3",{className:"text-2xl font-serif font-bold text-neutral-800 mb-2",children:"Suas Citações"}),P("p",{className:"text-neutral-600",children:[Ui.length," de ",e.length," citações"]}),Kt==="migrating"&&P("div",{className:"mt-2 flex items-center space-x-2 text-sm text-blue-600",children:[g(XC,{className:"w-4 h-4 animate-pulse"}),g("span",{children:"Migrando citações para a nuvem..."})]}),Kt==="completed"&&P("div",{className:"mt-2 flex items-center space-x-2 text-sm text-green-600",children:[g(M1,{className:"w-4 h-4"}),g("span",{children:"Migração concluída! Citações sincronizadas na nuvem."})]}),Kt==="error"&&P("div",{className:"mt-2 flex items-center space-x-2 text-sm text-red-600",children:[g(Jh,{className:"w-4 h-4"}),g("span",{children:"Erro na migração. Tente novamente."})]})]}),P("div",{className:"flex flex-wrap gap-3 mt-4 sm:mt-0",children:[P("div",{className:"flex items-center space-x-2",children:[g("span",{className:"text-sm font-medium text-neutral-700",children:"Filtrar:"}),g("div",{className:"flex space-x-1",children:[{value:"all",label:"Todas"},{value:"favorites",label:"Favoritas"},{value:"custom",label:"Personalizadas"},{value:"recent",label:"Recentes"}].map(F=>g("button",{onClick:()=>S(F.value),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all duration-200 ${k===F.value?"bg-primary-600 text-white scale-105":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200 hover:scale-105"}`,children:F.label},F.value))})]}),P("div",{className:"flex items-center space-x-2",children:[g("span",{className:"text-sm font-medium text-neutral-700",children:"Ordenar:"}),P("select",{value:b,onChange:F=>N(F.target.value),className:"px-3 py-1.5 text-xs border border-neutral-300 rounded-lg focus:ring-1 focus:ring-primary-500",children:[g("option",{value:"date",children:"Data"}),g("option",{value:"author",children:"Autor"}),g("option",{value:"text",children:"Texto"})]}),g("button",{onClick:()=>vt(F=>F==="asc"?"desc":"asc"),className:"p-1.5 text-neutral-600 hover:text-neutral-800 transition-colors rounded-lg hover:bg-neutral-100",title:`Ordenar ${Ve==="asc"?"decrescente":"crescente"}`,children:Ve==="asc"?"↑":"↓"})]}),P("div",{className:"flex items-center space-x-2",children:[g("button",{onClick:()=>{alert("Funcionalidade de limpar duplicações será implementada em breve.")},className:"px-3 py-1.5 text-xs bg-yellow-100 text-yellow-700 rounded-lg hover:bg-yellow-200 transition-all duration-200",title:"Remover citações duplicadas",children:"Limpar Duplicações"}),g("button",{onClick:()=>{alert("Funcionalidade de validar citações será implementada em breve.")},className:"px-3 py-1.5 text-xs bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-all duration-200",title:"Validar e corrigir citações",children:"Validar Citações"}),g("button",{onClick:()=>{alert("Funcionalidade de recuperar backup será implementada em breve.")},className:"px-3 py-1.5 text-xs bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-all duration-200",title:"Tentar recuperar de backup",children:"Recuperar Backup"})]})]})]}),e.length>0&&P("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[P("div",{className:"bg-gradient-to-br from-primary-50 to-primary-100 rounded-xl p-4 text-center",children:[g("div",{className:"text-2xl font-bold text-primary-600",children:e.length}),g("div",{className:"text-sm text-neutral-600",children:"Total"})]}),P("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-4 text-center",children:[g("div",{className:"text-2xl font-bold text-red-500",children:e.filter(F=>F.isFavorite).length}),g("div",{className:"text-sm text-neutral-600",children:"Favoritas"})]}),P("div",{className:"bg-gradient-to-br from-accent-50 to-accent-100 rounded-xl p-4 text-center",children:[g("div",{className:"text-2xl font-bold text-accent-600",children:e.filter(F=>F.isCustom).length}),g("div",{className:"text-sm text-neutral-600",children:"Personalizadas"})]}),P("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 text-center",children:[g("div",{className:"text-2xl font-bold text-green-600",children:e.filter(F=>new Date().getTime()-new Date(F.createdAt).getTime()<7*24*60*60*1e3).length}),g("div",{className:"text-sm text-neutral-600",children:"Esta semana"})]})]}),Ui.length===0?P("div",{className:"text-center py-12",children:[g("p",{className:"text-neutral-600 mb-4",children:u?"Nenhuma citação encontrada.":"Você ainda não tem citações salvas."}),!u&&g("p",{className:"text-sm text-neutral-500",children:"Adicione suas primeiras citações ou busque na API!"})]}):g("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:Ui.map(F=>P("div",{className:"bg-neutral-50 rounded-xl p-6 hover:shadow-md transition-all duration-200 hover:scale-105",children:[P("blockquote",{className:"text-neutral-700 font-serif italic mb-4",children:['"',F.text,'"']}),P("footer",{className:"text-neutral-600 mb-4",children:["— ",F.author]}),F.tags.length>0&&g("div",{className:"flex flex-wrap gap-1 mb-4",children:F.tags.slice(0,3).map(J=>g("span",{className:"px-2 py-1 bg-neutral-100 text-neutral-600 text-xs rounded-full",children:J},J))}),P("div",{className:"text-xs text-neutral-500 mb-4",children:["Adicionado em ",new Date(F.createdAt).toLocaleDateString("pt-BR")]}),P("div",{className:"flex items-center justify-between pt-4 border-t border-neutral-200",children:[P("div",{className:"flex items-center space-x-2",children:[g("button",{onClick:()=>se(F.id),className:`p-2 rounded-lg transition-all duration-200 hover:scale-110 ${F.isFavorite?"text-red-500 hover:text-red-600":"text-neutral-400 hover:text-red-500"}`,title:F.isFavorite?"Desfavoritar":"Favoritar",children:g(Dr,{className:`w-4 h-4 ${F.isFavorite?"fill-current":""}`})}),g("button",{onClick:()=>Fi(F),className:"p-2 text-neutral-400 hover:text-neutral-600 rounded-lg transition-all duration-200 hover:scale-110",title:"Copiar",children:g(Wl,{className:"w-4 h-4"})}),g("button",{onClick:()=>{const J=`"${F.text}" — ${F.author}`;navigator.share?navigator.share({title:"Citação - Sapientia",text:J}):Fi(F)},className:"p-2 text-neutral-400 hover:text-neutral-600 rounded-lg transition-all duration-200 hover:scale-110",title:"Compartilhar",children:g(Ql,{className:"w-4 h-4"})})]}),P("div",{className:"flex items-center space-x-2",children:[F.isCustom&&g("span",{className:"text-xs text-accent-600 bg-accent-50 px-2 py-1 rounded-full",children:"Personalizada"}),g("button",{onClick:()=>st(F.id),className:"p-2 text-neutral-400 hover:text-red-500 rounded-lg transition-all duration-200 hover:scale-110",title:"Remover",children:g(Lu,{className:"w-4 h-4"})})]})]})]},F.id))})]})]})})},$L=()=>{const[t,e]=U.useState([]),[n,r]=U.useState(!0),[i,s]=U.useState(""),[o,l]=U.useState("date"),[u,c]=U.useState("desc"),[d,p]=U.useState(null),[m,x]=U.useState(null);U.useEffect(()=>{A()},[]);const A=()=>{const O=Tt.validateAndFixQuotes(),w=(O.length>0?O:Tt.getQuotes()).filter(y=>y.isFavorite);e(w),r(!1)},R=O=>{var w;const z=t.map(y=>y.id===O?{...y,isFavorite:!y.isFavorite}:y);e(z.filter(y=>y.isFavorite)),Tt.updateQuote(O,{isFavorite:!((w=t.find(y=>y.id===O))!=null&&w.isFavorite)})},I=async O=>{const z=`"${O.text}" — ${O.author}`;try{await navigator.clipboard.writeText(z),p(O.id),setTimeout(()=>p(null),2e3)}catch(w){console.error("Erro ao copiar:",w)}},E=async O=>{const z=`"${O.text}" — ${O.author}`;try{navigator.share?(await navigator.share({title:"Citação Favorita - Sapientia",text:z}),x(O.id),setTimeout(()=>x(null),2e3)):I(O)}catch(w){console.error("Erro ao compartilhar:",w)}},_=O=>{const z=t.find(y=>y.id===O);if(!z)return;if(confirm(`Tem certeza que deseja remover a citação:

"${z.text}"
— ${z.author}

Esta ação não pode ser desfeita.`)){const y=t.filter(T=>T.id!==O);e(y),Tt.removeQuote(O)}},C=t.filter(O=>!i||O.text.toLowerCase().includes(i.toLowerCase())||O.author.toLowerCase().includes(i.toLowerCase())||O.tags.some(z=>z.toLowerCase().includes(i.toLowerCase()))).sort((O,z)=>{let w=0;switch(o){case"date":w=new Date(O.createdAt).getTime()-new Date(z.createdAt).getTime();break;case"author":w=O.author.localeCompare(z.author);break;case"text":w=O.text.localeCompare(z.text);break}return u==="asc"?w:-w}),L={total:t.length,custom:t.filter(O=>O.isCustom).length,recent:t.filter(O=>new Date().getTime()-new Date(O.createdAt).getTime()<7*24*60*60*1e3).length,thisMonth:t.filter(O=>{const z=new Date(O.createdAt),w=new Date;return z.getMonth()===w.getMonth()&&z.getFullYear()===w.getFullYear()}).length};return n?g("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center",children:P("div",{className:"text-center",children:[g("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),g("p",{className:"mt-4 text-neutral-600",children:"Carregando..."})]})}):g("div",{className:"min-h-screen bg-neutral-50",children:P("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[P("div",{className:"mb-8",children:[P(Kn,{to:"/",className:"inline-flex items-center space-x-2 text-neutral-600 hover:text-neutral-800 transition-colors mb-6",children:[g(Ic,{size:16}),g("span",{children:"Voltar"})]}),P("div",{className:"flex items-center justify-between mb-6",children:[P("div",{className:"flex items-center space-x-3",children:[g(Dr,{className:"w-8 h-8 text-red-500 fill-current"}),P("div",{children:[g("h1",{className:"text-3xl font-serif font-bold text-neutral-800",children:"Favoritas"}),P("p",{className:"text-neutral-600",children:[t.length," citações favoritas"]})]})]}),g("button",{onClick:A,className:"p-3 text-primary-600 hover:text-primary-700 hover:bg-primary-50 rounded-xl transition-all duration-200",title:"Atualizar",children:g(U1,{size:20})})]}),t.length>0&&P("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[P("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-4 text-center",children:[g("div",{className:"text-2xl font-bold text-red-600",children:L.total}),g("div",{className:"text-sm text-neutral-600",children:"Total"})]}),P("div",{className:"bg-gradient-to-br from-accent-50 to-accent-100 rounded-xl p-4 text-center",children:[g("div",{className:"text-2xl font-bold text-accent-600",children:L.custom}),g("div",{className:"text-sm text-neutral-600",children:"Personalizadas"})]}),P("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 text-center",children:[g("div",{className:"text-2xl font-bold text-green-600",children:L.recent}),g("div",{className:"text-sm text-neutral-600",children:"Esta semana"})]}),P("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 text-center",children:[g("div",{className:"text-2xl font-bold text-blue-600",children:L.thisMonth}),g("div",{className:"text-sm text-neutral-600",children:"Este mês"})]})]})]}),t.length>0&&g("div",{className:"bg-white rounded-2xl shadow-sm border border-neutral-200 p-6 mb-8",children:P("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[g("div",{className:"flex-1 max-w-md",children:P("div",{className:"relative",children:[g(pf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400",size:20}),g("input",{type:"text",placeholder:"Buscar nas favoritas...",value:i,onChange:O=>s(O.target.value),className:"w-full pl-10 pr-4 py-3 border border-neutral-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),P("div",{className:"flex items-center space-x-4",children:[P("div",{className:"flex items-center space-x-2",children:[g(F1,{size:16,className:"text-neutral-500"}),g("span",{className:"text-sm font-medium text-neutral-700",children:"Ordenar por:"})]}),P("select",{value:o,onChange:O=>l(O.target.value),className:"px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:ring-1 focus:ring-primary-500",children:[g("option",{value:"date",children:"Data"}),g("option",{value:"author",children:"Autor"}),g("option",{value:"text",children:"Texto"})]}),g("button",{onClick:()=>c(O=>O==="asc"?"desc":"asc"),className:"p-2 text-neutral-600 hover:text-neutral-800 transition-colors rounded-lg hover:bg-neutral-100",title:`Ordenar ${u==="asc"?"decrescente":"crescente"}`,children:u==="asc"?"↑":"↓"})]})]})}),t.length===0?P("div",{className:"text-center py-16",children:[g(Dr,{className:"w-16 h-16 text-neutral-300 mx-auto mb-4"}),g("h3",{className:"text-xl font-medium text-neutral-600 mb-2",children:"Nenhuma favorita ainda"}),g("p",{className:"text-neutral-500 mb-6",children:"Adicione citações aos favoritos para vê-las aqui"}),g(Kn,{to:"/",className:"inline-flex items-center space-x-2 bg-primary-600 text-white px-6 py-3 rounded-xl hover:bg-primary-700 transition-colors",children:g("span",{children:"Explorar Citações"})})]}):C.length===0?P("div",{className:"text-center py-16",children:[g(pf,{className:"w-16 h-16 text-neutral-300 mx-auto mb-4"}),g("h3",{className:"text-xl font-medium text-neutral-600 mb-2",children:"Nenhuma favorita encontrada"}),g("p",{className:"text-neutral-500 mb-6",children:"Tente ajustar os filtros de busca"}),g("button",{onClick:()=>s(""),className:"inline-flex items-center space-x-2 bg-primary-600 text-white px-6 py-3 rounded-xl hover:bg-primary-700 transition-colors",children:g("span",{children:"Limpar Busca"})})]}):g("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:C.map(O=>P("div",{className:"bg-white rounded-xl shadow-sm border border-neutral-200 p-6 hover:shadow-md transition-all duration-200 hover:scale-105",children:[P("blockquote",{className:"text-neutral-700 font-serif italic mb-4",children:['"',O.text,'"']}),P("footer",{className:"text-neutral-600 mb-4",children:["— ",O.author]}),O.tags.length>0&&g("div",{className:"flex flex-wrap gap-1 mb-4",children:O.tags.slice(0,3).map(z=>g("span",{className:"px-2 py-1 bg-neutral-100 text-neutral-600 text-xs rounded-full",children:z},z))}),P("div",{className:"text-xs text-neutral-500 mb-4",children:["Adicionado em ",new Date(O.createdAt).toLocaleDateString("pt-BR")]}),P("div",{className:"flex items-center justify-between pt-4 border-t border-neutral-200",children:[P("div",{className:"flex items-center space-x-2",children:[g("button",{onClick:()=>R(O.id),className:"p-2 text-red-500 hover:text-red-600 rounded-lg transition-all duration-200 hover:scale-110",title:"Desfavoritar",children:g(Dr,{className:"w-4 h-4 fill-current"})}),g("button",{onClick:()=>I(O),className:`p-2 rounded-lg transition-all duration-200 hover:scale-110 ${d===O.id?"text-green-600 bg-green-50":"text-neutral-400 hover:text-neutral-600"}`,title:d===O.id?"Copiado!":"Copiar",children:d===O.id?g(Ou,{className:"w-4 h-4"}):g(Wl,{className:"w-4 h-4"})}),g("button",{onClick:()=>E(O),className:`p-2 rounded-lg transition-all duration-200 hover:scale-110 ${m===O.id?"text-green-600 bg-green-50":"text-neutral-400 hover:text-neutral-600"}`,title:m===O.id?"Compartilhado!":"Compartilhar",children:m===O.id?g(Ou,{className:"w-4 h-4"}):g(Ql,{className:"w-4 h-4"})})]}),P("div",{className:"flex items-center space-x-2",children:[O.isCustom&&g("span",{className:"text-xs text-accent-600 bg-accent-50 px-2 py-1 rounded-full",children:"Personalizada"}),g("button",{onClick:()=>_(O.id),className:"p-2 text-neutral-400 hover:text-red-500 rounded-lg transition-all duration-200 hover:scale-110",title:"Remover",children:g(Lu,{className:"w-4 h-4"})})]})]})]},O.id))}),i&&g("div",{className:"mt-8 text-center",children:P("p",{className:"text-neutral-600",children:["Mostrando ",C.length," de ",t.length," favoritas"]})})]})})},qL=()=>{var w;const[t,e]=U.useState({text:"",author:"",source:"",category:"other",tags:[]}),[n,r]=U.useState(""),[i,s]=U.useState(!1),[o,l]=U.useState(!1),[u,c]=U.useState(!1),[d,p]=U.useState([]),m=[{value:"philosophy",label:"Filosofia"},{value:"sociology",label:"Sociologia"},{value:"psychology",label:"Psicologia"},{value:"literature",label:"Literatura"},{value:"politics",label:"Política"},{value:"science",label:"Ciência"},{value:"art",label:"Arte"},{value:"music",label:"Música"},{value:"other",label:"Outro"}],x=["Friedrich Nietzsche","Karl Marx","Sigmund Freud","Jean-Paul Sartre","Albert Camus","Michel Foucault","Simone de Beauvoir","Hannah Arendt","Noam Chomsky","Judith Butler","Slavoj Žižek","Cornel West","Paulo Freire","Clarice Lispector","Machado de Assis","Carlos Drummond de Andrade","Vinicius de Moraes","Cecília Meireles","Mário de Andrade","Oswald de Andrade","Guimarães Rosa","Jorge Amado","Érico Veríssimo","Lygia Fagundes Telles","Adélia Prado","Manoel de Barros","Ferreira Gullar","Drummond de Andrade","William Shakespeare","Charles Dickens","Jane Austen","Virginia Woolf","James Joyce","F. Scott Fitzgerald","Ernest Hemingway","Gabriel García Márquez","Pablo Neruda","Octavio Paz","Jorge Luis Borges","Julio Cortázar","Mario Vargas Llosa","Isabel Allende","Eduardo Galeano","Elena Poniatowska"],A={philosophy:["existencialismo","estoicismo","epicurismo","ética","moral","metafísica","lógica"],sociology:["sociedade","cultura","política","economia","desigualdade","movimentos sociais"],psychology:["mente","comportamento","emoções","cognição","desenvolvimento","terapia"],literature:["poesia","romance","drama","crítica","escrita","narrativa"],politics:["democracia","liberdade","justiça","poder","governo","revolução"],science:["descoberta","inovação","método","teoria","experimento","conhecimento"],art:["criatividade","beleza","expressão","inspiração","estética","criação"],music:["harmonia","ritmo","melodia","expressão","inspiração","arte"],other:["vida","amor","sucesso","felicidade","sabedoria","reflexão"]},R=(y,T)=>{if(e(k=>({...k,[y]:T})),y==="author"&&T.trim()){const k=x.filter(S=>S.toLowerCase().includes(T.toLowerCase())).slice(0,5);p(k),c(k.length>0)}else y==="author"&&!T.trim()&&(c(!1),p([]))},I=()=>{n.trim()&&!t.tags.includes(n.trim())&&(e(y=>({...y,tags:[...y.tags,n.trim()]})),r(""))},E=y=>{e(T=>({...T,tags:T.tags.filter(k=>k!==y)}))},_=y=>{e(T=>({...T,author:y})),c(!1),p([])},C=()=>{confirm("Tem certeza que deseja limpar o formulário? Todos os dados serão perdidos.")&&(e({text:"",author:"",source:"",category:"other",tags:[]}),r(""))},L=(y,T)=>Tt.getQuotes().some(S=>S.text.toLowerCase().trim()===y.toLowerCase().trim()&&S.author.toLowerCase().trim()===T.toLowerCase().trim()),O=async y=>{if(y.preventDefault(),!t.text.trim()||!t.author.trim()){alert("Por favor, preencha pelo menos o texto e o autor.");return}if(L(t.text.trim(),t.author.trim())){alert("Esta citação já existe na sua biblioteca. Verifique se não foi adicionada anteriormente.");return}s(!0);try{const T={id:Date.now().toString(),text:t.text.trim(),author:t.author.trim(),source:t.source.trim()||"",category:t.category,tags:t.tags,isFavorite:!1,isCustom:!0,createdAt:new Date().toISOString()};Tt.addQuote(T),Tt.backupQuotes(),e({text:"",author:"",source:"",category:"other",tags:[]}),l(!0),setTimeout(()=>l(!1),3e3)}catch(T){console.error("Erro ao salvar citação:",T),alert("Erro ao salvar citação. Tente novamente.")}finally{s(!1)}},z=A[t.category]||[];return P("div",{className:"max-w-2xl mx-auto",children:[o&&P("div",{className:"fixed top-4 right-4 bg-green-500 text-white px-6 py-4 rounded-xl shadow-lg flex items-center space-x-3 z-50 animate-fade-in-up",children:[g(JC,{size:20}),g("span",{className:"font-medium",children:"Pensamento salvo com sucesso!"})]}),P("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[g("div",{className:"mb-6",children:P(Kn,{to:"/",className:"inline-flex items-center space-x-2 text-neutral-600 hover:text-neutral-800 transition-colors",children:[g(Ic,{size:16}),g("span",{children:"Voltar"})]})}),g("h1",{className:"text-2xl font-serif font-semibold text-neutral-800 mb-6",children:"Adicionar Pensamento"}),P("form",{onSubmit:O,className:"space-y-6",children:[P("div",{children:[g("label",{htmlFor:"text",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Citação *"}),g("textarea",{id:"text",value:t.text,onChange:y=>R("text",y.target.value),rows:4,className:"w-full px-3 py-2 border border-neutral-200 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none",placeholder:"Digite a citação aqui...",maxLength:500,required:!0}),P("div",{className:"text-xs text-neutral-500 mt-1",children:[t.text.length,"/500 caracteres"]})]}),P("div",{className:"relative",children:[g("label",{htmlFor:"author",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Autor *"}),g("input",{type:"text",id:"author",value:t.author,onChange:y=>R("author",y.target.value),className:"w-full px-3 py-2 border border-neutral-200 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Nome do autor",maxLength:100,required:!0}),P("div",{className:"text-xs text-neutral-500 mt-1",children:[t.author.length,"/100 caracteres"]}),u&&g("div",{className:"absolute z-10 w-full mt-1 bg-white border border-neutral-200 rounded-md shadow-lg max-h-48 overflow-y-auto",children:d.map((y,T)=>g("button",{type:"button",onClick:()=>_(y),className:"w-full px-3 py-2 text-left hover:bg-neutral-50 focus:bg-neutral-50 focus:outline-none border-b border-neutral-100 last:border-b-0",children:y},T))})]}),P("div",{children:[g("label",{htmlFor:"source",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Fonte (opcional)"}),g("input",{type:"text",id:"source",value:t.source,onChange:y=>R("source",y.target.value),className:"w-full px-3 py-2 border border-neutral-200 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Livro, obra, etc."})]}),P("div",{children:[g("label",{htmlFor:"category",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Categoria"}),g("select",{id:"category",value:t.category,onChange:y=>R("category",y.target.value),className:"w-full px-3 py-2 border border-neutral-200 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:m.map(y=>g("option",{value:y.value,children:y.label},y.value))})]}),P("div",{children:[g("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Tags"}),P("div",{className:"flex gap-2 mb-2",children:[g("input",{type:"text",value:n,onChange:y=>r(y.target.value),onKeyPress:y=>y.key==="Enter"&&(y.preventDefault(),I()),className:"flex-1 px-3 py-2 border border-neutral-200 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Adicionar tag..."}),g("button",{type:"button",onClick:I,className:"px-3 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors duration-200",children:g(Gp,{className:"w-4 h-4"})})]}),z.length>0&&P("div",{className:"mb-3",children:[P("p",{className:"text-xs text-neutral-500 mb-2",children:["Sugestões para ",(w=m.find(y=>y.value===t.category))==null?void 0:w.label,":"]}),g("div",{className:"flex flex-wrap gap-1",children:z.map(y=>g("button",{type:"button",onClick:()=>{t.tags.includes(y)||e(T=>({...T,tags:[...T.tags,y]}))},disabled:t.tags.includes(y),className:`px-2 py-1 text-xs rounded-full transition-colors ${t.tags.includes(y)?"bg-green-100 text-green-700 cursor-not-allowed":"bg-neutral-100 text-neutral-700 hover:bg-primary-100 hover:text-primary-700"}`,children:y},y))})]}),t.tags.length>0&&g("div",{className:"flex flex-wrap gap-2",children:t.tags.map(y=>P("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-neutral-100 text-neutral-700 text-sm rounded-full",children:[y,g("button",{type:"button",onClick:()=>E(y),className:"text-neutral-500 hover:text-neutral-700",children:g(B1,{className:"w-3 h-3"})})]},y))})]}),P("div",{className:"flex justify-between",children:[P("button",{type:"button",onClick:C,className:"flex items-center gap-2 px-4 py-2 text-neutral-600 hover:text-neutral-800 border border-neutral-300 rounded-lg hover:bg-neutral-50 transition-colors",children:[g(aR,{className:"w-4 h-4"}),"Limpar"]}),P("button",{type:"submit",disabled:i,className:"btn-primary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[g(z1,{className:"w-4 h-4"}),i?"Salvando...":"Salvar Pensamento"]})]})]})]})]})},HL=()=>{const[t,e]=U.useState("dashboard"),[n,r]=U.useState(null),[i,s]=U.useState({total:0,favorites:0,custom:0,thisWeek:0,thisMonth:0,totalDays:0,averagePerDay:0}),[o,l]=U.useState([]),[u,c]=U.useState([]),[d,p]=U.useState([]),[m,x]=U.useState([]),[A,R]=U.useState(!1),[I,E]=U.useState({name:"",bio:"",avatar:""});U.useEffect(()=>{_()},[]);const _=async()=>{const S=cn.getCurrentUser();if(S)try{const b=await cn.getUserData(S.uid);b&&(r(b),E({name:b.name,bio:b.bio||"",avatar:b.avatar||""}),C(),L())}catch(b){console.error("Erro ao carregar dados do usuário:",b)}},C=()=>{const S=Tt.getQuotes(),b=S.filter(se=>se.isFavorite),N=S.filter(se=>se.isCustom),Ve=S.filter(se=>new Date().getTime()-new Date(se.createdAt).getTime()<7*24*60*60*1e3),vt=S.filter(se=>{const Ae=new Date(se.createdAt),st=new Date;return Ae.getMonth()===st.getMonth()&&Ae.getFullYear()===st.getFullYear()}),Kt=S.map(se=>new Date(se.createdAt).toDateString()),H=new Set(Kt).size,X=H>0?(S.length/H).toFixed(1):0,ee={};S.forEach(se=>{ee[se.author]=(ee[se.author]||0)+1});const pe=Object.entries(ee).map(([se,Ae])=>({author:se,count:Ae})).sort((se,Ae)=>Ae.count-se.count).slice(0,5),ce={};S.forEach(se=>{ce[se.category]=(ce[se.category]||0)+1});const we=Object.entries(ce).map(([se,Ae])=>({category:se,count:Ae})).sort((se,Ae)=>Ae.count-se.count).slice(0,5);s({total:S.length,favorites:b.length,custom:N.length,thisWeek:Ve.length,thisMonth:vt.length,totalDays:H,averagePerDay:parseFloat(X.toString())}),c(pe),p(we);const kt=S.sort((se,Ae)=>new Date(Ae.createdAt).getTime()-new Date(se.createdAt).getTime()).slice(0,5);l(kt)},L=()=>{n&&x(n.achievements||[])},O=async()=>{if(!n)return;const S=cn.getCurrentUser();if(S)try{const b={...n,name:I.name,bio:I.bio,avatar:I.avatar};await cn.updateUser(S.uid,{name:I.name,bio:I.bio,avatar:I.avatar}),r(b),R(!1)}catch(b){console.error("Erro ao salvar perfil:",b)}},z=()=>{const S=Tt.getQuotes(),b=JSON.stringify(S,null,2),N=new Blob([b],{type:"application/json"}),Ve=URL.createObjectURL(N),vt=document.createElement("a");vt.href=Ve,vt.download=`sapientia-quotes-${new Date().toISOString().split("T")[0]}.json`,vt.click(),URL.revokeObjectURL(Ve)},w=()=>{confirm("Tem certeza que deseja limpar todos os dados? Esta ação não pode ser desfeita.")&&(localStorage.clear(),C(),alert("Dados limpos com sucesso!"))},y=S=>({philosophy:"Filosofia",literature:"Literatura",psychology:"Psicologia",science:"Ciência",politics:"Política"})[S]||S,T=m.filter(S=>S.unlocked).length,k=m.length;return n?g("div",{className:"min-h-screen bg-neutral-50",children:P("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[P("div",{className:"mb-8",children:[P(Kn,{to:"/",className:"inline-flex items-center space-x-2 text-neutral-600 hover:text-neutral-800 transition-colors mb-6",children:[g(Ic,{size:16}),g("span",{children:"Voltar"})]}),P("div",{className:"flex items-center justify-between mb-6",children:[P("div",{className:"flex items-center space-x-4",children:[P("div",{className:"relative",children:[g("div",{className:"w-16 h-16 bg-gradient-to-br from-primary-500 to-primary-600 rounded-full flex items-center justify-center text-white font-bold text-xl",children:n.avatar?g("img",{src:n.avatar,alt:n.name,className:"w-16 h-16 rounded-full"}):n.name.charAt(0).toUpperCase()}),g("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-2 border-white flex items-center justify-center",children:g(ff,{className:"w-3 h-3 text-white"})})]}),P("div",{children:[g("h1",{className:"text-3xl font-serif font-bold text-neutral-800",children:n.name}),g("p",{className:"text-neutral-600",children:n.bio||"Sem descrição"}),P("div",{className:"flex items-center space-x-4 mt-2",children:[P("div",{className:"flex items-center space-x-1",children:[g(ff,{className:"w-4 h-4 text-yellow-500"}),P("span",{className:"text-sm text-neutral-600",children:["Nível ",n.level]})]}),P("div",{className:"flex items-center space-x-1",children:[g(cR,{className:"w-4 h-4 text-yellow-500"}),P("span",{className:"text-sm text-neutral-600",children:[n.experience," XP"]})]})]})]})]}),P("button",{onClick:()=>R(!0),className:"flex items-center space-x-2 bg-primary-600 text-white px-4 py-2 rounded-xl hover:bg-primary-700 transition-colors",children:[g(oR,{size:16}),g("span",{children:"Editar Perfil"})]})]}),P("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-neutral-200",children:[P("div",{className:"flex items-center justify-between mb-2",children:[g("span",{className:"text-sm font-medium text-neutral-700",children:"Progresso para o próximo nível"}),P("span",{className:"text-sm text-neutral-500",children:[n.experience%100,"/100 XP"]})]}),g("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:g("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 h-2 rounded-full transition-all duration-300",style:{width:`${n.experience%100}%`}})})]})]}),g("div",{className:"bg-white rounded-2xl shadow-sm border border-neutral-200 p-2 mb-8",children:g("div",{className:"flex space-x-1",children:[{id:"dashboard",label:"Dashboard",icon:dR},{id:"data",label:"Dados",icon:M1},{id:"settings",label:"Configurações",icon:lR},{id:"achievements",label:"Conquistas",icon:v0}].map(S=>{const b=S.icon;return P("button",{onClick:()=>e(S.id),className:`flex-1 flex items-center justify-center space-x-2 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${t===S.id?"bg-primary-600 text-white shadow-md":"text-neutral-600 hover:text-neutral-800 hover:bg-neutral-100"}`,children:[g(b,{size:16}),g("span",{children:S.label})]},S.id)})})}),A&&g("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:P("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full",children:[P("div",{className:"flex items-center justify-between mb-6",children:[g("h3",{className:"text-xl font-bold text-neutral-800",children:"Editar Perfil"}),g("button",{onClick:()=>R(!1),className:"p-2 text-neutral-400 hover:text-neutral-600",children:g(B1,{size:20})})]}),P("div",{className:"space-y-4",children:[P("div",{children:[g("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Nome"}),g("input",{type:"text",value:I.name,onChange:S=>E(b=>({...b,name:S.target.value})),className:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),P("div",{children:[g("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Bio"}),g("textarea",{value:I.bio,onChange:S=>E(b=>({...b,bio:S.target.value})),rows:3,className:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"Conte um pouco sobre você..."})]}),P("div",{children:[g("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"URL do Avatar (opcional)"}),g("input",{type:"url",value:I.avatar,onChange:S=>E(b=>({...b,avatar:S.target.value})),className:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"https://exemplo.com/avatar.jpg"})]})]}),P("div",{className:"flex space-x-3 mt-6",children:[P("button",{onClick:O,className:"flex-1 bg-primary-600 text-white py-2 px-4 rounded-lg hover:bg-primary-700 transition-colors",children:[g(z1,{size:16,className:"inline mr-2"}),"Salvar"]}),g("button",{onClick:()=>R(!1),className:"flex-1 bg-neutral-200 text-neutral-700 py-2 px-4 rounded-lg hover:bg-neutral-300 transition-colors",children:"Cancelar"})]})]})}),t==="dashboard"&&P("div",{className:"space-y-8",children:[P("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[P("div",{className:"bg-gradient-to-br from-primary-50 to-primary-100 rounded-xl p-6 text-center",children:[g("div",{className:"text-3xl font-bold text-primary-600 mb-2",children:i.total}),g("div",{className:"text-sm text-neutral-600",children:"Total"})]}),P("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-6 text-center",children:[g("div",{className:"text-3xl font-bold text-red-500 mb-2",children:i.favorites}),g("div",{className:"text-sm text-neutral-600",children:"Favoritas"})]}),P("div",{className:"bg-gradient-to-br from-accent-50 to-accent-100 rounded-xl p-6 text-center",children:[g("div",{className:"text-3xl font-bold text-accent-600 mb-2",children:i.custom}),g("div",{className:"text-sm text-neutral-600",children:"Personalizadas"})]}),P("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6 text-center",children:[g("div",{className:"text-3xl font-bold text-green-600 mb-2",children:i.thisWeek}),g("div",{className:"text-sm text-neutral-600",children:"Esta semana"})]})]}),P("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[P("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-neutral-200",children:[P("h3",{className:"text-lg font-semibold text-neutral-800 mb-4 flex items-center space-x-2",children:[g(HC,{className:"w-5 h-5 text-blue-500"}),g("span",{children:"Atividade"})]}),P("div",{className:"space-y-3",children:[P("div",{className:"flex justify-between",children:[g("span",{className:"text-neutral-600",children:"Dias de uso:"}),g("span",{className:"font-medium",children:i.totalDays})]}),P("div",{className:"flex justify-between",children:[g("span",{className:"text-neutral-600",children:"Média/dia:"}),g("span",{className:"font-medium",children:i.averagePerDay})]}),P("div",{className:"flex justify-between",children:[g("span",{className:"text-neutral-600",children:"Este mês:"}),g("span",{className:"font-medium",children:i.thisMonth})]})]})]}),P("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-neutral-200",children:[P("h3",{className:"text-lg font-semibold text-neutral-800 mb-4 flex items-center space-x-2",children:[g(Kp,{className:"w-5 h-5 text-purple-500"}),g("span",{children:"Top Autores"})]}),g("div",{className:"space-y-2",children:u.map(S=>P("div",{className:"flex justify-between items-center",children:[g("span",{className:"text-sm text-neutral-600 truncate",children:S.author}),g("span",{className:"text-sm font-medium text-neutral-800",children:S.count})]},S.author))})]}),P("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-neutral-200",children:[P("h3",{className:"text-lg font-semibold text-neutral-800 mb-4 flex items-center space-x-2",children:[g(hR,{className:"w-5 h-5 text-orange-500"}),g("span",{children:"Top Categorias"})]}),g("div",{className:"space-y-2",children:d.map(S=>P("div",{className:"flex justify-between items-center",children:[g("span",{className:"text-sm text-neutral-600",children:y(S.category)}),g("span",{className:"text-sm font-medium text-neutral-800",children:S.count})]},S.category))})]})]}),P("div",{className:"bg-white rounded-2xl shadow-sm border border-neutral-200 p-8",children:[g("h3",{className:"text-xl font-serif font-bold text-neutral-800 mb-6",children:"Citações Recentes"}),o.length===0?P("div",{className:"text-center py-8",children:[g(Gp,{className:"w-12 h-12 text-neutral-300 mx-auto mb-4"}),g("p",{className:"text-neutral-500",children:"Nenhuma citação ainda"})]}):g("div",{className:"space-y-4",children:o.map((S,b)=>P("div",{className:"flex items-start space-x-4 p-4 bg-neutral-50 rounded-xl",children:[g("div",{className:"flex-shrink-0 w-8 h-8 bg-primary-100 text-primary-600 rounded-full flex items-center justify-center text-sm font-medium",children:b+1}),P("div",{className:"flex-1",children:[P("blockquote",{className:"text-neutral-700 font-serif italic mb-2",children:['"',S.text,'"']}),P("footer",{className:"text-neutral-600 text-sm",children:["— ",S.author]}),P("div",{className:"flex items-center space-x-2 mt-2",children:[S.isFavorite&&g(Dr,{className:"w-4 h-4 text-red-500 fill-current"}),S.isCustom&&g("span",{className:"text-xs text-accent-600 bg-accent-50 px-2 py-1 rounded-full",children:"Personalizada"}),g("span",{className:"text-xs text-neutral-500",children:new Date(S.createdAt).toLocaleDateString("pt-BR")})]})]})]},S.id))})]})]}),t==="data"&&P("div",{className:"space-y-8",children:[P("div",{className:"bg-white rounded-2xl shadow-sm border border-neutral-200 p-8",children:[g("h3",{className:"text-xl font-serif font-bold text-neutral-800 mb-6",children:"Gestão de Dados"}),P("div",{className:"grid gap-4 md:grid-cols-2",children:[P("button",{onClick:z,className:"flex items-center space-x-3 p-4 bg-primary-50 hover:bg-primary-100 text-primary-700 rounded-xl transition-colors",children:[g(YC,{size:20}),g("span",{children:"Exportar Dados"})]}),P("button",{onClick:()=>{const S=Tt.restoreFromBackup();S?(C(),alert(`Recuperadas ${S.length} citações do backup!`)):alert("Nenhum backup encontrado.")},className:"flex items-center space-x-3 p-4 bg-yellow-50 hover:bg-yellow-100 text-yellow-700 rounded-xl transition-colors",children:[g(fR,{size:20}),g("span",{children:"Restaurar Backup"})]}),P("button",{onClick:()=>{Tt.backupQuotes(),alert("Backup criado com sucesso!")},className:"flex items-center space-x-3 p-4 bg-green-50 hover:bg-green-100 text-green-700 rounded-xl transition-colors",children:[g(GC,{size:20}),g("span",{children:"Criar Backup"})]}),P("button",{onClick:w,className:"flex items-center space-x-3 p-4 bg-red-50 hover:bg-red-100 text-red-700 rounded-xl transition-colors",children:[g(Lu,{size:20}),g("span",{children:"Limpar Dados"})]})]})]}),P("div",{className:"bg-white rounded-2xl shadow-sm border border-neutral-200 p-8",children:[g("h3",{className:"text-xl font-serif font-bold text-neutral-800 mb-6",children:"Ferramentas Avançadas"}),P("div",{className:"grid gap-4 md:grid-cols-2",children:[P("button",{onClick:()=>{const S=Tt.getQuotesStats();alert(`Citações validadas e corrigidas!

Total: ${S.total}
Favoritas: ${S.favorites}
Personalizadas: ${S.custom}
Esta semana: ${S.recent}`)},className:"flex items-center space-x-3 p-4 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-xl transition-colors",children:[g(mR,{size:20}),g("span",{children:"Validar Citações"})]}),P("button",{onClick:()=>{const S=i.total;Tt.removeDuplicates();const b=Tt.getQuotes().length;C(),alert(`Duplicações removidas! ${S-b} citações duplicadas foram removidas.`)},className:"flex items-center space-x-3 p-4 bg-orange-50 hover:bg-orange-100 text-orange-700 rounded-xl transition-colors",children:[g(tR,{size:20}),g("span",{children:"Limpar Duplicações"})]})]})]})]}),t==="settings"&&g("div",{className:"space-y-8",children:P("div",{className:"bg-white rounded-2xl shadow-sm border border-neutral-200 p-8",children:[g("h3",{className:"text-xl font-serif font-bold text-neutral-800 mb-6",children:"Configurações"}),P("div",{className:"space-y-6",children:[P("div",{className:"flex items-center justify-between p-4 bg-neutral-50 rounded-xl",children:[P("div",{className:"flex items-center space-x-3",children:[g(sR,{className:"w-5 h-5 text-purple-500"}),P("div",{children:[g("h4",{className:"font-medium text-neutral-800",children:"Tema Escuro"}),g("p",{className:"text-sm text-neutral-600",children:"Ativar modo escuro"})]})]}),g("button",{className:"w-12 h-6 bg-neutral-300 rounded-full relative",children:g("div",{className:"w-4 h-4 bg-white rounded-full absolute left-1 top-1 transition-transform"})})]}),P("div",{className:"flex items-center justify-between p-4 bg-neutral-50 rounded-xl",children:[P("div",{className:"flex items-center space-x-3",children:[g(QC,{className:"w-5 h-5 text-blue-500"}),P("div",{children:[g("h4",{className:"font-medium text-neutral-800",children:"Notificações"}),g("p",{className:"text-sm text-neutral-600",children:"Lembretes diários"})]})]}),g("button",{className:"w-12 h-6 bg-primary-600 rounded-full relative",children:g("div",{className:"w-4 h-4 bg-white rounded-full absolute right-1 top-1 transition-transform"})})]}),P("div",{className:"flex items-center justify-between p-4 bg-neutral-50 rounded-xl",children:[P("div",{className:"flex items-center space-x-3",children:[g(uR,{className:"w-5 h-5 text-green-500"}),P("div",{children:[g("h4",{className:"font-medium text-neutral-800",children:"Backup Automático"}),g("p",{className:"text-sm text-neutral-600",children:"Salvar automaticamente"})]})]}),g("button",{className:"w-12 h-6 bg-primary-600 rounded-full relative",children:g("div",{className:"w-4 h-4 bg-white rounded-full absolute right-1 top-1 transition-transform"})})]})]})]})}),t==="achievements"&&P("div",{className:"space-y-8",children:[g("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-2xl p-8 border border-yellow-200",children:P("div",{className:"text-center mb-6",children:[g(v0,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),g("h3",{className:"text-2xl font-bold text-neutral-800 mb-2",children:"Conquistas"}),P("p",{className:"text-neutral-600",children:[T," de ",k," conquistas desbloqueadas"]}),g("div",{className:"w-full bg-neutral-200 rounded-full h-2 mt-4",children:g("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 h-2 rounded-full transition-all duration-300",style:{width:`${T/k*100}%`}})})]})}),g("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:m.map(S=>g("div",{className:`p-6 rounded-xl border-2 transition-all duration-200 ${S.unlocked?"bg-gradient-to-br from-yellow-50 to-orange-50 border-yellow-200 shadow-md":"bg-neutral-100 border-neutral-200 opacity-60"}`,children:P("div",{className:"text-center",children:[g("div",{className:`text-4xl mb-3 ${S.unlocked?"":"grayscale"}`,children:S.icon}),g("h4",{className:`font-semibold mb-2 ${S.unlocked?"text-neutral-800":"text-neutral-500"}`,children:S.title}),g("p",{className:`text-sm ${S.unlocked?"text-neutral-600":"text-neutral-400"}`,children:S.description}),S.unlocked&&g("div",{className:"mt-3",children:g(WC,{className:"w-5 h-5 text-yellow-500 mx-auto"})})]})},S.id))})]})]})}):g("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center",children:P("div",{className:"text-center",children:[g("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),g("p",{className:"mt-4 text-neutral-600",children:"Carregando..."})]})})},WL=()=>{const[t,e]=U.useState(!0),[n,r]=U.useState({email:"",password:"",name:""}),[i,s]=U.useState(!1),[o,l]=U.useState(!1),[u,c]=U.useState(""),d=async m=>{m.preventDefault(),l(!0),c("");try{if(t){if(!n.email||!n.password)throw new Error("Preencha todos os campos");const x=await cn.login(n.email,n.password);console.log("Login successful:",x)}else{if(!n.email||!n.password||!n.name)throw new Error("Preencha todos os campos");if(n.password.length<6)throw new Error("A senha deve ter pelo menos 6 caracteres");const x=await cn.register(n.email,n.password,n.name);console.log("Register successful:",x)}}catch(x){c(x.message)}finally{l(!1)}},p=(m,x)=>{r(A=>({...A,[m]:x}))};return g("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-neutral-50 to-accent-50 flex items-center justify-center p-4",children:P("div",{className:"w-full max-w-md",children:[P("div",{className:"text-center mb-8",children:[P(Kn,{to:"/",className:"inline-flex items-center space-x-2 text-neutral-600 hover:text-neutral-800 transition-colors mb-6",children:[g(Ic,{size:16}),g("span",{children:"Voltar"})]}),P("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[P("div",{className:"relative",children:[g(Kp,{className:"w-8 h-8 text-primary-600 animate-bounce"}),g("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-accent-500 rounded-full animate-pulse"})]}),P("h1",{className:"text-3xl font-serif font-bold text-neutral-800 animate-fade-in",children:[g("span",{className:"inline-block animate-slide-up",children:"S"}),g("span",{className:"inline-block animate-slide-up",style:{animationDelay:"0.1s"},children:"a"}),g("span",{className:"inline-block animate-slide-up",style:{animationDelay:"0.2s"},children:"p"}),g("span",{className:"inline-block animate-slide-up",style:{animationDelay:"0.3s"},children:"i"}),g("span",{className:"inline-block animate-slide-up",style:{animationDelay:"0.4s"},children:"e"}),g("span",{className:"inline-block animate-slide-up",style:{animationDelay:"0.5s"},children:"n"}),g("span",{className:"inline-block animate-slide-up",style:{animationDelay:"0.6s"},children:"t"}),g("span",{className:"inline-block animate-slide-up",style:{animationDelay:"0.7s"},children:"i"}),g("span",{className:"inline-block animate-slide-up",style:{animationDelay:"0.8s"},children:"a"})]})]}),g("p",{className:"text-neutral-600",children:t?"Entre na sua conta":"Crie sua conta"})]}),P("div",{className:"bg-white rounded-2xl shadow-xl border border-neutral-200 p-8",children:[P("form",{onSubmit:d,className:"space-y-6",children:[u&&g("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:g("p",{className:"text-red-800 text-sm",children:u})}),!t&&P("div",{children:[g("label",{htmlFor:"name",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Nome"}),P("div",{className:"relative",children:[g(pR,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400",size:20}),g("input",{type:"text",id:"name",value:n.name,onChange:m=>p("name",m.target.value),className:"w-full pl-10 pr-4 py-3 border border-neutral-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Seu nome completo",required:!t})]})]}),P("div",{children:[g("label",{htmlFor:"email",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Email"}),P("div",{className:"relative",children:[g(iR,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400",size:20}),g("input",{type:"email",id:"email",value:n.email,onChange:m=>p("email",m.target.value),className:"w-full pl-10 pr-4 py-3 border border-neutral-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"seu@email.com",required:!0})]})]}),P("div",{children:[g("label",{htmlFor:"password",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Senha"}),P("div",{className:"relative",children:[g(nR,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400",size:20}),g("input",{type:i?"text":"password",id:"password",value:n.password,onChange:m=>p("password",m.target.value),className:"w-full pl-10 pr-12 py-3 border border-neutral-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Sua senha",required:!0}),g("button",{type:"button",onClick:()=>s(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-neutral-400 hover:text-neutral-600",children:i?g(ZC,{size:20}):g(eR,{size:20})})]})]}),g("button",{type:"submit",disabled:o,className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-medium py-3 px-6 rounded-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105",children:o?P("div",{className:"flex items-center justify-center space-x-2",children:[g("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),g("span",{children:"Carregando..."})]}):t?"Entrar":"Criar Conta"})]}),P("div",{className:"mt-6 text-center",children:[g("p",{className:"text-neutral-600",children:t?"Não tem uma conta?":"Já tem uma conta?"}),g("button",{onClick:()=>{e(!t),c(""),r({email:"",password:"",name:""})},className:"text-primary-600 hover:text-primary-700 font-medium transition-colors",children:t?"Criar conta":"Fazer login"})]})]}),g("div",{className:"text-center mt-8",children:P("p",{className:"text-sm text-neutral-500",children:["Ao continuar, você concorda com nossos"," ",g("a",{href:"#",className:"text-primary-600 hover:text-primary-700",children:"Termos de Uso"})," ","e"," ",g("a",{href:"#",className:"text-primary-600 hover:text-primary-700",children:"Política de Privacidade"})]})})]})})};function QL(){const[t,e]=U.useState(null),[n,r]=U.useState(!0);U.useEffect(()=>{const s=cn.onAuthStateChanged(async o=>{if(console.log("Auth state changed:",o),o)try{const l=await cn.getUserData(o.uid);if(console.log("User data loaded:",l),l&&l.id)e(l);else throw new Error("Dados do usuário inválidos")}catch(l){console.error("Erro ao buscar dados do usuário:",l);const u={id:o.uid,email:o.email||"",name:o.displayName||"Usuário",bio:"",avatar:"",level:1,experience:0,totalQuotes:0,totalFavorites:0,totalCustom:0,streak:0,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString(),preferences:{theme:"light",notifications:!0,autoBackup:!0,language:"pt-BR",privacy:"private"},achievements:[],goals:[]};console.log("Usando usuário fallback:",u),e(u)}else e(null);r(!1)});return()=>s()},[]);const i=async()=>{try{await cn.logout(),e(null)}catch(s){console.error("Erro ao fazer logout:",s)}};return n?g("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center",children:P("div",{className:"text-center",children:[g("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),g("p",{className:"mt-4 text-neutral-600",children:"Carregando..."})]})}):P("div",{className:"min-h-screen bg-neutral-50",children:[t&&g(i4,{onLogout:i,currentUser:t}),g("main",{children:P(PC,{children:[g(Qi,{path:"/",element:t?g(jL,{}):g(go,{to:"/login"})}),g(Qi,{path:"/favorites",element:t?g($L,{}):g(go,{to:"/login"})}),g(Qi,{path:"/add",element:t?g(qL,{}):g(go,{to:"/login"})}),g(Qi,{path:"/profile",element:t?g(HL,{}):g(go,{to:"/login"})}),g(Qi,{path:"/login",element:t?g(go,{to:"/"}):g(WL,{})})]})}),t&&g(s4,{})]})}gd.createRoot(document.getElementById("root")).render(g(S_.StrictMode,{children:g(FC,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:g(QL,{})})}));
